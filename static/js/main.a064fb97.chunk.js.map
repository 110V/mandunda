{"version":3,"sources":["GameEngine/Game.ts","GameEngine/blockFuncs/BlockFunctions.ts","../node_modules/encoding/lib sync","GameEngine/Transform.ts","App.module.css","GameEngine/Frame.ts","GameEngine/MovieClip.ts","GameEngine/ResourceManager.ts","GameEngine/Graphic.ts","components/GameScreen.tsx","GamePlayer.module.css","serviceWorker.js","components/ScreenUtils/TransformEditor.ts","components/Screen.tsx","components/ScreenUtils/FrontUI.ts","customBlocks/definitions/definition.ts","customBlocks/generators/gameStart.ts","customBlocks/generators/addForce.ts","customBlocks/generators/addPhysics.ts","customBlocks/generators/checkCollision.ts","customBlocks/generators/gameTick.ts","customBlocks/generators/getKeyboardEvent.ts","customBlocks/generators/getKeyboardState.ts","customBlocks/generators/getMouseEvent.ts","customBlocks/generators/getMouseState.ts","customBlocks/generators/getObject.ts","customBlocks/generators/getPos.ts","customBlocks/generators/getVelocity.ts","customBlocks/generators/mouseEvent.ts","customBlocks/generators/setPos.ts","customBlocks/generators/setVelocity.ts","customBlocks/generators/setRotation.ts","content.tsx","App.tsx","resizableWindow/Resize.js","resizableWindow/index.js","Utils.ts","GamePlayer.tsx","Root.tsx","index.tsx"],"names":["Game","width","height","target","backgroundColor","fps","mainClip","MovieClip","app","isPlaying","framesPerSecond","secondPerFrame","this","lastTime","Date","getTime","timeLeft","deltaTime","ticks","objects","engine","Matter","create","bodys","startCallback","isDestroying","keys","keysDownOnce","keysUpOnce","mouseDown","mouseOnceDown","mouseOnceUp","mouseOnceClick","PIXI","setFps","appendChild","view","world","gravity","y","shared","on","alert","initEvents","update","Transform","init","map","func","tick","ticker","add","requestAnimationFrame","animate","game","destroy","Math","min","updatePhysics","render","name","object","isStatic","friction","mass","noRotation","bound","getBound","sprite","getBounds","transform","getTransform","body","rectangle","x","angle","rotation","setInertia","push","gameObject","el","setTransform","vertices","type","callback","interactive","hitArea","renderer","resolution","interactiveChildren","addListener","tickEvent","keyCode","addEventListener","onMouseDown","onMouseUp","onClick","window","e","keyDown","keyUp","eventTick","key","i","slice","repeat","BlockFunctions","Body","applyForce","position","addPhysics","a","b","Query","collides","length","blocks","addTick","eventType","isKeyPress","isKeyRelease","stateType","isKeyDown","isMouseOnceDown","isMouseOnceUp","isMouseOnceClick","isMouseDown","objectName","getObject","velocity","console","log","addMouseEvent","setPosition","setVelocity","setAngle","PI","webpackEmptyContext","req","Error","code","resolve","module","exports","id","scaleX","scaleY","child","rotatedPos","rotatePos","seta","cos","sin","roatation","Frame","script","batches","entry","forEach","rebatchAll","batch","splice","container","addChild","makeContainer","newBatchs","tempBatch","exportStruct","maker","exportMaker","childs","parent","frames","currentFrame","addFrame","clone","frame","stop","play","getFrameCount","targetCount","getFrame","Object","transforms","extendFramesTo","addObject","setParent","frameNum","removeObject","num","getCurrentFrame","calcChildTransform","JSON","stringify","struct","rm","undefined","make","fromObject","importStruct","json","parse","clip","resourceManager","Graphic","texture","ResourceManager","loader","loading","queue","callBack","data","imageToBase64","then","response","addDirectBase64","onConvert","catch","error","load","resources","loaderLoad","base64","texId","from","getTexture","newTransform","set","scale","GameScreen","props","useRef","stageDiv","current","gameJson","gameFile","importJson","resource","eval","start","useEffect","className","style","border","ref","Boolean","location","hostname","match","State","transformEditor","gameObjects","pixiObjects","FrontUI","stage","lineWidth","lineColor","alpha","pivot","drawShape","graphic","drawRect","radius","drawCircle","x1","y1","x2","y2","moveTo","lineTo","drawing","removeChildren","lineStyle","TransformEditor","frontUI","points","transformChanged","selectedTargetChanged","selectedTargetMoving","state","none","targetIndex","prevMouseX","prevMouseY","point","beginFill","color","pointMouseDown","mouseUp","mouseMove","global","removeAllListeners","targetMouseDown","mouseOver","mouseOut","setTarget","removeTarget","moving","index","deltaMouseX","deltaMouseY","Screen","reset","movieClip","removeChild","getObjects","pixiObject","setObjects","thickness","transform_","updateBatchToCurrentState","resetFunc","Blockly","appendValueInput","setCheck","appendField","appendDummyInput","setPreviousStatement","setNextStatement","setColour","setTooltip","setHelpUrl","setOutput","appendStatementInput","setInputsInline","block","statements_blocks","statementToCode","value_object","valueToCode","ORDER_ATOMIC","value_x","value_y","value_friction","value_mass","checkbox_isstatic","getFieldValue","checkbox_norotation","value_a","value_b","ORDER_NONE","dropdown_eventtype","value_keycode","dropdown_statetype","value_objectname","dropdown_type","value_name","workspace","Resizer","updateStateResizing","handleMouseDown","bind","React","Component","Modal","isDragging","top","left","isOpen","isMinimised","onRequestRecover","onFocus","CSSTransition","in","timeout","classNames","unmountOnExit","node","draggable","children","FlexibleModal","isResizing","initHeight","innerHeight","initWidth","innerWidth","rel","funcResizing","resize","onMouseMove","pressKey","updateStateDragging","disableKeystroke","document","removeEventListener","button","pos","ReactDOM","findDOMNode","node_modal","setState","pageX","offsetLeft","pageY","offsetTop","stopPropagation","preventDefault","resizing","disableMove","disableVerticalMove","disableHorizontalMove","clientX","clientY","mWidth","minWidth","mHeight","minHeight","disableVerticalResize","disableHorizontalResize","onRequestClose","disableResize","ctrlKey","prevState","onRequestMinimise","transitionName","dragArea","Resize","useStyles","makeStyles","theme","createStyles","root","margin","spacing","input","display","menuButton","marginRight","editProjectNameButton","title","shareButton","marginLeft","runButton","transformOrigin","Button","link","fontSize","selectedIndex","updateScreen","currentClip","workspaceInit","App","useState","setGameFile","setObjectName","isMovieclip","setIsMovieclip","selectedObject","setSelectedObject","xel","yel","classes","addGraphic","changeCurrentClip","renderBreadcrumbs","menuAnchorEl","setMenuAnchorEl","handleMenuClose","newPName","setNewPName","projectName","setProjectName","openProjectNameDialog","setOpenProjectNameDialog","projectNameCloseDialog","newMcName","setNewMcName","openMcNameDialog","setOpenMcNameDialog","mcNameCloseDialog","newPos","gameRuning","setGameRunning","closeGameDialog","gameStart","exportJson","workspaceToCode","exportGameFile","objectJson","resizeBlocky","setXYPos","textContent","breadObjects","setBreadObjects","getParent","reverse","styles","onChange","file","files","reader","FileReader","onload","contents","result","project","toString","clear","xml","textToDom","domToWorkspace","readAsText","accept","anchorEl","keepMounted","open","onClose","MenuItem","workspaceToDom","xml_text","domToText","fileDownload","htmlFor","AppBar","Toolbar","IconButton","event","currentTarget","edge","aria-label","Typography","variant","text","replace","fetch","method","headers","startIcon","Dialog","maxWidth","disableEscapeKeyDown","disableBackdropClick","aria-labelledby","DialogTitle","DialogContent","DialogActions","DialogContentText","TextField","autoFocus","label","defaultValue","fullWidth","value","screenContainer","nselectedObject","Properties","tfContainer","test1","test2","Breadcrumbs","indexOf","Link","test3","test4","uuid","d","c","r","random","floor","generateUUID","readAsDataURL","test5","disableElevation","component","test6","test8","disabled","test9","test7","BlocklyEditor","initialXml","toolboxCategories","parseWorkspaceXml","wrapperDivClassName","workspaceDidChange","w","withRouter","params","gameLoad","setGameLoad","GamePlayer","Root","exact","path","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.a064fb97.chunk.js","sourcesContent":["import * as PIXI from \"pixi.js\";\r\nimport * as Matter from 'matter-js'\r\n\r\nimport MovieClip from \"./MovieClip\";\r\nimport Transform from \"./Transform\";\r\nimport Graphic from \"./Graphic\";\r\n\r\nexport default class Game {\r\n    public mainClip: MovieClip = new MovieClip(\"root\");\r\n\r\n    public app: PIXI.Application;\r\n    private isPlaying: boolean = false;\r\n\r\n    private framesPerSecond = 60;\r\n    private secondPerFrame = 1 / this.framesPerSecond;\r\n    private lastTime = (new Date()).getTime();\r\n    private timeLeft = this.secondPerFrame * 1000;\r\n    public deltaTime = 0;\r\n    public ticks:(()=>void)[] = []; \r\n\r\n    private objects: { [id: string]: (MovieClip | Graphic); } = {};\r\n\r\n    private engine = Matter.Engine.create();\r\n    private bodys: { gameObject: (MovieClip | Graphic), body: Matter.Body }[] = [];\r\n    public startCallback: (()=>void)[] = [];\r\n\r\n    private isDestroying = false;\r\n    private target:HTMLElement;\r\n\r\n    constructor(width: number, height: number, target: HTMLElement, backgroundColor = 0xFFFFFF, fps = 60) {\r\n        this.app = new PIXI.Application({\r\n            width: width,\r\n            height: height,\r\n            backgroundColor: backgroundColor\r\n        });\r\n        this.target = target;\r\n        this.setFps(fps);\r\n        target.appendChild(this.app.view);\r\n        this.engine.world.gravity.y = 1;\r\n    }\r\n\r\n    public setFps(fps: number) {\r\n        this.framesPerSecond = fps;\r\n        this.secondPerFrame = 1 / fps;\r\n    }\r\n\r\n    public start() {\r\n        PIXI.Loader.shared.on(\"complete\",()=>{alert(\"완료\")});\r\n        this.initEvents();\r\n        this.isPlaying = true;\r\n        this.mainClip.update(this.app, Transform.init, true);\r\n        this.startCallback.map(func => { func() });\r\n        this.ticks.map((tick)=>{\r\n            this.app.ticker.add(tick);\r\n        });\r\n        requestAnimationFrame(() => { this.animate(this) });\r\n\r\n        // var render = Matter.Render.create({\r\n        //     element: this.target,\r\n        //     engine: this.engine,\r\n        //     options: {\r\n        //         width: 800,\r\n        //         height: 500,\r\n        //         background: '#fafafa',\r\n        //         wireframeBackground: '#222',\r\n        //         hasBounds: false,\r\n\r\n        //     }\r\n        // });\r\n    \r\n        // Matter.Render.run(render);\r\n    }\r\n\r\n    private animate(game: Game) {\r\n        if(this.isDestroying){\r\n            this.app.destroy(true);\r\n            return;\r\n        }\r\n        this.deltaTime = Math.min((new Date()).getTime() - this.lastTime,this.secondPerFrame * 1000);\r\n        this.updatePhysics(this.deltaTime);\r\n        this.timeLeft -= this.deltaTime;\r\n        if (this.timeLeft < 0 && this.isPlaying) {\r\n            this.mainClip.update(this.app);\r\n            this.timeLeft = this.secondPerFrame * 1000;\r\n        }\r\n        else {\r\n            this.mainClip.render(this.app);\r\n        }\r\n        this.lastTime = (new Date()).getTime()\r\n        requestAnimationFrame(() => { this.animate(game) });\r\n    }\r\n\r\n    public destroy()\r\n    {\r\n        this.isDestroying = true;\r\n    }\r\n\r\n    public stop() {\r\n        this.isPlaying = false;\r\n    }\r\n\r\n    public play() {\r\n        this.isPlaying = true;\r\n    }\r\n\r\n    public addObject(name: string, object: MovieClip|Graphic) {\r\n        this.objects[name] = object;\r\n        object.name = \"e\";\r\n    }\r\n\r\n    public getObject(name: string) {\r\n        return this.objects[name];\r\n    }\r\n\r\n    public addPhysics(object: Graphic | MovieClip, isStatic: boolean, friction: number, mass: number, noRotation:boolean) {\r\n        let bound: PIXI.Rectangle;\r\n        if (object instanceof MovieClip) {\r\n            bound = object.getBound();\r\n        }\r\n        else {\r\n            bound = object.sprite.getBounds();\r\n        }\r\n        const transform = object.getTransform();\r\n        const body = Matter.Bodies.rectangle(transform.x+bound.width/2, transform.y+bound.height/2, bound.width, bound.height);\r\n        body.angle = transform.rotation;\r\n        body.friction = friction;\r\n        body.mass = mass;\r\n        body.isStatic = isStatic;\r\n        Matter.World.add(this.engine.world, body);\r\n        if(noRotation)\r\n            Matter.Body.setInertia(body,9999999999);\r\n        object.body = body;\r\n        this.bodys.push({ body: body, gameObject: object });\r\n\r\n    }\r\n\r\n    private updatePhysics(deltaTime: number) {\r\n        this.bodys.map((el) => {\r\n            el.gameObject.setTransform(new Transform(el.body.vertices[0].x, el.body.vertices[0].y, 1, 1, el.body.angle));\r\n        });\r\n        Matter.Engine.update(this.engine, deltaTime, 1);\r\n    }\r\n\r\n    public addMouseEvent(object:PIXI.Sprite,type:string,callback:()=>void){  \r\n        object.interactive = true; \r\n        object.hitArea = new PIXI.Rectangle(0, 0, object.width / this.app.renderer.resolution,\r\n            object.height / this.app.renderer.resolution);\r\n        object.interactiveChildren = true;\r\n        object.addListener(type,callback);\r\n    }\r\n\r\n    public addTick(tickEvent:()=>void)\r\n    {\r\n        this.ticks.push(tickEvent);\r\n    }\r\n\r\n    //mouse,keyboard events\r\n    private keys: boolean[] = [];\r\n    private keysDownOnce: number[] = [];\r\n    private keysUpOnce: number[] = [];\r\n    private mouseDown: boolean = false;\r\n\r\n    private mouseOnceDown: number = 0;\r\n    private mouseOnceUp: number = 0;\r\n    private mouseOnceClick: number = 0;\r\n\r\n\r\n\r\n    public isKeyDown(keyCode: number) {\r\n        return this.keys[keyCode];\r\n    }\r\n\r\n    public isKeyPress(keyCode: number) {\r\n        return this.keysDownOnce[keyCode] == 1;\r\n    }\r\n\r\n    public isKeyRelease(keyCode: number) {\r\n        return this.keysUpOnce[keyCode] == 1;\r\n    }\r\n\r\n    public isMouseDown() {\r\n        return this.mouseDown;\r\n    }\r\n    public isMouseOnceDown() {\r\n        return this.mouseOnceDown == 1;\r\n    }\r\n\r\n    public isMouseOnceUp() {\r\n        return this.mouseOnceUp == 1;\r\n    }\r\n\r\n    public isMouseOnceClick() {\r\n        return this.mouseOnceClick == 1;\r\n    }\r\n\r\n\r\n    private initEvents() {\r\n        this.app.view.addEventListener(\"mousedown\", () => {this.onMouseDown()});\r\n        this.app.view.addEventListener(\"mouseup\", () => {this.onMouseUp()})\r\n        this.app.view.addEventListener(\"click\", () => {this.onClick()});;\r\n        window.addEventListener(\"keydown\", (e) => { this.keyDown(e) });\r\n        window.addEventListener(\"keyup\", (e) => { this.keyUp(e) });\r\n\r\n        this.keys[4] = true;\r\n        this.app.ticker.add(() => { this.eventTick() })\r\n    }\r\n\r\n    private eventTick() {\r\n        this.keysDownOnce.map((key, i) => {\r\n            if (key != 0) {\r\n                this.keysDownOnce[i]--;\r\n            }\r\n            else {\r\n                this.keysDownOnce = this.keysDownOnce.slice(i, i);\r\n            }\r\n        });\r\n        this.keysUpOnce.map((key, i) => {\r\n            if (key != 0) {\r\n                this.keysUpOnce[i]--;\r\n            }\r\n            else {\r\n                this.keysUpOnce = this.keysUpOnce.slice(i, i);\r\n            }\r\n        });\r\n\r\n        if (this.mouseOnceDown != 0) {\r\n            this.mouseOnceDown--;\r\n        }\r\n        if (this.mouseOnceUp != 0) {\r\n            this.mouseOnceUp--;\r\n        }\r\n        if (this.mouseOnceClick != 0) {\r\n            this.mouseOnceClick--;\r\n        }\r\n\r\n    }\r\n\r\n    private onMouseDown() {\r\n        this.mouseDown = true;\r\n        this.mouseOnceDown = 2;\r\n    }\r\n\r\n    private onMouseUp() {\r\n        this.mouseDown = false;\r\n        this.mouseOnceUp = 2;\r\n    }\r\n\r\n    private onClick() {\r\n        this.mouseOnceClick = 2;\r\n    }\r\n\r\n    private keyDown(e: KeyboardEvent) {\r\n        this.keysDownOnce[e.keyCode] = (!e.repeat ? 2 : -1);\r\n        this.keys[e.keyCode] = true;\r\n    }\r\n    private keyUp(e: KeyboardEvent) {\r\n        this.keysUpOnce[e.keyCode] = (!e.repeat ? 2 : -1);\r\n        this.keys[e.keyCode] = false;\r\n    }\r\n}","import Game from \"../Game\";\r\nimport MovieClip from \"../MovieClip\";\r\nimport Graphic from \"../Graphic\";\r\nimport Matter from \"matter-js\";\r\n\r\n\r\nlet BlockFunctions: { [id: string]: (Function); } = {};\r\n\r\nBlockFunctions[\"addForce\"] = (game: Game, object: (MovieClip | Graphic), x: number, y: number) => {\r\n    if (object.body) {\r\n        //Matter.Body.setVelocity(object.body, { x: object.body.velocity.x + x, y: object.body.velocity.y + y })\r\n        Matter.Body.applyForce(object.body,object.body.position,{x:x,y:y});\r\n    }\r\n}\r\n\r\nBlockFunctions[\"addPhysics\"] = (game: Game, object: (MovieClip | Graphic), friction: number, mass: number, isStatic: boolean, noRotation:boolean ) => {\r\n    game.addPhysics(object, isStatic, friction, mass, noRotation);\r\n}\r\n\r\nBlockFunctions[\"checkCollision\"] = (game: Game, a: (MovieClip | Graphic), b: (MovieClip | Graphic)) => {\r\n    if(a.body&&b.body){\r\n        return Matter.Query.collides(a.body,[b.body]).length != 0;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"gameStart\"] = (game: Game, blocks: () => {}) => {\r\n    game.startCallback.push(blocks);\r\n}\r\n\r\nBlockFunctions[\"gameTick\"] = (game: Game, blocks: () => {}) => {\r\n    game.addTick(blocks);\r\n}\r\n\r\nBlockFunctions[\"getKeyboardEvent\"] = (game: Game, eventType: string, keyCode: number) => {\r\n    switch(eventType)\r\n    {\r\n        case \"isDown\":\r\n            return game.isKeyPress(keyCode);\r\n        case \"isUp\":\r\n            return game.isKeyRelease(keyCode);\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getKeyboardState\"] = (game: Game, stateType: string, keyCode: number) => {\r\n    const keyDown =  game.isKeyDown(keyCode);\r\n    switch(stateType)\r\n    {\r\n        case \"isDown\":\r\n            return keyDown;\r\n        case \"isUp\":\r\n            return !keyDown;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getMouseEvent\"] = (game: Game, eventType: string) => {\r\n    switch(eventType)\r\n    {\r\n        case \"isDown\":\r\n            return game.isMouseOnceDown();\r\n        case \"isUp\":\r\n            return game.isMouseOnceUp();\r\n        case \"isClick\":\r\n            return game.isMouseOnceClick();\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getMouseState\"] = (game: Game, stateType: string) => {\r\n    const keyDown =  game.isMouseDown();\r\n    switch(stateType)\r\n    {\r\n        case \"isDown\":\r\n            return keyDown;\r\n        case \"isUp\":\r\n            return !keyDown;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getObject\"] = (game: Game, objectName: string) => {\r\n    return game.getObject(objectName);\r\n}\r\n\r\nBlockFunctions[\"getPos\"] = (game: Game, type: string, object: (MovieClip | Graphic)) => {\r\n    switch(type)\r\n    {\r\n        case \"x\":\r\n            return object.getTransform().x;\r\n        case \"y\":\r\n            return object.getTransform().y;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getVelocity\"] = (game: Game, type: string, object: (MovieClip | Graphic)) => {\r\n    if(!object.body)\r\n        return;\r\n\r\n    switch(type)\r\n    {\r\n        case \"x\":\r\n            return object.body.velocity.x;\r\n        case \"y\":\r\n            return object.body.velocity.y;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"mouseEvent\"] = (game: Game, object: (MovieClip | Graphic), type: string, blocks: (()=>void)) => {\r\n    if(object instanceof MovieClip)\r\n    {\r\n        console.log(\"무비클립은 마우스 이벤트를 지원하지 않습니다.\");\r\n        return;\r\n    }\r\n    game.addMouseEvent(object.sprite,type,blocks);\r\n}\r\n\r\nBlockFunctions[\"setPos\"] = (game: Game, object: (MovieClip | Graphic), x: number, y: number) => {\r\n    if(object.body){\r\n        Matter.Body.setPosition(object.body,{x:x,y:y});\r\n    }\r\n    const transform = object.getTransform();\r\n    transform.x = x;\r\n    transform.y = y;\r\n    object.setTransform(transform);\r\n}\r\n\r\nBlockFunctions[\"setVelocity\"] = (game: Game, object: (MovieClip | Graphic), x: number, y: number) => {\r\n    if(object.body){\r\n        Matter.Body.setVelocity(object.body,{x:x,y:y});\r\n    }\r\n}\r\n\r\nBlockFunctions[\"setRotation\"] = (game: Game, object: (MovieClip | Graphic), angle:number) => {\r\n    if(object.body){\r\n        console.log(angle);\r\n        Matter.Body.setAngle(object.body, angle*Math.PI/180);\r\n    }\r\n    const transform = object.getTransform();\r\n    transform.rotation = angle;\r\n    object.setTransform(transform);\r\n}\r\n\r\nexport default BlockFunctions;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 230;","export default class Transform {\r\n    static init = new Transform(0, 0);\r\n\r\n    x: number;\r\n    y: number;\r\n    scaleX: number;\r\n    scaleY: number;\r\n    rotation: number;\r\n\r\n    constructor(x:number, y:number, scaleX = 1, scaleY = 1, rotation = 0) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.scaleX = scaleX;\r\n        this.scaleY = scaleY;\r\n        this.rotation = rotation;\r\n    }\r\n\r\n\r\n    public calcChildTransform(transform: Transform) {\r\n        const parent = this;\r\n        const child = transform;\r\n        const rotatedPos = this.rotatePos(child.x, child.y, parent.rotation);\r\n        return new Transform(\r\n            rotatedPos.x * parent.scaleX + parent.x,\r\n            rotatedPos.y * parent.scaleY + parent.y,\r\n            child.scaleX * parent.scaleX,\r\n            child.scaleY * parent.scaleY,\r\n            child.rotation + parent.rotation);\r\n    }\r\n\r\n    private rotatePos(x:number, y:number, seta:number) {\r\n        return {\r\n            x: x * Math.cos(seta) - y * Math.sin(seta),\r\n            y: y * Math.cos(seta) + x * Math.sin(seta)\r\n        };\r\n    }\r\n\r\n    public clone()\r\n    {\r\n        return new Transform(this.x,this.y,this.scaleX,this.scaleY,this.rotation);\r\n    }\r\n\r\n    static fromObject(transform:any){\r\n        return new Transform(transform.x,transform.y,transform.scaleX,transform.scaleY,transform.roatation);\r\n    }\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2NoZF\",\"AppBar\":\"App_AppBar__2Kg9l\",\"Blockly\":\"App_Blockly__3ite3\",\"screenContainer\":\"App_screenContainer__c3hxx\",\"Screen\":\"App_Screen__392HF\",\"Properties\":\"App_Properties__3WWL_\",\"tfContainer\":\"App_tfContainer__3MgPT\",\"test2\":\"App_test2__2Jmwd\",\"test1\":\"App_test1__3G2tV\",\"test3\":\"App_test3__1ssgM\",\"test4\":\"App_test4__10zIh\",\"test5\":\"App_test5__23SaN\",\"test6\":\"App_test6__3Kq8b\",\"test7\":\"App_test7__2T8nz\",\"test8\":\"App_test8__2o9tD\",\"test9\":\"App_test9__3JGwf\"};","import Script from \"./Script\";\r\nimport Transform from \"./Transform\";\r\nimport MovieClip from \"./MovieClip\";\r\nimport Graphic from \"./Graphic\";\r\n\r\nimport * as PIXI from \"pixi.js\";\r\n\r\ninterface Batch{\r\n    object: (MovieClip|Graphic);\r\n    transform: Transform;\r\n}\r\n\r\n\r\nexport default class Frame {\r\n    public script: Script | null = null;\r\n    private objects: (MovieClip | Graphic)[] = []\r\n    private batches: Batch[] = [];\r\n\r\n\r\n    public update(app: PIXI.Application, transform: Transform = Transform.init, entry: boolean = false) {\r\n        this.objects.forEach(object => {\r\n            object.update(app, transform);\r\n        });\r\n\r\n        if (entry) {\r\n            this.rebatchAll();\r\n        }\r\n    }\r\n\r\n    public updateBatchToCurrentState()\r\n    {\r\n        this.batches.map((batch)=>{\r\n            batch.transform = batch.object.getTransform();\r\n        })\r\n    }\r\n\r\n    public rebatchAll()\r\n    {\r\n        this.batches.forEach(batch => {\r\n            batch.object.setTransform(batch.transform);\r\n        });\r\n    }\r\n\r\n    public addObject(object: MovieClip | Graphic,transform :Transform) {\r\n        this.objects.push(object);\r\n        const batch:Batch = {object,transform} as Batch; \r\n        this.batches.push(batch);\r\n    }\r\n\r\n    public removeObject(object:MovieClip|Graphic)\r\n    {\r\n        this.objects.map((el,i)=>{\r\n            if(el==object){\r\n                this.objects.splice(i,1);\r\n                this.batches.splice(i,1);\r\n            }\r\n        })\r\n    }\r\n\r\n    public getObjects()\r\n    {\r\n        return this.objects;\r\n    }\r\n\r\n    public getBatches()\r\n    {\r\n        return this.batches;\r\n    }\r\n\r\n    public render(app: PIXI.Application)\r\n    {\r\n        this.objects.forEach(object => {\r\n            object.render(app);\r\n        });\r\n    }\r\n\r\n    public makeContainer()\r\n    {\r\n        this.rebatchAll();\r\n        const container = new PIXI.Container();\r\n\r\n        this.objects.map((object)=>{\r\n            if(object instanceof MovieClip){\r\n                container.addChild(object.makeContainer(1));\r\n            }\r\n            else{\r\n                container.addChild(object.sprite);\r\n            }\r\n            \r\n        });\r\n        return container;\r\n    }\r\n\r\n\r\n    public exportStruct()\r\n    {\r\n        let newBatchs:any = [];\r\n        this.batches.map(batch=>{\r\n            if(batch.object instanceof MovieClip){\r\n                const tempBatch  = batch.object.exportStruct(batch.transform);\r\n                newBatchs.push(tempBatch);\r\n            }\r\n            else{\r\n                newBatchs.push({type:\"Graphic\",name:batch.object.name,transform:batch.transform,maker:batch.object.exportMaker()});\r\n            }\r\n        })\r\n        return newBatchs;\r\n    }\r\n}","import * as PIXI from \"pixi.js\";\r\n\r\nimport Frame from \"./Frame\";\r\nimport Transform from \"./Transform\";\r\nimport Graphic from \"./Graphic\";\r\nimport Game from \"./Game\";\r\nimport ResourceManager from \"./ResourceManager\";\r\n\r\n\r\n\r\nexport default class MovieClip {\r\n  //객체 정보\r\n  public name:string;\r\n  private transform: Transform;\r\n  private childs: (MovieClip|Graphic)[] = []\r\n  private parent?: MovieClip;\r\n  //프레임\r\n  private frames: Frame[] = []; //프레임은 1부터 시작\r\n  public currentFrame: number = 1;\r\n  public isPlaying: boolean = true;\r\n\r\n  public body:Matter.Body|null = null; \r\n\r\n  constructor(name:string,transform = Transform.init) {\r\n    this.name = name;\r\n    this.transform = transform;\r\n    this.addFrame();\r\n  }\r\n\r\n  public setTransform(transform:Transform)\r\n  {\r\n      this.transform = transform;\r\n  }\r\n\r\n  public getTransform()\r\n  {\r\n    return this.transform.clone();\r\n  }\r\n\r\n\r\n  public play() {\r\n    this.isPlaying = true;\r\n  }\r\n\r\n  public stop() {\r\n    this.isPlaying = false;\r\n  }\r\n\r\n  public gotoAndStop(frame: number) {\r\n    this.currentFrame = frame;\r\n    this.stop();\r\n  }\r\n\r\n  public gotoAndPlay(frame: number) {\r\n    this.currentFrame = frame;\r\n    this.play();\r\n  }\r\n\r\n  public getFrameCount() {\r\n    return this.frames.length;\r\n  }\r\n\r\n  public addFrame() {\r\n    this.frames.push(new Frame());\r\n    return this.getFrameCount();\r\n  }\r\n\r\n  public extendFramesTo(frame: number) {\r\n    const targetCount = frame - this.getFrameCount();\r\n    for (let i = 0; i < targetCount; i++) {\r\n      this.addFrame();\r\n    }\r\n  }\r\n\r\n  public getFrame(frame: number) {\r\n    return this.frames[frame-1];\r\n  }\r\n\r\n  public getCurrentFrame() {\r\n    return this.getFrame(this.currentFrame);\r\n  }\r\n\r\n  public addObject(Object: MovieClip | Graphic, frames: number[], transforms: Transform[]) {\r\n    frames.forEach((frame,i) => {\r\n      this.extendFramesTo(frame);\r\n      this.getFrame(frame).addObject(Object,transforms[i]);\r\n      this.childs.push(Object);\r\n      Object.setParent(this);\r\n    });\r\n  }\r\n\r\n  public removeObject(object: MovieClip|Graphic,frameNum:number)\r\n  {\r\n    const frame = this.getFrame(frameNum);\r\n    frame.removeObject(object);\r\n    this.childs.map((el,i)=>{\r\n      if(el==object){\r\n          this.childs.splice(i,1);\r\n      }\r\n  })\r\n  }\r\n\r\n  public getChild(num:number)\r\n  {\r\n    return this.childs[num];\r\n  }\r\n\r\n  public getParent()\r\n  {\r\n      return this.parent;\r\n  }\r\n  \r\n  public setParent(parent:MovieClip)\r\n  {\r\n      this.parent = parent;\r\n  }\r\n\r\n  public update(app: PIXI.Application, transform: Transform = Transform.init,init:boolean = false) {\r\n    //프레임 재생 처리\r\n    if(this.getFrameCount()<=1)\r\n    {\r\n      this.isPlaying = false;\r\n    }\r\n\r\n    if(this.isPlaying)\r\n    {\r\n      if(this.currentFrame == this.getFrameCount())\r\n      {\r\n        this.currentFrame=1;\r\n      }\r\n      else{\r\n        this.currentFrame+=1;\r\n      }\r\n    }\r\n    //그리기 처리\r\n    this.getCurrentFrame().update(app, transform.calcChildTransform(this.transform),this.isPlaying||init);\r\n  }\r\n\r\n  public render(app: PIXI.Application)\r\n  {\r\n    this.getCurrentFrame().render(app);\r\n  }\r\n\r\n  public makeContainer(frame:number)\r\n  {\r\n    const container = this.getFrame(frame).makeContainer();\r\n    container.setTransform(this.transform.x,this.transform.y,this.transform.scaleX,this.transform.scaleY,this.transform.rotation);\r\n    return container;\r\n  }\r\n\r\n  public getBound()\r\n  {\r\n    const container = this.makeContainer(1);\r\n    container.angle = 0;\r\n    const bound = this.makeContainer(1).getBounds();\r\n    container.destroy();\r\n    return bound;\r\n  }\r\n\r\n  public exportStruct(transform:Transform)\r\n  {\r\n    let frames:any = [];\r\n    this.frames.map((frame)=>{\r\n      frames.push(frame.exportStruct());\r\n    }) \r\n    let struct = {type:\"MovieClip\",name:this.name,\r\n                 transform:transform,\r\n                 frames:frames,\r\n                 maker:this.exportMaker()}\r\n    return struct;\r\n  }\r\n\r\n  public exportMaker()\r\n  {\r\n    //makers = [];\r\n    //makers.push({type:\"MovieClip\",name:this.name,transform:this.transform});\r\n    // this.childs.map((child)=>{\r\n    //   makers.push(child.exportMaker())\r\n    // })\r\n    return {type:\"MovieClip\",name:this.name,transform:this.transform};\r\n  }\r\n\r\n  public exportJson()\r\n  {\r\n    return JSON.stringify(this.exportStruct(new Transform(0,0)));\r\n  }\r\n\r\n  static importJson(json:string,rm:ResourceManager,game:Game|undefined = undefined)\r\n  {\r\n    const struct  = JSON.parse(json);\r\n    const clip = this.make(struct.maker,rm,game);\r\n    clip.importStruct(struct,rm,game);\r\n    return clip;\r\n  }\r\n\r\n  public importStruct(struct:any,rm:ResourceManager,game:Game|undefined = undefined)\r\n  {\r\n    struct.frames.map((batches:any,i:number)=>{\r\n      batches.map((batch:any)=>{\r\n        const object = MovieClip.make(batch.maker,rm,game);\r\n        this.addObject(object,[i+1],[Transform.fromObject(batch.transform)]);\r\n        if(object instanceof MovieClip)\r\n        {\r\n          object.importStruct(batch,rm,game);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  static make(maker:any,resourceManager:ResourceManager,game:Game|undefined = undefined)\r\n  {\r\n    let object:any;\r\n    const transform = Transform.fromObject(maker.transform);\r\n    if(maker.type == \"MovieClip\"){\r\n      object = new MovieClip(maker.name,transform);\r\n    }\r\n    else { //Graphic\r\n      object = new Graphic(maker.name,transform,resourceManager,maker.texture,maker.width,maker.height);\r\n    }\r\n    if(game){\r\n      game.addObject(maker.name, object);\r\n    }\r\n    return object;\r\n  }\r\n}","import * as PIXI from \"pixi.js\";\r\nimport imageToBase64 from \"image-to-base64\"\r\n\r\n\r\n\r\nexport default class ResourceManager {\r\n    private loader = new PIXI.Loader();\r\n    private loading: number = 0;\r\n\r\n    private queue: { name: string, data: string }[] = [];\r\n    private struct:{name:string,data:string}[] = [];\r\n\r\n    private callBack = ()=>{};\r\n    constructor() {\r\n        this.loader.on(\"complete\", ()=>{this.callBack();this.callBack = ()=>{}});\r\n    }\r\n\r\n    public add(name: string, data: string) {\r\n        this.queue.push({ name: name, data: data });\r\n        return this;\r\n    }\r\n\r\n    public load(callback:()=>void) {\r\n        this.callBack = callback;\r\n        this.loading = this.queue.length;\r\n\r\n        for (let i = 0; i < this.queue.length; i++) {\r\n            const el = this.queue[i];\r\n\r\n            imageToBase64(el.data).then(\r\n                (response: string) => {\r\n                    this.addDirectBase64(el.name,\"data:image/png;base64,\"+response);\r\n                    this.onConvert();\r\n                }\r\n            ).catch(\r\n                (error: string) => {\r\n                    this.onConvert();\r\n                }\r\n            )\r\n        }\r\n        this.queue = [];\r\n        return this;\r\n    }\r\n\r\n    private onConvert() {\r\n        this.loading--;\r\n        if (this.loading == 0) {\r\n            this.loader.load();\r\n        }\r\n    }\r\n\r\n    public getTexture(name: string) {\r\n        return this.loader.resources[name].texture;\r\n    }\r\n\r\n    public exportJson()\r\n    {\r\n        return JSON.stringify(this.struct);\r\n    }\r\n\r\n    public importJson(json:string,callBack:()=>void)\r\n    {\r\n        \r\n        this.struct = JSON.parse(json);\r\n        this.struct.map(el=>{\r\n            this.loader.add(el.name, el.data);\r\n        })\r\n        this.loaderLoad(callBack);\r\n    }\r\n\r\n    public loaderLoad(callBack:()=>void)\r\n    {\r\n        this.callBack = callBack;\r\n        this.loader.load();\r\n    }\r\n\r\n    public addDirectBase64(name:string,data:string)\r\n    {\r\n        const base64 = data;\r\n        this.loader.add(name,base64);\r\n        this.struct.push({name:name,data:base64});\r\n        return this;\r\n    }\r\n}\r\n\r\n\r\n","import * as PIXI from \"pixi.js\";\r\nimport Transform from \"./Transform\";\r\nimport MovieClip from \"./MovieClip\";\r\nimport ResourceManager from \"./ResourceManager\";\r\n\r\nexport default class Graphic {\r\n\r\n    public name:string;\r\n    public sprite:PIXI.Sprite;\r\n\r\n    private transform:Transform;\r\n    public width?:number;\r\n    public height?:number;\r\n\r\n    private parent?:MovieClip;\r\n    public texId:string;\r\n    \r\n    public body:Matter.Body|null = null; \r\n\r\n    public getParent()\r\n    {\r\n        return this.parent;\r\n    }\r\n    \r\n    public setParent(parent:MovieClip)\r\n    {\r\n        this.parent = parent;\r\n    }\r\n\r\n    public setTransform(transform:Transform)\r\n    {\r\n        this.transform = transform;\r\n        this.sprite.setTransform(transform.x,transform.y,transform.scaleX,transform.scaleY,transform.rotation);\r\n    }\r\n\r\n    public getTransform()\r\n    {\r\n        return this.transform.clone();\r\n    }\r\n\r\n    constructor(name:string,transform:Transform,resourceManager:ResourceManager,texId:string,width?:number,height?:number){\r\n        this.name = name;\r\n        this.texId = texId;\r\n        this.transform = transform;\r\n        this.sprite = PIXI.Sprite.from(resourceManager.getTexture(texId));\r\n\r\n        if(width)\r\n            this.width = width;\r\n        if(height)\r\n            this.height = height;\r\n        \r\n        this.width = this.sprite.width;\r\n        this.height = this.sprite.height;\r\n    }\r\n\r\n    public update(app: PIXI.Application, transform: Transform = Transform.init) {\r\n        const newTransform = transform.calcChildTransform(this.transform);\r\n        this.sprite.transform.position.set(newTransform.x,newTransform.y);\r\n        this.sprite.transform.rotation = newTransform.rotation;\r\n        this.sprite.scale.set(newTransform.scaleX,newTransform.scaleY);\r\n        if(this.width)\r\n            this.sprite.width = this.width;\r\n        if(this.height)\r\n            this.sprite.height = this.height;\r\n\r\n        app.renderer.render(this.sprite,undefined,false);\r\n    }\r\n\r\n    public render(app: PIXI.Application)\r\n    {\r\n        app.renderer.render(this.sprite,undefined,false);\r\n    }\r\n\r\n    public exportMaker()\r\n    {\r\n      return {type:\"Graphic\",name:this.name,transform:this.transform,texture:this.texId,width:this.width,height:this.height};\r\n    }\r\n}","import React, { useRef, useEffect } from 'react'\r\nimport Game from '../GameEngine/Game';\r\nimport ResourceManager from '../GameEngine/ResourceManager';\r\nimport BlockFunctions from '../GameEngine/blockFuncs/BlockFunctions';\r\nimport MovieClip from '../GameEngine/MovieClip';\r\nimport { Sprite } from 'pixi.js';\r\n\r\n\r\ninterface Props{\r\n    width:number,\r\n    height:number,\r\n    gameJson:string,\r\n    className?:string,\r\n}\r\n\r\n\r\nconst GameScreen:React.FC<Props> = (props)=>{\r\n\r\n    let game = useRef<Game>();\r\n    let stageDiv = useRef<HTMLElement | null>(null);\r\n    \r\n    const init = ()=>{\r\n        if(!stageDiv.current) {\r\n            return;\r\n        }\r\n        if(props.gameJson==\"\"){\r\n            return;\r\n        }\r\n        game.current = new Game(props.width,props.height,stageDiv.current);\r\n        \r\n        try{\r\n            const gameFile = JSON.parse(props.gameJson);\r\n            const rm = new ResourceManager();\r\n            rm.importJson(gameFile.resource, () => {\r\n                if (game.current == undefined) {\r\n                    return;\r\n                }\r\n                game.current.mainClip = MovieClip.importJson(gameFile.objects, rm, game.current);\r\n                eval(`(function(game,blockFunctions){${gameFile.code}})`)(game.current, BlockFunctions);\r\n                game.current.start();\r\n            });\r\n        }\r\n        catch(e){\r\n            alert(\"에러 발생\")\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        //초기화\r\n        init();\r\n        return () => {\r\n            game.current?.destroy();\r\n        }\r\n    },[]);\r\n    return (\r\n        <div className = {props.className} style = {{border:\"#F3F3F3 solid 3px\"}} ref={ref => { stageDiv.current = ref }} />\r\n    );\r\n}\r\n\r\n\r\nexport default GameScreen;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"GamePlayer\":\"GamePlayer_GamePlayer__3oK38\",\"GameScreen\":\"GamePlayer_GameScreen__sUThz\"};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      (\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import * as PIXI from 'pixi.js';\r\nimport FrontUI from './FrontUI';\r\n\r\nexport default class TransformEditor {\r\n    private app: PIXI.Application;\r\n    private container = new PIXI.Container();\r\n\r\n    private frontUI:FrontUI;\r\n    private border = new PIXI.Graphics();\r\n    private points: PIXI.Graphics[] = [];\r\n    private style: { color: number, thickness: number, radius: number };\r\n\r\n    public transformChanged:((index:number,transform:PIXI.Transform)=>void) = ()=>{};\r\n    public selectedTargetChanged:((index:number|undefined)=>void) = ()=>{};\r\n    public selectedTargetMoving:(x:number,y:number)=>void = ()=>{};\r\n\r\n    constructor(app: PIXI.Application, style: { color: number, thickness: number, radius: number }) {\r\n        this.app = app;\r\n        this.style = style;\r\n\r\n        app.ticker.add(()=>{this.tick()});\r\n        this.init();\r\n        this.frontUI = new FrontUI(app);\r\n    }\r\n\r\n    private tick() {\r\n        if(this.targetIndex==undefined)\r\n            return;\r\n\r\n        const target = this.objects[this.targetIndex];\r\n        const bound = target.getBounds();\r\n        this.frontUI.drawRect(5,0x66CC00,1,bound.x-2.5,bound.y-2.5,bound.width+5,bound.height+5,0);\r\n        // alert(\"hello\");\r\n        // if(!this.app)\r\n        //     return;\r\n        // this.app.renderer.render(this.container, undefined, false);\r\n        // this.container.destroy();\r\n        // this.container = new PIXI.Container();\r\n    }\r\n\r\n    private init() {\r\n        for (let i = 0; i < 10; i++) {\r\n            const point = new PIXI.Graphics();\r\n            point.beginFill(this.style.color);\r\n            point.drawCircle(0, 0, this.style.radius);\r\n\r\n            point.addListener(\"mousedown\", () => { this.pointMouseDown(i) });\r\n            this.points.push(point);\r\n        }\r\n\r\n        this.app.stage.addListener(\"mouseup\", ()=>{this.mouseUp()});\r\n        this.app.stage.addListener(\"mousemove\", (e) => { this.mouseMove(e.data.global.x, e.data.global.y) });\r\n    }\r\n\r\n    //Points\r\n    //    8\r\n    //0   1   2\r\n    //3   9   4\r\n    //5   6   7\r\n    private state:State = State.none;\r\n\r\n    private objects: PIXI.DisplayObject[] = [];\r\n    private targetIndex:number|undefined;\r\n\r\n    public setObjects(objects:PIXI.DisplayObject[])\r\n    {\r\n        this.objects = objects;\r\n        for(let i = 0;i < objects.length;i++)\r\n        {\r\n            objects[i].removeAllListeners();\r\n            objects[i].addListener(\"mousedown\",()=>{this.targetMouseDown(i)});\r\n            objects[i].addListener(\"mouseover\",()=>{this.mouseOver(objects[i])});\r\n            objects[i].addListener(\"mouseout\",()=>{this.mouseOut(objects[i])});\r\n            objects[i].interactive = true;\r\n        }\r\n        this.state = State.none;\r\n        if(objects.length!=0)\r\n            this.setTarget(this.targetIndex = objects.length-1)\r\n        else this.removeTarget();\r\n    }\r\n\r\n    public setTarget(targetIndex:number) {\r\n        this.targetIndex = targetIndex;\r\n        this.selectedTargetChanged(this.targetIndex);\r\n    }\r\n\r\n    public removeTarget() {\r\n        this.targetIndex = undefined;\r\n        this.selectedTargetChanged(undefined);\r\n    }\r\n\r\n    public mouseOver(target:PIXI.DisplayObject)\r\n    {\r\n        if(this.state==State.moving)\r\n            return;\r\n        target.alpha = 0.7;\r\n    }\r\n\r\n    public mouseOut(target:PIXI.DisplayObject)\r\n    {\r\n        target.alpha = 1;\r\n    }\r\n\r\n    //events\r\n    private pointMouseDown(num: number) {\r\n        \r\n    }\r\n\r\n    private targetMouseDown(index:number) {\r\n        this.setTarget(index);\r\n        this.state = State.moving;\r\n    }\r\n\r\n    private mouseUp() {\r\n        if(this.targetIndex == undefined)\r\n            return;\r\n\r\n        if(this.state == State.moving)\r\n        {\r\n            const index = this.targetIndex;\r\n            this.transformChanged(index,this.objects[index].transform);\r\n            this.state = State.none;\r\n        }\r\n    }\r\n\r\n    private prevMouseX: number = 0;\r\n    private prevMouseY: number = 0;\r\n\r\n    private mouseMove(x: number, y: number) {\r\n        const deltaMouseX = x - this.prevMouseX;\r\n        const deltaMouseY = y - this.prevMouseY;\r\n        this.prevMouseX = x;\r\n        this.prevMouseY = y;\r\n\r\n        if(this.targetIndex == undefined)\r\n            return;\r\n        const target = this.objects[this.targetIndex];\r\n\r\n        if (this.state == State.moving) {\r\n            target.transform.position.x += deltaMouseX;\r\n            target.transform.position.y += deltaMouseY;\r\n            this.selectedTargetMoving(target.transform.position.x,target.transform.position.y);\r\n        }\r\n    }\r\n    //calcs\r\n}\r\n\r\n\r\nenum State{\r\n    none,\r\n    moving,\r\n}","import React, { useEffect, useRef } from 'react'\r\nimport * as PIXI from 'pixi.js';\r\nimport MovieClip from '../GameEngine/MovieClip';\r\nimport Graphic from '../GameEngine/Graphic';\r\nimport TransformEditor from './ScreenUtils/TransformEditor';\r\nimport Frame from '../GameEngine/Frame';\r\n\r\n\r\ninterface Props {\r\n    width: number,\r\n    height: number,\r\n    frame: number,\r\n    movieClip: MovieClip,\r\n    selectedTargetChanged:(index:number|undefined)=>void,\r\n    selectedTargetMoving:(x:number,y:number)=>void,\r\n    resetFunc:Function,\r\n    className:string,\r\n}\r\n\r\n/*\r\n★TODO\r\n0.  만들기 이전에 받는 객체는 모두 PIXIObject로 처리, 외부에서 EngineObject로 변환 -> \r\n    아이디가 잇으면 좋을수도?(아이디는 나중에 처리해도 안늦음) index로처리해도 될듯?정해져있으니까?\r\n    추가나 제거 경우에는 이벤트로 처리하거나? 프레임 전체를 초기화해야할듯\r\n1.  UI graphic 함수화\r\n2.  Transform Editor는 별도 객체로 처리 -> 이벤트 발생\r\n3.  선택 클릭\r\n4.  드래그 선택\r\n5.  state 잘 정해서 마우스 이벤트 별로 정리\r\n*/\r\n\r\n\r\n\r\nlet app:PIXI.Application;\r\nlet container:PIXI.Container;\r\nlet transformEditor:TransformEditor;\r\nlet frame:Frame;\r\nlet gameObjects:(MovieClip|Graphic)[];\r\nlet pixiObjects:PIXI.DisplayObject[];\r\n\r\n\r\nconst Screen: React.FC<Props> = (props) => {\r\n    \r\n    const stageDiv = useRef<HTMLElement | null>(null);\r\n    const init = ()=>{\r\n        app  = new PIXI.Application({ width: props.width, height: props.height,backgroundColor:0xFFFFFF });\r\n        if(stageDiv.current)\r\n            stageDiv.current.appendChild(app.view);\r\n        transformEditor  = new TransformEditor(app, { color: 0x00CC99, radius: 1, thickness: 5 });\r\n        app.stage.interactive = true;\r\n        app.stage.interactiveChildren = true;\r\n        app.stage.hitArea = new PIXI.Rectangle(0, 0, app.renderer.width / app.renderer.resolution,\r\n            app.renderer.height / app.renderer.resolution);\r\n\r\n        transformEditor.transformChanged = (index, transform) => {\r\n            const transform_ = gameObjects[index].getTransform();\r\n            transform_.x = transform.position.x;\r\n            transform_.y = transform.position.y;\r\n            gameObjects[index].setTransform(transform_);\r\n            frame.updateBatchToCurrentState();\r\n        };\r\n\r\n        transformEditor.selectedTargetChanged = props.selectedTargetChanged;\r\n\r\n        transformEditor.selectedTargetMoving = props.selectedTargetMoving;\r\n\r\n        props.resetFunc(reset);\r\n    }\r\n\r\n    const reset = (movieClip:MovieClip)=>{\r\n        if(container)\r\n            app.stage.removeChild(container);\r\n        \r\n        container = new PIXI.Container();\r\n        container.interactiveChildren = true;\r\n        container.interactive = true;\r\n        app.stage.addChild(container);\r\n        frame = movieClip.getFrame(props.frame);\r\n        frame.rebatchAll();\r\n        gameObjects = frame.getObjects();\r\n        \r\n        pixiObjects = [];\r\n        for(let i = 0; i < gameObjects.length;i++){\r\n            \r\n            const gameObject = gameObjects[i];\r\n            let pixiObject:PIXI.DisplayObject;\r\n    \r\n            if(gameObject instanceof MovieClip){\r\n                pixiObject=gameObject.makeContainer(1)\r\n            }\r\n            else{\r\n                pixiObject=gameObject.sprite;\r\n            }\r\n    \r\n            container.addChild(pixiObject);\r\n            pixiObjects.push(pixiObject);\r\n        }\r\n        transformEditor.setObjects(pixiObjects);\r\n    }\r\n\r\n    \r\n    useEffect(() => {\r\n        //초기화\r\n        init();\r\n        return () => {\r\n            //마지막\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div className = {props.className} ref={ref => { stageDiv.current = ref }} />\r\n    );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// const Screen: React.FC<Props> = (props) => {\r\n\r\n//     let stageDiv: HTMLElement | null;\r\n//     const app = new PIXI.Application({ width: props.width, height: props.height });\r\n//     const rect = new PIXI.Graphics();\r\n//     let draggingObject:{pixiObject:PIXI.DisplayObject,gameObject:(MovieClip|Graphic)}|null;\r\n\r\n\r\n//     useEffect(() => {\r\n//         //초기화\r\n//         stageDiv?.appendChild(app.view);\r\n//         app.stage.addChild(rect);\r\n//         app.stage.interactive = true;\r\n//         app.stage.interactiveChildren = true;\r\n//         app.stage.hitArea = new PIXI.Rectangle(0, 0, app.renderer.width/app.renderer.resolution, app.renderer.height/app.renderer.resolution);\r\n//         rect.zIndex = 0;\r\n//         app.ticker.add((delta)=>{\r\n\r\n//         });\r\n//     }, [])\r\n\r\n//     useEffect(() => {\r\n//         const container = new PIXI.Container();\r\n//         container.pivot.set(0.5, 0.5);\r\n//         container.position.set(props.width / 2, props.height / 2);\r\n//         const frame = props.movieClip.getFrame(props.frame);\r\n//         frame.rebatchAll();\r\n//         frame.getObjects().map((object) => {\r\n//             let pixiObject:PIXI.DisplayObject;\r\n//             if (object instanceof MovieClip) {\r\n//                 pixiObject = object.makeContainer(1);\r\n//             }\r\n//             else {\r\n//                 pixiObject = object.sprite;\r\n//             }\r\n\r\n//             pixiObject.interactive = true;\r\n//             pixiObject.addListener('mouseover',(e)=>{objectOver(e,object)})\r\n//             pixiObject.addListener('mouseout',(e)=>{objectOut(e,object)})\r\n//             pixiObject.addListener('mousedown',(e)=>{objectMouseDown(e,object)})\r\n//             app.stage.addListener('mouseup',mouseUp)\r\n//             app.stage.addListener('mousemove',mouseMove)\r\n//             container.addChild(pixiObject);\r\n//         });\r\n//         app.stage.addChild(container);\r\n//     })\r\n\r\n//     const objectOver = (event:PIXI.interaction.InteractionEvent,gameObject:Graphic|MovieClip)=>{\r\n//         const bound  = event.target.getBounds()\r\n//         rect.lineStyle(5, 0xFF0000);\r\n//         rect.drawRect(bound.x,bound.y,bound.width,bound.height);\r\n//     }\r\n//     const objectOut = (event:PIXI.interaction.InteractionEvent,gameObject:Graphic|MovieClip)=>{\r\n//         rect.clear();\r\n//     }\r\n//     const objectMouseDown = (event:PIXI.interaction.InteractionEvent,gameObject:Graphic|MovieClip)=>{\r\n//         draggingObject = {pixiObject:event.target,gameObject:gameObject};\r\n//     }\r\n//     const mouseUp = ()=>{\r\n//         if(draggingObject)\r\n//         {\r\n//             draggingObject.pixiObject.alpha = 1;\r\n//         }\r\n//         draggingObject = null;\r\n//         (\"up\");\r\n//     }\r\n\r\n//     let prevMouseX:number;\r\n//     let prevMouseY:number;\r\n\r\n//     const mouseMove = (event:PIXI.interaction.InteractionEvent)=>{\r\n//         const deltaMouseX = event.data.global.x - prevMouseX;\r\n//         const deltaMouseY = event.data.global.y - prevMouseY;\r\n//         prevMouseX = event.data.global.x;\r\n//         prevMouseY = event.data.global.y;\r\n\r\n//         if(draggingObject)\r\n//         {   \r\n//             const bound = draggingObject.pixiObject.getBounds();\r\n//             rect.clear();\r\n//             rect.lineStyle(5, 0x00CC66);\r\n//             rect.drawRect(bound.x,bound.y,bound.width,bound.height);\r\n//             draggingObject.pixiObject.transform.position.x+=deltaMouseX;\r\n//             draggingObject.pixiObject.transform.position.y+=deltaMouseY;\r\n//             draggingObject.pixiObject.alpha = 0.7;\r\n//         }\r\n//     }\r\n\r\n\r\n//     return (\r\n//         <div ref={ref => { stageDiv = ref }} />\r\n//     );\r\n// }\r\n\r\nexport default Screen;","import * as PIXI from 'pixi.js';\r\n\r\nexport default class FrontUI {\r\n    private app: PIXI.Application;\r\n    private container = new PIXI.Container();\r\n\r\n    constructor(app: PIXI.Application) {\r\n        this.app = app;\r\n\r\n        app.ticker.add(()=>{this.tick()});\r\n        this.app.stage.addChild(this.container);\r\n    }\r\n\r\n    private tick()\r\n    {\r\n        if(!this.app)\r\n            return;\r\n    }\r\n\r\n    public drawRect(lineWidth: number, lineColor: number, alpha: number, x: number, y: number, width: number, height: number, rotation: number, pivot: { x: number, y: number } = { x: 0, y: 0 }) {\r\n        this.drawShape(lineWidth, lineColor, alpha, (graphic: PIXI.Graphics) => {\r\n            graphic.drawRect(x, y, width, height);\r\n            graphic.rotation = rotation;\r\n            graphic.pivot.set(pivot.x, pivot.y);\r\n        });\r\n    }\r\n\r\n    public drawCircle(lineWidth: number, lineColor: number, alpha: number, x: number, y: number, radius: number, rotation: number, pivot: { x: number, y: number } = { x: 0, y: 0 }) {\r\n        this.drawShape(lineWidth, lineColor, alpha, (graphic: PIXI.Graphics) => {\r\n            graphic.drawCircle(x, y, radius);\r\n            graphic.rotation = rotation;\r\n        });\r\n    }\r\n\r\n    public drawLine(lineWidth: number, lineColor: number, alpha: number, x1: number, y1: number, x2: number, y2: number, rotation: number, pivot: { x: number, y: number } = { x: 0, y: 0 }) {\r\n        this.drawShape(lineWidth, lineColor, alpha, (graphic: PIXI.Graphics) => {\r\n            graphic.moveTo(x1, y1).lineTo(x2, y2);\r\n            graphic.rotation = rotation;\r\n        });\r\n    }\r\n\r\n    public drawShape(lineWidth: number, lineColor: number, alpha: number, drawing: (graphic:PIXI.Graphics) => void) {\r\n        this.container.removeChildren();\r\n        const graphic = new PIXI.Graphics();\r\n        graphic.lineStyle(lineWidth, lineColor, alpha);\r\n        drawing(graphic);\r\n        this.container.addChild(graphic);\r\n    }\r\n}","import * as Blockly from 'blockly/core';\r\n\r\nBlockly.Blocks['setpos'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"무비클립\");\r\n    this.appendValueInput(\"X\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"의 위치를\")\r\n        .appendField(\"X:\");\r\n    this.appendValueInput(\"Y\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"Y:\");\r\n    this.appendDummyInput()\r\n        .appendField(\"로 설정\");\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(230);\r\n this.setTooltip(\"좌표 설정\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getobject'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"objectName\")\r\n        .setCheck(\"String\")\r\n        .appendField(\"오브젝트 :\");\r\n    this.setOutput(true, \"object\");\r\n    this.setColour(230);\r\n this.setTooltip(\"오브젝트를 이름으로 찾습니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getpos'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트의 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"x\",\"x\"], [\"y\",\"y\"]]), \"type\")\r\n        .appendField(\"좌표\");\r\n    this.setOutput(true, \"Number\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['gametick'] = {\r\n  init: function() {\r\n    this.appendStatementInput(\"blocks\")\r\n        .setCheck(null)\r\n        .appendField(\"게임 틱\");\r\n    this.setColour(255);\r\n this.setTooltip(\"게임 틱마다 내용을 반복합니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getmousestate'] = {\r\n  init: function() {\r\n    this.appendDummyInput()\r\n        .appendField(\"마우스가\")\r\n        .appendField(new Blockly.FieldDropdown([[\"누른상태\",\"isDown\"], [\"뗀상태\",\"isUp\"]]), \"stateType\")\r\n        .appendField(\"인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"마우스가 눌린 상태인지 뗀 상태인지 확인합니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getmouseevent'] = {\r\n  init: function() {\r\n    this.appendDummyInput()\r\n        .appendField(\"마우스를 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"누른\",\"isDown\"], [\"뗀\",\"isUp\"], [\"클릭한\",\"isClick\"]]), \"eventType\")\r\n        .appendField(\"순간인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"마우스가 이벤트당  한번만 True를 반환합니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getkeyboardstate'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"keycode\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"다음 키가 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"눌린\",\"isDown\"], [\"뗀\",\"isUp\"]]), \"statetype\")\r\n        .appendField(\"상태인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getkeyboardevent'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"keycode\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"다음 키를 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"누른\",\"isDown\"], [\"뗀\",\"isUp\"]]), \"eventType\")\r\n        .appendField(\"순간인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['addphysics'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트에 물리엔진 추가\");\r\n    this.appendValueInput(\"friction\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"마찰\");\r\n    this.appendValueInput(\"mass\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"질량\");\r\n    this.appendDummyInput()\r\n        .appendField(\"고정된 물체인가? \")\r\n        .appendField(new Blockly.FieldCheckbox(\"FALSE\"), \"isstatic\");\r\n    this.appendDummyInput()\r\n        .appendField(\"각도 고정\")\r\n        .appendField(new Blockly.FieldCheckbox(\"FALSE\"), \"norotation\");\r\n    this.setInputsInline(false);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(0);\r\n this.setTooltip(\"물리세계에 던진다!\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['addforce'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트에\");\r\n    this.appendValueInput(\"X\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"X:\");\r\n    this.appendValueInput(\"Y\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"Y:\");\r\n    this.appendDummyInput()\r\n        .appendField(\"만큼 힘주기\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['setvelocity'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트의 속도를\");\r\n    this.appendValueInput(\"X\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"X:\");\r\n    this.appendValueInput(\"Y\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"Y:\");\r\n    this.appendDummyInput()\r\n        .appendField(\"로 정하기\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getvelocity'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트의 속도\")\r\n        .appendField(new Blockly.FieldDropdown([[\"x\",\"x\"], [\"y\",\"y\"]]), \"type\")\r\n        .appendField(\"구하기\");\r\n    this.setOutput(true, \"Number\");\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['checkcollision'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"a\")\r\n        .setCheck(null)\r\n        .appendField(\"오브젝트\");\r\n    this.appendValueInput(\"b\")\r\n        .setCheck(null)\r\n        .appendField(\"오브젝트\");\r\n    this.appendDummyInput()\r\n        .appendField(\"사이의 충돌 확인\");\r\n    this.setInputsInline(true);\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['mouseevent'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\");\r\n    this.appendStatementInput(\"blocks\")\r\n        .setCheck(null)\r\n        .appendField(new Blockly.FieldDropdown([[\"눌림\",\"mousedown\"], [\"뗌\",\"mouseup\"], [\"움직임\",\"mousemove\"], [\"올림\",\"mouseover\"], [\"클릭\",\"mouseclick\"]]), \"type\")\r\n        .appendField(\"이벤트\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['gamestart'] = {\r\n  init: function() {\r\n    this.appendStatementInput(\"blocks\")\r\n        .setCheck(null)\r\n        .appendField(\"시작\");\r\n    this.setColour(50);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['setrotation'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"오브젝트\");\r\n    this.appendValueInput(\"NAME\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"의 각도를\");\r\n    this.appendDummyInput()\r\n        .appendField(\"로 설정\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['gamestart'] = function(block:any) {\r\n    var statements_blocks = Blockly.JavaScript.statementToCode(block, 'blocks');\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"gameStart\"](game, ()=>{\r\n        ${statements_blocks}\r\n    });\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['addforce'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_x = Blockly.JavaScript.valueToCode(block, 'X', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_y = Blockly.JavaScript.valueToCode(block, 'Y', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"addForce\"](game, ${value_object}, ${value_x}, ${value_y});\\n`;\r\n    return code;\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['addphysics'] = function (block: any) {\r\n  var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var value_friction = Blockly.JavaScript.valueToCode(block, 'friction', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var value_mass = Blockly.JavaScript.valueToCode(block, 'mass', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var checkbox_isstatic = block.getFieldValue('isstatic') == 'TRUE';\r\n  var checkbox_norotation = block.getFieldValue('norotation') == 'TRUE';\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"addPhysics\"](game, ${value_object}, ${value_friction}, ${value_mass}, ${checkbox_isstatic}, ${checkbox_norotation});\\n`;\r\n  return code;\r\n};\r\n\r\n","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['checkcollision'] = function(block:any) {\r\n    var value_a = Blockly.JavaScript.valueToCode(block, 'a', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_b = Blockly.JavaScript.valueToCode(block, 'b', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"checkCollision\"](game, ${value_a}, ${value_b})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['gametick'] = function (block: any) {\r\n  var statements_blocks = Blockly.JavaScript.statementToCode(block, 'blocks');\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"gameTick\"](game, ()=>{\r\n      ${statements_blocks}\r\n  });\\n`;\r\n  return code;\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getkeyboardevent'] = function(block:any) {\r\n  var dropdown_eventtype = block.getFieldValue('eventType');\r\n  var value_keycode = Blockly.JavaScript.valueToCode(block, 'keycode', Blockly.JavaScript.ORDER_ATOMIC);\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"getKeyboardEvent\"](game, \"${dropdown_eventtype}\", ${value_keycode})`;\r\n  // TODO: Change ORDER_NONE to the correct strength.\r\n  return [code, Blockly.JavaScript.ORDER_NONE];\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getkeyboardstate'] = function(block:any) {\r\n    var dropdown_statetype = block.getFieldValue('statetype');\r\n    var value_keycode = Blockly.JavaScript.valueToCode(block, 'keycode', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getKeyboardState\"](game, \"${dropdown_statetype}\", ${value_keycode})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getmouseevent'] = function(block:any) {\r\n    var dropdown_eventtype = block.getFieldValue('eventType');\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getMouseEvent\"](game, \"${dropdown_eventtype}\")`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getmousestate'] = function(block:any) {\r\n    var dropdown_statetype = block.getFieldValue('stateType');\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getMouseState\"](game, \"${dropdown_statetype}\")`;\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  }","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getobject'] = function(block:any) {\r\n    var value_objectname = Blockly.JavaScript.valueToCode(block, 'objectName', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getObject\"](game, ${value_objectname})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getpos'] = function(block:any) {\r\n    var dropdown_type = block.getFieldValue('type');\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getPos\"](game, \"${dropdown_type}\", ${value_object})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getvelocity'] = function(block:any) {\r\n    var dropdown_type = block.getFieldValue('type');\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getVelocity\"](game, \"${dropdown_type}\", ${value_object})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['mouseevent'] = function(block:any) {\r\n  var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var dropdown_type = block.getFieldValue('type');\r\n  var statements_blocks = Blockly.JavaScript.statementToCode(block, 'blocks');\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"mouseEvent\"](game, ${value_object}, \"${dropdown_type}\",()=>{\r\n    ${statements_blocks}\r\n  })\\n`;\r\n  return code;\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['setpos'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_x = Blockly.JavaScript.valueToCode(block, 'X', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_y = Blockly.JavaScript.valueToCode(block, 'Y', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"setPos\"](game, ${value_object}, ${value_x}, ${value_y})\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['setvelocity'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_x = Blockly.JavaScript.valueToCode(block, 'X', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_y = Blockly.JavaScript.valueToCode(block, 'Y', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"setVelocity\"](game, ${value_object}, ${value_x}, ${value_y})\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['setrotation'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_name = Blockly.JavaScript.valueToCode(block, 'NAME', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"setRotation\"](game, ${value_object}, ${value_name})\\n`;\r\n    return code;\r\n  };","import BlocklyJS from 'blockly/javascript';\r\n\r\nimport \"./customBlocks/definitions/definition\"\r\nimport \"./customBlocks/generators/gameStart\"\r\nimport \"./customBlocks/generators/addForce\"\r\nimport \"./customBlocks/generators/addPhysics\"\r\nimport \"./customBlocks/generators/checkCollision\"\r\nimport \"./customBlocks/generators/gameTick\"\r\nimport \"./customBlocks/generators/getKeyboardEvent\"\r\nimport \"./customBlocks/generators/getKeyboardState\"\r\nimport \"./customBlocks/generators/getMouseEvent\"\r\nimport \"./customBlocks/generators/getMouseState\"\r\nimport \"./customBlocks/generators/getObject\"\r\nimport \"./customBlocks/generators/getPos\"\r\nimport \"./customBlocks/generators/getVelocity\"\r\nimport \"./customBlocks/generators/mouseEvent\"\r\nimport \"./customBlocks/generators/setPos\"\r\nimport \"./customBlocks/generators/setVelocity\"\r\nimport \"./customBlocks/generators/setRotation\"\r\n\r\nexport const INITIAL_XML = '<xml xmlns=\"http://www.w3.org/1999/xhtml\"></xml>';\r\n\r\nexport const INITIAL_TOOLBOX_XML = \r\n`<xml xmlns=\"http://www.w3.org/1999/xhtml\" id=\"toolbox\" style=\"display: none;\">\r\n<category name=\"Logic\" colour=\"#5C81A6\">\r\n  <block type=\"controls_if\"></block>\r\n  <block type=\"logic_compare\">\r\n    <field name=\"OP\">EQ</field>\r\n  </block>\r\n  <block type=\"logic_operation\">\r\n    <field name=\"OP\">AND</field>\r\n  </block>\r\n  <block type=\"logic_negate\"></block>\r\n  <block type=\"logic_boolean\">\r\n    <field name=\"BOOL\">TRUE</field>\r\n  </block>\r\n  <block type=\"logic_null\"></block>\r\n  <block type=\"logic_ternary\"></block>\r\n</category>\r\n<category name=\"Loops\" colour=\"#5CA65C\">\r\n  <block type=\"controls_repeat_ext\">\r\n    <value name=\"TIMES\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">10</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"controls_whileUntil\">\r\n    <field name=\"MODE\">WHILE</field>\r\n  </block>\r\n  <block type=\"controls_for\">\r\n    <field name=\"VAR\" id=\"C(8;cYCF}~vSgkxzJ+{O\" variabletype=\"\">i</field>\r\n    <value name=\"FROM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"TO\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">10</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"BY\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"controls_forEach\">\r\n    <field name=\"VAR\" id=\"Cg!CSk/ZJo2XQN3=VVrz\" variabletype=\"\">j</field>\r\n  </block>\r\n  <block type=\"controls_flow_statements\">\r\n    <field name=\"FLOW\">BREAK</field>\r\n  </block>\r\n</category>\r\n<category name=\"Math\" colour=\"#5C68A6\">\r\n  <block type=\"math_round\">\r\n    <field name=\"OP\">ROUND</field>\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">3.1</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_number\">\r\n    <field name=\"NUM\">0</field>\r\n  </block>\r\n  <block type=\"math_single\">\r\n    <field name=\"OP\">ROOT</field>\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">9</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_trig\">\r\n    <field name=\"OP\">SIN</field>\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">45</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_constant\">\r\n    <field name=\"CONSTANT\">PI</field>\r\n  </block>\r\n  <block type=\"math_number_property\">\r\n    <mutation divisor_input=\"false\"></mutation>\r\n    <field name=\"PROPERTY\">EVEN</field>\r\n    <value name=\"NUMBER_TO_CHECK\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">0</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_arithmetic\">\r\n    <field name=\"OP\">ADD</field>\r\n    <value name=\"A\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"B\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_on_list\">\r\n    <mutation op=\"SUM\"></mutation>\r\n    <field name=\"OP\">SUM</field>\r\n  </block>\r\n  <block type=\"math_modulo\">\r\n    <value name=\"DIVIDEND\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">64</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"DIVISOR\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">10</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_constrain\">\r\n    <value name=\"VALUE\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">50</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"LOW\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"HIGH\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">100</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_random_int\">\r\n    <value name=\"FROM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"TO\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">100</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_random_float\"></block>\r\n</category>\r\n<category name=\"Text\" colour=\"#5CA68D\">\r\n  <block type=\"text_charAt\">\r\n    <mutation at=\"true\"></mutation>\r\n    <field name=\"WHERE\">FROM_START</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"q@$ZF(L?Zo/z\\`d{o.Bp!\" variabletype=\"\">text</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"text\">\r\n    <field name=\"TEXT\"></field>\r\n  </block>\r\n  <block type=\"text_append\">\r\n    <field name=\"VAR\" id=\":};P,s[*|I8+L^-.EbRi\" variabletype=\"\">item</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\"></field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_length\">\r\n    <value name=\"VALUE\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_isEmpty\">\r\n    <value name=\"VALUE\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\"></field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_indexOf\">\r\n    <field name=\"END\">FIRST</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"q@$ZF(L?Zo/z\\`d{o.Bp!\" variabletype=\"\">text</field>\r\n      </block>\r\n    </value>\r\n    <value name=\"FIND\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_join\">\r\n    <mutation items=\"2\"></mutation>\r\n  </block>\r\n  <block type=\"text_getSubstring\">\r\n    <mutation at1=\"true\" at2=\"true\"></mutation>\r\n    <field name=\"WHERE1\">FROM_START</field>\r\n    <field name=\"WHERE2\">FROM_START</field>\r\n    <value name=\"STRING\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"q@$ZF(L?Zo/z\\`d{o.Bp!\" variabletype=\"\">text</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_changeCase\">\r\n    <field name=\"CASE\">UPPERCASE</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_trim\">\r\n    <field name=\"MODE\">BOTH</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_print\">\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_prompt_ext\">\r\n    <mutation type=\"TEXT\"></mutation>\r\n    <field name=\"TYPE\">TEXT</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n</category>\r\n<category name=\"Lists\" colour=\"#745CA6\">\r\n  <block type=\"lists_indexOf\">\r\n    <field name=\"END\">FIRST</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_create_with\">\r\n    <mutation items=\"0\"></mutation>\r\n  </block>\r\n  <block type=\"lists_repeat\">\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">5</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_length\"></block>\r\n  <block type=\"lists_isEmpty\"></block>\r\n  <block type=\"lists_create_with\">\r\n    <mutation items=\"3\"></mutation>\r\n  </block>\r\n  <block type=\"lists_getIndex\">\r\n    <mutation statement=\"false\" at=\"true\"></mutation>\r\n    <field name=\"MODE\">GET</field>\r\n    <field name=\"WHERE\">FROM_START</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_setIndex\">\r\n    <mutation at=\"true\"></mutation>\r\n    <field name=\"MODE\">SET</field>\r\n    <field name=\"WHERE\">FROM_START</field>\r\n    <value name=\"LIST\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_getSublist\">\r\n    <mutation at1=\"true\" at2=\"true\"></mutation>\r\n    <field name=\"WHERE1\">FROM_START</field>\r\n    <field name=\"WHERE2\">FROM_START</field>\r\n    <value name=\"LIST\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_split\">\r\n    <mutation mode=\"SPLIT\"></mutation>\r\n    <field name=\"MODE\">SPLIT</field>\r\n    <value name=\"DELIM\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">,</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_sort\">\r\n    <field name=\"TYPE\">NUMERIC</field>\r\n    <field name=\"DIRECTION\">1</field>\r\n  </block>\r\n</category>\r\n<category name=\"Colour\" colour=\"#A6745C\">\r\n  <block type=\"colour_picker\">\r\n    <field name=\"COLOUR\">#ff0000</field>\r\n  </block>\r\n  <block type=\"colour_random\"></block>\r\n  <block type=\"colour_rgb\">\r\n    <value name=\"RED\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">100</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"GREEN\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">50</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"BLUE\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">0</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"colour_blend\">\r\n    <value name=\"COLOUR1\">\r\n      <shadow type=\"colour_picker\">\r\n        <field name=\"COLOUR\">#ff0000</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"COLOUR2\">\r\n      <shadow type=\"colour_picker\">\r\n        <field name=\"COLOUR\">#3333ff</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"RATIO\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">0.5</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n</category>\r\n<sep></sep>\r\n<category name=\"Custom Button\" colour=\"#A6745C\">\r\n  <button text=\"A button\" callbackKey=\"myFirstButtonPressed\"></button>\r\n</category>\r\n<category name=\"Variables\" colour=\"#A65C81\" custom=\"VARIABLE\"></category>\r\n<category name=\"Functions\" colour=\"#9A5CA6\" custom=\"PROCEDURE\"></category>\r\n<category name=\"Engine\" colour=\"#5ba55b\">\r\n<block type=\"gamestart\"></block>\r\n<block type=\"setpos\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"X\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"Y\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"getpos\">\r\n  <field name=\"type\">x</field>\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"gametick\"></block>\r\n<block type=\"getmousestate\">\r\n  <field name=\"stateType\">isDown</field>\r\n</block>\r\n<block type=\"getmouseevent\">\r\n  <field name=\"eventType\">isDown</field>\r\n</block>\r\n<block type=\"getkeyboardstate\">\r\n  <field name=\"statetype\">isDown</field>\r\n  <value name=\"keycode\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"getkeyboardevent\">\r\n  <field name=\"eventType\">isDown</field>\r\n  <value name=\"keycode\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"addphysics\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"friction\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0.1</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"mass\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0.0001</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"addforce\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"X\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"Y\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"setvelocity\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"X\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"Y\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"getvelocity\">\r\n  <field name=\"type\">x</field>\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"checkcollision\">\r\n  <value name=\"a\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"b\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"mouseevent\">\r\n  <field name=\"type\">mousedown</field>\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"setrotation\">\r\n      <value name=\"object\">\r\n        <block type=\"getobject\">\r\n          <value name=\"objectName\">\r\n            <block type=\"text\">\r\n              <field name=\"TEXT\"></field>\r\n            </block>\r\n          </value>\r\n        </block>\r\n      </value>\r\n      <value name=\"NAME\">\r\n        <block type=\"math_number\">\r\n          <field name=\"NUM\">0</field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n</category>\r\n</xml>`;\r\n\r\nconst INITIAL_TOOLBOX_CATEGORIES = [\r\n  {\r\n    name: 'Controls',\r\n    blocks: [\r\n      { type: 'controls_if' },\r\n      {\r\n        type: 'controls_repeat_ext',\r\n        values: {\r\n          TIMES: {\r\n            type: 'math_number',\r\n            shadow: true,\r\n            fields: {\r\n              NUM: 10,\r\n            },\r\n          },\r\n        },\r\n        statements: {\r\n          DO: {\r\n            type: 'text_print',\r\n            shadow: true,\r\n            values: {\r\n              TEXT: {\r\n                type: 'text',\r\n                shadow: true,\r\n                fields: {\r\n                  TEXT: 'abc',\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    name: 'Text',\r\n    blocks: [\r\n      { type: 'text' },\r\n      {\r\n        type: 'text_print',\r\n        values: {\r\n          TEXT: {\r\n            type: 'text',\r\n            shadow: true,\r\n            fields: {\r\n              TEXT: 'abc',\r\n            },\r\n          },\r\n        },\r\n      },\r\n    ],\r\n  },\r\n];\r\n","import React, { useState, useRef, useEffect } from 'react';\nimport styles from './App.module.css';\nimport Screen from './components/Screen';\nimport Graphic from './GameEngine/Graphic';\nimport Transform from './GameEngine/Transform';\nimport MovieClip from './GameEngine/MovieClip';\nimport ReactBlocklyComponent from 'react-blockly';\nimport parseWorkspaceXml from 'react-blockly/src/BlocklyHelper';\n\nimport { INITIAL_XML, INITIAL_TOOLBOX_XML } from './content';\nimport * as Blockly from 'blockly/core';\nimport ResourceManager from './GameEngine/ResourceManager';\n\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\"\nimport AppBar from '@material-ui/core/AppBar';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\n\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport ShareIcon from '@material-ui/icons/Share';\nimport EditIcon from '@material-ui/icons/Edit';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport SaveIcon from '@material-ui/icons/Save';\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\nimport Menu from '@material-ui/core/Menu';\n\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport Link from '@material-ui/core/Link';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton'\nimport { generateUUID } from './Utils';\nimport fileDownload from 'js-file-download';\nimport GameScreen from './components/GameScreen';\n\nimport ReactModal from './resizableWindow/index';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\n\n\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '& > *': {\n        margin: theme.spacing(1),\n      },\n    },\n    input: {\n      display: 'none',\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n    },\n    editProjectNameButton: {\n      marginRight: theme.spacing(2),\n    },\n    title: {\n      marginRight: theme.spacing(3),\n    },\n    shareButton:{\n      marginLeft: \"auto\",\n    },\n    runButton:{\n      position: \"absolute\",\n      transform: \"translate(calc(50vw - 100%), 0)\",\n      transformOrigin: \"-50% 0\"\n    },\n    Button:{\n      width: \"100%\",\n      height: \"100%\"\n    },\n    link:{\n      color:\"white\",\n      fontSize:\"15px\",\n    },\n  }),\n);\n\nlet mainClip = new MovieClip(\"root\");\nlet resourceManager = new ResourceManager();\nlet selectedIndex: number | undefined = undefined;\nlet updateScreen: Function = () => { };\nlet currentClip: MovieClip = mainClip;\n\nlet workspace: any;\nlet workspaceInit = false;\n\nconst App = () => {\n\n  const workspaceChange = (w:any)=>{\n    if(workspaceInit)\n      return;\n    console.log(\"적용!\");\n    workspaceInit=true;\n    workspace = w;\n  }\n  const [gameFile, setGameFile] = useState<string>(\"\");\n  const [objectName, setObjectName] = useState(\"\");\n  const [isMovieclip, setIsMovieclip] = useState(false);\n  const [selectedObject, setSelectedObject] = useState<MovieClip | Graphic | undefined>();\n  //xy view\n  const xel = useRef<HTMLDivElement|null>();\n  const yel = useRef<HTMLDivElement|null>();\n\n  const classes = useStyles();\n\n  const graphicOpen = (e: any) => {\n    const file = e.target.files[0];\n    if (!file)\n      return;\n    var reader = new FileReader();\n    reader.onload = function (e) {\n      let contents = e.target?.result;\n      if (contents) {\n        let uuid = generateUUID();\n        resourceManager.addDirectBase64(uuid, contents.toString()).loaderLoad(() => {\n          addGraphic(file.name, uuid);\n        });\n      }\n    };\n    reader.readAsDataURL(file);\n  }\n\n  const addGraphic = (name: string, texId: string) => {\n    const graphic = new Graphic(name, new Transform(0, 0), resourceManager, texId);\n    currentClip.addObject(graphic, [1], [new Transform(0, 0)]);\n    updateScreen(currentClip);\n  }\n\n  const changeCurrentClip = (clip: MovieClip) => {\n    currentClip = clip;\n    updateScreen(currentClip);\n    renderBreadcrumbs();\n  }\n\n  const selectedTargetChanged = (index: number | undefined) => {\n    selectedIndex = index;\n    if (index == undefined) {\n      setSelectedObject(undefined);\n      setObjectName(\"\");\n      setIsMovieclip(false);\n      return;\n    }\n    const nselectedObject = currentClip.getFrame(1).getObjects()[index];\n    const pos = nselectedObject.getTransform();\n    setSelectedObject(nselectedObject);\n    setXYPos(pos.x,pos.y);\n    if (!nselectedObject)\n      return;\n\n    setObjectName(nselectedObject.name);\n    setIsMovieclip(nselectedObject instanceof MovieClip);\n  }\n\n  const onNameInputChanged = (event: any) => {\n    if (selectedIndex == undefined) {\n      setObjectName(\"\");\n      return;\n    }\n    setObjectName(event.target.value);\n    if (selectedObject)\n      selectedObject.name = event.target.value;\n  }\n\n  const removeSelectedObject = () => {\n    if (selectedObject != undefined) {\n      currentClip.getFrame(1).removeObject(selectedObject);\n      updateScreen(currentClip);\n    }\n  }\n\n\n\n  const goInside = () => {\n    if (selectedObject != undefined && selectedObject instanceof MovieClip) {\n      changeCurrentClip(selectedObject);\n    }\n  }\n\n  const goOutside = () => {\n    const parent = currentClip.getParent();\n    if (parent)\n      changeCurrentClip(parent);\n  }\n\n  const getResetFunc = (reset: Function) => {\n    updateScreen = reset;\n  }\n\n\n\n\n\n  //materialui + ui\n\n  //menu\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState<null | HTMLElement>(null);\n  const handleMenuClose = () => {\n    setMenuAnchorEl(null);\n  };\n\n  const handleMenuClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setMenuAnchorEl(event.currentTarget);\n  };\n\n  const saveProject = () => {\n    const resource = resourceManager.exportJson();\n    const xml = Blockly.Xml.workspaceToDom(workspace);\n    const xml_text = Blockly.Xml.domToText(xml);\n\n    const objectJson = mainClip.exportJson();\n    fileDownload(JSON.stringify({ resource: resource, xml: xml_text, objects: objectJson }), projectName+\".mandunda\");\n  }\n\n  const projectOpen = (e: any) => {\n    const file = e.target.files[0];\n    if (!file)\n      return;\n    var reader = new FileReader();\n    reader.onload = function (e) {\n      let contents = e.target?.result;\n      if (contents) {\n        const project = JSON.parse(contents.toString());\n        resourceManager = new ResourceManager();\n        resourceManager.importJson(project.resource, () => {\n          mainClip = MovieClip.importJson(project.objects, resourceManager);\n          workspace.clear();\n          var xml = Blockly.Xml.textToDom(project.xml);\n          Blockly.Xml.domToWorkspace(xml, workspace);\n          changeCurrentClip(mainClip);\n        })\n      }\n    };\n    reader.readAsText(file);\n  }\n\n\n\n  //projectname\n  const [newPName,setNewPName] = useState(\"\");\n  const [projectName, setProjectName] = useState(\"New Project\");\n  const [openProjectNameDialog, setOpenProjectNameDialog] = useState(false);\n  const handleEditProjectNameClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setOpenProjectNameDialog(true);\n  };\n  const projectNameCloseDialog = (set:boolean)=>{\n    if(set&&newPName!=\"\")\n    {\n      setProjectName(newPName);\n    }\n    else{\n      setNewPName(projectName);\n    }\n    setOpenProjectNameDialog(false);\n  }\n\n  //movieclipName\n  const [newMcName,setNewMcName] = useState(\"new_movieclip\");\n  const [openMcNameDialog, setOpenMcNameDialog] = useState(false);\n  const makeMovieClip = () => {\n    if (selectedObject == undefined)\n      return;\n\n    setNewMcName(\"new_movieclip\")\n    setOpenMcNameDialog(true);\n  }\n\n  const mcNameCloseDialog = (set:boolean)=>{\n    if (selectedObject == undefined)\n      return;\n    if(set&&newMcName!=\"\")\n    {\n      currentClip.getFrame(1).removeObject(selectedObject);\n      let newPos = selectedObject.getTransform();\n      const movieClip = new MovieClip(newMcName, new Transform(newPos.x, newPos.y));\n      newPos.x = 0;\n      newPos.y = 0;\n      movieClip.addObject(selectedObject, [1], [newPos]);\n      currentClip.addObject(movieClip, [1], [movieClip.getTransform()]);\n      updateScreen(currentClip);\n    }\n    setOpenMcNameDialog(false);\n  }\n  //upload\n\n  const uploadProject = ()=>{\n    fetch(\"http://203.234.191.83:5353/\"+projectName.replace(\" \",\"_\"), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: exportGameFile()\n    }).then((response)=>{\n\n      \n      alert(\"업로드 완료! 주소가 복사되었습니다!\");\n      \n    });\n  }\n\n\n  //gamerun\n  const [gameRuning,setGameRunning] = useState(false);\n  const handleRunClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    gameStart();\n    setGameRunning(true);\n  };\n  const closeGameDialog = ()=>{\n    setGameRunning(false);\n  }\n\n\n  const gameStart = () => {\n    const resource = resourceManager.exportJson();\n    const code = Blockly.JavaScript.workspaceToCode(workspace);\n    const objectJson = mainClip.exportJson();\n\n    setGameFile(exportGameFile());\n  }\n\n  const exportGameFile = ()=>{\n    const resource = resourceManager.exportJson();\n    const code = Blockly.JavaScript.workspaceToCode(workspace);\n    const objectJson = mainClip.exportJson();\n\n    return JSON.stringify({ resource: resource, code: code, objects: objectJson });\n  }\n\n\n  const resizeBlocky = ()=>{\n    if(workspace!=null)\n      Blockly.svgResize(workspace);\n    }\n\n  const setXYPos = (x: number, y: number) => {\n    if (!xel.current || !yel.current)\n      return;\n    if (!selectedObject) {\n      xel.current.textContent = \"X: -\";\n      yel.current.textContent = \"Y: -\";\n    }\n    xel.current.textContent = \"X: \" + x;\n    yel.current.textContent = \"Y: \" + y;\n  }\n\n\nconst handleClick = ()=>{\n  \n}\n\nconst [breadObjects,setBreadObjects] = useState<(MovieClip)[]>([mainClip]);\n\nconst renderBreadcrumbs = ()=>{\n  let current = currentClip; \n  let objects:(MovieClip)[] = [];\n\n  for(let i = 0;i<3;i++){\n    objects.push(current);\n    if(current == mainClip)\n    {\n      break;\n    }\n    const parent = current.getParent();\n    if(parent)\n      current = parent;\n  }\n  setBreadObjects(objects.reverse());\n}\n\n  window.addEventListener(\"mousemove\",resizeBlocky);\n\n  return (\n    <div className={styles.App}>\n\n      <input onChange={projectOpen} accept=\"*\" className={classes.input} id=\"contained-button-file2\" type=\"file\" />\n\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={menuAnchorEl}\n        keepMounted\n        open={Boolean(menuAnchorEl)}\n        onClose = {handleMenuClose}\n      >\n        <MenuItem onClick={saveProject}> Save Project　<SaveIcon /></MenuItem>\n        <label htmlFor=\"contained-button-file2\">\n          <MenuItem onClick={handleMenuClose}>Load Project　<FolderOpenIcon /></MenuItem>\n        </label> \n      </Menu>\n\n      <AppBar position=\"static\" className={styles.AppBar}>\n        <Toolbar>\n          <IconButton onClick = {handleMenuClick} edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" className={classes.title}>\n            만든다 - {projectName}\n          </Typography>\n          <IconButton onClick = {handleEditProjectNameClick} edge=\"start\" className={classes.editProjectNameButton} color=\"inherit\">\n            <EditIcon />\n          </IconButton>\n          <IconButton onClick = {handleRunClick} edge=\"start\" className={classes.runButton} color=\"inherit\">\n            <PlayArrowIcon style={{fontSize: 35}} />\n          </IconButton>\n          <CopyToClipboard  text={\"http://mandunda.com/#/player/\"+projectName.replace(\" \",\"_\")}>\n          <Button onClick = {uploadProject} startIcon={<ShareIcon />} className = {classes.shareButton} color=\"inherit\">Upload</Button>\n          </CopyToClipboard>\n        </Toolbar>\n      </AppBar>\n\n\n\n      <Dialog maxWidth={false} disableEscapeKeyDown={true} disableBackdropClick = {true} open={gameRuning} onClose={closeGameDialog} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">게임 화면</DialogTitle>\n        <DialogContent>\n        <GameScreen width={800} height={500} gameJson={gameFile} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={closeGameDialog} color=\"primary\">\n            닫기\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n\n\n      <Dialog disableEscapeKeyDown={true} open={openProjectNameDialog} onClose={()=>{projectNameCloseDialog(false)}} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">프로젝트 이름</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            새로운 프로젝트 이름을 설정해주세요.\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"프로젝트 이름\"\n            defaultValue={projectName}\n            fullWidth\n            onChange={(e)=>{setNewPName(e.target.value)}}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={()=>{projectNameCloseDialog(false)}} color=\"secondary\">\n            취소\n          </Button>\n          <Button onClick={()=>{projectNameCloseDialog(true)}} color=\"primary\">\n            설정\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n\n      <Dialog open={openMcNameDialog} onClose={()=>{mcNameCloseDialog(false)}} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">무비클립 이름</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            무비클립 이름을 설정해주세요.\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"무비클립 이름\"\n            defaultValue={\"new_movieclip\"}\n            fullWidth\n            onChange={(e)=>{setNewPName(e.target.value)}}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={()=>{mcNameCloseDialog(false)}} color=\"secondary\">\n            취소\n          </Button>\n          <Button onClick={()=>{mcNameCloseDialog(true)}} color=\"primary\">\n            설정\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n\n      <Dialog disableEscapeKeyDown={true} open={openMcNameDialog} onClose={()=>{mcNameCloseDialog(false)}} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">무비클립 이름</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            무비클립 이름을 설정해주세요.\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"무비클립 이름\"\n            defaultValue={\"new_movieclip\"}\n            fullWidth\n            onChange={(e)=>{setNewPName(e.target.value)}}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={()=>{mcNameCloseDialog(false)}} color=\"secondary\">\n            취소\n          </Button>\n          <Button onClick={()=>{mcNameCloseDialog(true)}} color=\"primary\">\n            설정\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n\n\n\n      <div className={styles.screenContainer}>\n        <Screen className = {styles.Screen} selectedTargetMoving={setXYPos} resetFunc={getResetFunc} width={800} height={500} movieClip={currentClip} frame={1} selectedTargetChanged={selectedTargetChanged} />\n        <div className={styles.Properties}>\n          <div className = {styles.tfContainer}>\n            <TextField\n              label=\"오브젝트 이름\"\n              id=\"outlined-margin-dense\"\n              defaultValue=\"Default Value\"\n              className={styles.test1}\n              margin=\"dense\"\n              variant=\"outlined\"\n              value={objectName} \n              onChange={onNameInputChanged}\n            />\n          </div>\n          <div className={styles.test2}>\n            <Breadcrumbs className = {classes.link} aria-label=\"breadcrumb\">\n              {breadObjects.indexOf(mainClip)==-1&&(<div></div>)} \n              {breadObjects.map((el) => \n                (<Link title = {el.name} onClick={()=>{changeCurrentClip(el)}} className = {classes.link}>{(el.name.slice(0,6)+\"…\").slice(0,el.name.length)}</Link>)\n              )}\n            </Breadcrumbs>\n          </div>\n          <div className={styles.test3}>\n            <div ref = {ref => { xel.current = ref }}>X: - </div>\n          </div>\n          <div className={styles.test4}>\n            <div ref = {ref => { yel.current = ref }}>Y: -</div>\n          </div>\n          <input onChange={graphicOpen} accept=\"image/*\" className={classes.input} id=\"contained-button-file\" type=\"file\" />\n          <div className={styles.test5}>\n            <label htmlFor=\"contained-button-file\">\n              <Button className={classes.Button} variant=\"contained\" color=\"primary\" disableElevation component=\"span\">그래픽 추가</Button>\n            </label>\n          </div>\n          <div className={styles.test6}>\n            <Button className={classes.Button} onClick={makeMovieClip} variant=\"contained\" color=\"primary\" disableElevation>무비클립화 하기</Button>\n          </div>\n          <div className={styles.test8}>\n            <Button className={classes.Button} onClick={goInside} variant=\"outlined\" disableElevation disabled={!isMovieclip}>안으로 들어가기</Button>\n          </div>\n          <div className={styles.test9}>\n            <Button className={classes.Button} onClick={goOutside} variant=\"outlined\" disableElevation disabled={(currentClip == mainClip)}>밖으로 나가기</Button>\n          </div>\n          <div className={styles.test7}>\n            <Button className={classes.Button} onClick={removeSelectedObject} variant=\"contained\" color=\"secondary\" disableElevation>삭제</Button>\n          </div>\n        </div>\n      </div>\n\n\n\n      <ReactModal initWidth={800} initHeight={400}\n        onFocus={() => (\"Modal is clicked\")}\n        isOpen={true}\n        resizing={resizeBlocky}>\n        <ReactBlocklyComponent.BlocklyEditor\n        initialXml={INITIAL_XML}\n        toolboxCategories={parseWorkspaceXml(INITIAL_TOOLBOX_XML)}\n        wrapperDivClassName={styles.Blockly}\n        workspaceDidChange={workspaceChange} />\n      </ReactModal>\n\n\n      <div id=\"copy\" style={{display: \"none\"}}>{\"http://mandunda.com/#/player/\"+projectName.replace(\" \",\"_\")}</div>\n    </div>\n  );\n}\n\nexport default App;\n\n\n\n/*\n\n \n      <TextField id=\"standard-basic\" label=\"오브젝트 이름\" value={objectName} onChange={onNameInputChanged} />\n      <input onChange={graphicOpen} accept=\"image/*\" className={classes.input} id=\"contained-button-file\" type=\"file\" />\n      <label htmlFor=\"contained-button-file\">\n        <Button variant=\"contained\" color=\"primary\" disableElevation component=\"span\">그래픽 추가</Button>\n      </label>\n\n      \n      <Button onClick={goInside} variant=\"outlined\" disableElevation disabled={!isMovieclip}>안으로 들어가기</Button>\n      \n      <Button onClick={removeSelectedObject} variant=\"contained\" color=\"secondary\" disableElevation>삭제</Button>\n      <br />\n      <Button onClick={gameStart} variant=\"contained\" color=\"secondary\" disableElevation>게임 실행</Button>\n      <Button onClick={saveProject} variant=\"contained\" color=\"secondary\" disableElevation>프로젝트 저장</Button>\n      <input onChange={projectOpen} accept=\"*\" className={classes.input} id=\"contained-button-file2\" type=\"file\" />\n      <label htmlFor=\"contained-button-file2\">\n        <Button variant=\"contained\" color=\"primary\" disableElevation component=\"span\">프로젝트 불러오기</Button>\n      </label>\n*/","import React, { Component } from \"react\";\nimport \"./index.css\";\n\nclass Resizer extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  handleMouseDown(e) {\n    this.props.updateStateResizing(true);\n  }\n  render() {\n    const style = {\n      width: 16,\n      height: 16\n    };\n    return (\n      <div\n        className=\"flexible-modal-resizer\"\n        style={style}\n        onMouseDown={this.handleMouseDown.bind(this)}\n      />\n    );\n  }\n}\n\nexport default Resizer;\n","import React, { Component, Fragment } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Resizer from './Resize.js';\nimport * as FontAwesome from 'react-icons/lib/fa';\nimport { CSSTransition } from 'react-transition-group';\n\nclass Modal extends Component {\n\trender() {\n\t\tconst { isDragging, width, height, top, left, isOpen, isMinimised, onRequestRecover,className,onFocus } = this.props;\n\t\tif (isOpen) {\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<CSSTransition in={!isMinimised} timeout={300} classNames=\"minimise\" unmountOnExit>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonClick={onFocus}\n\t\t\t\t\t\t\tref={(node) => {\n\t\t\t\t\t\t\t\tthis.node = node;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdraggable={isDragging}\n\t\t\t\t\t\t\tclassName={!className?\"flexible-modal\":\"flexible-modal \"+className}\n\t\t\t\t\t\t\tstyle={{ width, height, top, left }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.props.children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CSSTransition>\n\t\t\t\t\t{isMinimised && (\n\t\t\t\t\t\t<button className=\"flexible-modal-rebound-btn\" onClick={onRequestRecover}>\n\t\t\t\t\t\t\t<FontAwesome.FaBars />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t)}\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nclass FlexibleModal extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisDragging: false,\n\t\t\tisResizing: false,\n\t\t\ttop:\n\t\t\t\tthis.props.top !== undefined\n\t\t\t\t\t? this.props.top\n\t\t\t\t\t: this.props.initHeight\n\t\t\t\t\t\t? window.innerHeight / 2 - this.props.initHeight / 2 - 50\n\t\t\t\t\t\t: window.innerHeight / 2 - 400 / 2 - 50,\n\t\t\tleft:\n\t\t\t\tthis.props.left !== undefined\n\t\t\t\t\t? this.props.left\n\t\t\t\t\t: this.props.initWidth\n\t\t\t\t\t\t? window.innerWidth / 2 - this.props.initWidth / 2 - 21\n\t\t\t\t\t\t: window.innerWidth / 2 - 800 / 2 - 21,\n\t\t\twidth: this.props.initWidth ? this.props.initWidth : 800,\n\t\t\theight: this.props.initHeight ? this.props.initHeight : 400,\n\t\t\trel: null\n\t\t};\n\t\tthis.updateStateResizing = this.updateStateResizing.bind(this);\n\t\tthis.funcResizing = this.funcResizing.bind(this);\n\t\tthis.resize = this.resize.bind(this);\n\t\tthis.onMouseMove = this.onMouseMove.bind(this);\n\t\tthis.onMouseUp = this.onMouseUp.bind(this);\n\t\tthis.onMouseDown = this.onMouseDown.bind(this);\n\t\tthis.pressKey = this.pressKey.bind(this);\n\t\tthis.updateStateDragging = this.updateStateDragging.bind(this);\n\t}\n\n\tcomponentDidMount() {\n    \tconst { disableKeystroke } = this.props;\n\t\tdocument.addEventListener('mouseup', this.onMouseUp);\n\t\tif(!disableKeystroke) document.addEventListener('keydown', this.pressKey);\n\t}\n\n\t// componentDidUpdate(props, state) {\n\t// \tif (!this.state.isDragging && state.isDragging) {\n\t// \t\tdocument.removeEventListener('mousemove', this.onMouseMove);\n\t// \t\tdocument.removeEventListener('mouseup', this.onMouseUp);\n\t// \t}\n  \t// }\n  \n\tcomponentWillUnmount() {\n\t\tconst { disableKeystroke } = this.props;\n\t\tif(document.removeEventListener){\n\t\tdocument.removeEventListener('mousemove', this.onMouseMove);\n\t\tdocument.removeEventListener('mouseup', this.onMouseUp);\n\t\tif(!disableKeystroke) document.removeEventListener('keydown', this.pressKey);\n\t\t}\n\t}\n\n\tonMouseDown(e) {\n\t\t// only left mouse button\n\t\tdocument.addEventListener('mousemove', this.onMouseMove);\n\t\tif (e.button !== 0) return;\n\t\tvar pos = ReactDOM.findDOMNode(this.node_modal);\n\t\tthis.setState({\n\t\t\tisDragging: true,\n\t\t\trel: {\n\t\t\t\tx: e.pageX - pos.offsetLeft,\n\t\t\t\ty: e.pageY - pos.offsetTop\n\t\t\t}\n\t\t});\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t}\n\n\tonMouseUp(e) {\n\t\tdocument.removeEventListener('mousemove', this.onMouseMove);\n\t\tthis.setState({ isDragging: false });\n\t\tthis.setState({ isResizing: false });\n\t\te.stopPropagation();\n\t\t// e.preventDefault();\n\t}\n\n\tonMouseMove(e) {\n\t\tthis.props.resizing();\n\t\tconst { disableMove, disableVerticalMove, disableHorizontalMove } = this.props;\n\t\tif (this.state.isDragging) {\n\n\t\t\tif (disableMove) {\n\t\t\t} else if (disableVerticalMove && disableHorizontalMove) {\n\t\t\t} else if (!disableVerticalMove && disableHorizontalMove) {\n\t\t\t\tthis.setState({\n\t\t\t\t\ttop: e.pageY - this.state.rel.y\n\t\t\t\t});\n\t\t\t} else if (disableVerticalMove && !disableHorizontalMove) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tleft: e.pageX - this.state.rel.x\n\t\t\t\t});\n\t\t\t} else if (!disableVerticalMove && !disableHorizontalMove) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tleft: e.pageX - this.state.rel.x,\n\t\t\t\t\ttop: e.pageY - this.state.rel.y\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (this.state.isResizing) {\n\t\t\tthis.funcResizing(e.clientX, e.clientY);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t}\n\n\tupdateStateResizing(isResizing) {\n\t\tdocument.addEventListener('mousemove', this.onMouseMove);\n\t\tthis.setState({ isResizing });\n\t}\n\n\tfuncResizing(clientX, clientY) {\n\t\tthis.props.resizing();\n\t\tconst { minWidth: mWidth, minHeight: mHeight, disableVerticalResize, disableHorizontalResize } = this.props;\n\t\tlet node = ReactDOM.findDOMNode(this.node_modal);\n\t\tlet minWidth = mWidth ? mWidth : 200;\n\t\tlet minHeight = mHeight ? mHeight : 100;\n\t\tif (!disableHorizontalResize && clientX > node.offsetLeft + minWidth) {\n\t\t\tthis.setState({\n\t\t\t\twidth: clientX - node.offsetLeft + 16 / 2\n\t\t\t});\n\t\t}\n\t\tif (!disableVerticalResize && clientY > node.offsetTop + minHeight) {\n\t\t\tthis.setState({\n\t\t\t\theight: clientY - node.offsetTop + 16 / 2\n\t\t\t});\n\t\t}\n\t}\n\n\tupdateStateDragging(isDragging) {\n\t\tthis.setState({ isDragging });\n\t\tthis.props.resizing();\n\t}\n\n\tpressKey(e) {\n\t\tconst { onRequestClose, disableResize, disableMove, disableVerticalMove, disableHorizontalMove } = this.props;\n\t\tif (e.ctrlKey) {\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 37:\n\t\t\t\t\t!disableResize && this.setState((prevState) => ({ width: prevState.width - 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 38:\n\t\t\t\t\t!disableResize && this.setState((prevState) => ({ height: prevState.height - 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39:\n\t\t\t\t\t!disableResize && this.setState((prevState) => ({ width: prevState.width + 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 40:\n\t\t\t\t\t!disableResize && this.setState((prevState) => ({ height: prevState.height + 20 }));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 27:\n\t\t\t\t\tonRequestClose();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 37:\n\t\t\t\t\t!disableMove &&\n\t\t\t\t\t\t!disableHorizontalMove &&\n\t\t\t\t\t\tthis.setState((prevState) => ({ left: prevState.left - 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 38:\n\t\t\t\t\t!disableMove && !disableVerticalMove && this.setState((prevState) => ({ top: prevState.top - 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39:\n\t\t\t\t\t!disableMove &&\n\t\t\t\t\t\t!disableHorizontalMove &&\n\t\t\t\t\t\tthis.setState((prevState) => ({ left: prevState.left + 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 40:\n\t\t\t\t\t!disableMove && !disableVerticalMove && this.setState((prevState) => ({ top: prevState.top + 20 }));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tresize(width, height) {\n\t\tthis.props.resizing();\n\t\tthis.setState((prevState) => (\n      { width: width || prevState.width, height: height || prevState.height }\n    ));\n\t}\n\n\trender() {\n\t\tconst { isOpen, isMinimised, onRequestClose, onRequestMinimise, onRequestRecover, disableResize,className,onFocus } = this.props;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{/*this mask is a must*/}\n\t\t\t\t{isOpen &&\n\t\t\t\t!isMinimised && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tonClick={onRequestMinimise ? onRequestMinimise : onRequestClose}\n\t\t\t\t\t\tclassName=\"flexible-modal-mask\"\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t<Modal\n\t\t\t\t\tclassName = {className}\n\t\t\t\t\tonFocus={onFocus}\n\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\theight={this.state.height}\n\t\t\t\t\ttop={this.state.top}\n\t\t\t\t\tleft={this.state.left}\n\t\t\t\t\tisDragging={this.state.isDragging}\n\t\t\t\t\tonRequestRecover={onRequestRecover}\n\t\t\t\t\tisMinimised={isMinimised}\n\t\t\t\t\tisOpen={isOpen}\n\t\t\t\t\tupdateStateDragging={this.updateStateDragging}\n\t\t\t\t\ttransitionName=\"modal-anim\"\n\t\t\t\t\tref={(node) => {\n\t\t\t\t\t\tthis.node_modal = node;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t\t<div\n\t\t\t\t\t\tonMouseDown={this.onMouseDown}\n\t\t\t\t\t\tclassName=\"flexible-modal-drag-area\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: this.state.width\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tref={(dragArea) => {\n\t\t\t\t\t\t\tthis.dragArea = dragArea;\n\t\t\t\t\t\t}}\n\t\t\t\t\t><div>Block Script</div></div>\n\t\t\t\t\t{!disableResize && <Resizer updateStateResizing={this.updateStateResizing} />}\n\t\t\t\t</Modal>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default FlexibleModal;\n","export function generateUUID() {\r\n    var d = new Date().getTime();\r\n    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n        var r = (d + Math.random()*16)%16 | 0;\r\n        d = Math.floor(d/16);\r\n        return (c=='x' ? r : (r&0x3|0x8)).toString(16);\r\n    });\r\n    return uuid;\r\n};","import * as React from \"react\";\r\nimport { withRouter, RouteComponentProps } from \"react-router\";\r\nimport GameScreen from \"./components/GameScreen\";\r\nimport styles from \"./GamePlayer.module.css\"\r\ninterface MatchParams {\r\n  id: string;\r\n}\r\n\r\nconst GamePlayer: React.SFC<RouteComponentProps<MatchParams>> = ({ match }) => {\r\n  console.log(match.params.id);\r\n  const [gameFile,setGameFile] = React.useState(\"\");\r\n  const [gameLoad,setGameLoad] = React.useState(false);\r\n  React.useEffect(()=>{\r\n    fetch(\"http://203.234.191.83:5353/\"+match.params.id).then(x => x.text()).then(x => {\r\n        setGameFile(x);\r\n        setGameLoad(true)\r\n      })\r\n  },[])\r\n  return (\r\n      <div className={styles.GamePlayer}>\r\n        {gameLoad?(<GameScreen className={styles.GameScreen} gameJson = {gameFile} width = {800} height={500}/>):(<div className= {styles.loading}>LOADING</div>)}\r\n      </div>\r\n      )\r\n  \r\n};\r\n\r\nexport default withRouter(GamePlayer);","import React from \"react\";\r\nimport GameScreen from \"./components/GameScreen\";\r\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport GamePlayer from \"./GamePlayer\";\r\n\r\nconst Root = () => {\r\n    return(\r\n        <div>\r\n            <HashRouter>\r\n                <Route exact path=\"/\" component={App} />\r\n                <Route path=\"/player/:id\" component={GamePlayer} />\r\n            </HashRouter>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default Root","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport Game from './GameEngine/Game';\nimport MovieClip from './GameEngine/MovieClip';\nimport Transform from './GameEngine/Transform';\nimport Graphic from './GameEngine/Graphic';\nimport Matter from 'matter-js';\n\nimport ResourceManager from './GameEngine/ResourceManager';\nimport Root from './Root';\n\n\n\n\nReactDOM.render(\n  <Root/>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}