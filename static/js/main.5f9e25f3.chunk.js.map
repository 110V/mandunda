{"version":3,"sources":["GameEngine/Game.ts","GameEngine/blockFuncs/BlockFunctions.ts","../node_modules/encoding/lib sync","GameEngine/Transform.ts","App.module.css","GameEngine/Frame.ts","GameEngine/MovieClip.ts","GameEngine/ResourceManager.ts","GameEngine/Graphic.ts","components/GameScreen.tsx","GamePlayer.module.css","serviceWorker.js","components/ScreenUtils/TransformEditor.ts","components/Screen.tsx","components/ScreenUtils/FrontUI.ts","customBlocks/definitions/definition.ts","customBlocks/generators/gameStart.ts","customBlocks/generators/addForce.ts","customBlocks/generators/addPhysics.ts","customBlocks/generators/checkCollision.ts","customBlocks/generators/gameTick.ts","customBlocks/generators/getKeyboardEvent.ts","customBlocks/generators/getKeyboardState.ts","customBlocks/generators/getMouseEvent.ts","customBlocks/generators/getMouseState.ts","customBlocks/generators/getObject.ts","customBlocks/generators/getPos.ts","customBlocks/generators/getVelocity.ts","customBlocks/generators/mouseEvent.ts","customBlocks/generators/setPos.ts","customBlocks/generators/setVelocity.ts","customBlocks/generators/setRotation.ts","content.tsx","App.tsx","resizableWindow/Resize.js","resizableWindow/index.js","Utils.ts","GamePlayer.tsx","Root.tsx","index.tsx"],"names":["Game","width","height","target","backgroundColor","fps","mainClip","MovieClip","app","isPlaying","framesPerSecond","secondPerFrame","this","lastTime","Date","getTime","timeLeft","deltaTime","ticks","objects","engine","Matter","create","bodys","startCallback","isDestroying","keys","keysDownOnce","keysUpOnce","mouseDown","mouseOnceDown","mouseOnceUp","mouseOnceClick","PIXI","setFps","appendChild","view","world","gravity","y","shared","on","alert","initEvents","update","Transform","init","map","func","tick","ticker","add","requestAnimationFrame","animate","game","destroy","Math","min","updatePhysics","render","name","object","isStatic","friction","mass","bound","getBound","sprite","getBounds","transform","getTransform","body","rectangle","x","angle","roatation","push","gameObject","el","setTransform","vertices","type","callback","interactive","hitArea","renderer","resolution","interactiveChildren","addListener","tickEvent","keyCode","addEventListener","onMouseDown","onMouseUp","onClick","window","e","keyDown","keyUp","eventTick","key","i","slice","repeat","BlockFunctions","Body","applyForce","position","addPhysics","a","b","Query","collides","length","blocks","addTick","eventType","isKeyPress","isKeyRelease","stateType","isKeyDown","isMouseOnceDown","isMouseOnceUp","isMouseOnceClick","isMouseDown","objectName","getObject","velocity","console","log","addMouseEvent","setPosition","setVelocity","setAngle","webpackEmptyContext","req","Error","code","resolve","module","exports","id","scaleX","scaleY","rotation","child","rotatedPos","rotatePos","seta","cos","sin","Frame","script","batches","entry","forEach","rebatchAll","batch","splice","container","addChild","makeContainer","newBatchs","tempBatch","exportStruct","maker","exportMaker","childs","parent","frames","currentFrame","addFrame","clone","frame","stop","play","getFrameCount","targetCount","getFrame","Object","transforms","extendFramesTo","addObject","setParent","frameNum","removeObject","num","getCurrentFrame","calcChildTransform","JSON","stringify","struct","rm","undefined","make","fromObject","importStruct","json","parse","clip","resourceManager","Graphic","texture","ResourceManager","loader","loading","queue","callBack","data","imageToBase64","then","response","addDirectBase64","onConvert","catch","error","load","resources","loaderLoad","base64","texId","from","getTexture","newTransform","set","scale","GameScreen","props","useRef","stageDiv","current","gameJson","gameFile","importJson","resource","eval","start","useEffect","className","style","border","ref","Boolean","location","hostname","match","State","transformEditor","gameObjects","pixiObjects","FrontUI","stage","lineWidth","lineColor","alpha","pivot","drawShape","graphic","drawRect","radius","drawCircle","x1","y1","x2","y2","moveTo","lineTo","drawing","removeChildren","lineStyle","TransformEditor","frontUI","points","transformChanged","selectedTargetChanged","selectedTargetMoving","state","none","targetIndex","prevMouseX","prevMouseY","point","beginFill","color","pointMouseDown","mouseUp","mouseMove","global","removeAllListeners","targetMouseDown","mouseOver","mouseOut","setTarget","removeTarget","moving","index","deltaMouseX","deltaMouseY","Screen","reset","movieClip","removeChild","getObjects","pixiObject","setObjects","thickness","transform_","updateBatchToCurrentState","resetFunc","Blockly","appendValueInput","setCheck","appendField","appendDummyInput","setPreviousStatement","setNextStatement","setColour","setTooltip","setHelpUrl","setOutput","appendStatementInput","setInputsInline","block","statements_blocks","statementToCode","value_object","valueToCode","ORDER_ATOMIC","value_x","value_y","value_friction","value_mass","checkbox_isstatic","getFieldValue","value_a","value_b","ORDER_NONE","dropdown_eventtype","value_keycode","dropdown_statetype","value_objectname","dropdown_type","value_name","workspace","Resizer","updateStateResizing","handleMouseDown","bind","React","Component","Modal","isDragging","top","left","isOpen","isMinimised","onRequestRecover","onFocus","CSSTransition","in","timeout","classNames","unmountOnExit","node","draggable","children","FlexibleModal","isResizing","initHeight","innerHeight","initWidth","innerWidth","rel","funcResizing","resize","onMouseMove","pressKey","updateStateDragging","disableKeystroke","document","removeEventListener","button","pos","ReactDOM","findDOMNode","node_modal","setState","pageX","offsetLeft","pageY","offsetTop","stopPropagation","preventDefault","resizing","disableMove","disableVerticalMove","disableHorizontalMove","clientX","clientY","mWidth","minWidth","mHeight","minHeight","disableVerticalResize","disableHorizontalResize","onRequestClose","disableResize","ctrlKey","prevState","onRequestMinimise","transitionName","dragArea","Resize","useStyles","makeStyles","theme","createStyles","root","margin","spacing","input","display","menuButton","marginRight","editProjectNameButton","title","shareButton","marginLeft","runButton","transformOrigin","Button","link","fontSize","selectedIndex","updateScreen","currentClip","workspaceInit","App","useState","setGameFile","setObjectName","isMovieclip","setIsMovieclip","selectedObject","setSelectedObject","xel","yel","classes","addGraphic","changeCurrentClip","renderBreadcrumbs","menuAnchorEl","setMenuAnchorEl","handleMenuClose","newPName","setNewPName","projectName","setProjectName","openProjectNameDialog","setOpenProjectNameDialog","projectNameCloseDialog","newMcName","setNewMcName","openMcNameDialog","setOpenMcNameDialog","mcNameCloseDialog","newPos","gameRuning","setGameRunning","closeGameDialog","gameStart","exportJson","workspaceToCode","exportGameFile","objectJson","resizeBlocky","setXYPos","textContent","breadObjects","setBreadObjects","getParent","reverse","styles","onChange","file","files","reader","FileReader","onload","contents","result","project","toString","clear","xml","textToDom","domToWorkspace","readAsText","accept","anchorEl","keepMounted","open","onClose","MenuItem","workspaceToDom","xml_text","domToText","fileDownload","htmlFor","AppBar","Toolbar","IconButton","event","currentTarget","edge","aria-label","Typography","variant","fetch","replace","method","headers","startIcon","Dialog","maxWidth","disableEscapeKeyDown","disableBackdropClick","aria-labelledby","DialogTitle","DialogContent","DialogActions","DialogContentText","TextField","autoFocus","label","defaultValue","fullWidth","value","screenContainer","nselectedObject","Properties","tfContainer","test1","test2","Breadcrumbs","indexOf","Link","test3","test4","uuid","d","c","r","random","floor","generateUUID","readAsDataURL","test5","disableElevation","component","test6","test8","disabled","test9","test7","BlocklyEditor","initialXml","toolboxCategories","parseWorkspaceXml","wrapperDivClassName","workspaceDidChange","w","withRouter","params","gameLoad","setGameLoad","text","GamePlayer","Root","exact","path","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.5f9e25f3.chunk.js","sourcesContent":["import * as PIXI from \"pixi.js\";\r\nimport * as Matter from 'matter-js'\r\n\r\nimport MovieClip from \"./MovieClip\";\r\nimport Transform from \"./Transform\";\r\nimport Graphic from \"./Graphic\";\r\n\r\nexport default class Game {\r\n    public mainClip: MovieClip = new MovieClip(\"root\");\r\n\r\n    public app: PIXI.Application;\r\n    private isPlaying: boolean = false;\r\n\r\n    private framesPerSecond = 60;\r\n    private secondPerFrame = 1 / this.framesPerSecond;\r\n    private lastTime = (new Date()).getTime();\r\n    private timeLeft = this.secondPerFrame * 1000;\r\n    public deltaTime = 0;\r\n    public ticks:(()=>void)[] = []; \r\n\r\n    private objects: { [id: string]: (MovieClip | Graphic); } = {};\r\n\r\n    private engine = Matter.Engine.create();\r\n    private bodys: { gameObject: (MovieClip | Graphic), body: Matter.Body }[] = [];\r\n    public startCallback: (()=>void)[] = [];\r\n\r\n    private isDestroying = false;\r\n    private target:HTMLElement;\r\n\r\n    constructor(width: number, height: number, target: HTMLElement, backgroundColor = 0xFFFFFF, fps = 60) {\r\n        this.app = new PIXI.Application({\r\n            width: width,\r\n            height: height,\r\n            backgroundColor: backgroundColor\r\n        });\r\n        this.target = target;\r\n        this.setFps(fps);\r\n        target.appendChild(this.app.view);\r\n        this.engine.world.gravity.y = 1;\r\n    }\r\n\r\n    public setFps(fps: number) {\r\n        this.framesPerSecond = fps;\r\n        this.secondPerFrame = 1 / fps;\r\n    }\r\n\r\n    public start() {\r\n        PIXI.Loader.shared.on(\"complete\",()=>{alert(\"완료\")});\r\n        this.initEvents();\r\n        this.isPlaying = true;\r\n        this.mainClip.update(this.app, Transform.init, true);\r\n        this.startCallback.map(func => { func() });\r\n        this.ticks.map((tick)=>{\r\n            this.app.ticker.add(tick);\r\n        });\r\n        requestAnimationFrame(() => { this.animate(this) });\r\n\r\n        // var render = Matter.Render.create({\r\n        //     element: this.target,\r\n        //     engine: this.engine,\r\n        //     options: {\r\n        //         width: 800,\r\n        //         height: 500,\r\n        //         background: '#fafafa',\r\n        //         wireframeBackground: '#222',\r\n        //         hasBounds: false,\r\n\r\n        //     }\r\n        // });\r\n    \r\n        // Matter.Render.run(render);\r\n    }\r\n\r\n    private animate(game: Game) {\r\n        if(this.isDestroying){\r\n            this.app.destroy(true);\r\n            return;\r\n        }\r\n        this.deltaTime = Math.min((new Date()).getTime() - this.lastTime,this.secondPerFrame * 1000);\r\n        this.updatePhysics(this.deltaTime);\r\n        this.timeLeft -= this.deltaTime;\r\n        if (this.timeLeft < 0 && this.isPlaying) {\r\n            this.mainClip.update(this.app);\r\n            this.timeLeft = this.secondPerFrame * 1000;\r\n        }\r\n        else {\r\n            this.mainClip.render(this.app);\r\n        }\r\n        this.lastTime = (new Date()).getTime()\r\n        requestAnimationFrame(() => { this.animate(game) });\r\n    }\r\n\r\n    public destroy()\r\n    {\r\n        this.isDestroying = true;\r\n    }\r\n\r\n    public stop() {\r\n        this.isPlaying = false;\r\n    }\r\n\r\n    public play() {\r\n        this.isPlaying = true;\r\n    }\r\n\r\n    public addObject(name: string, object: MovieClip|Graphic) {\r\n        this.objects[name] = object;\r\n        object.name = \"e\";\r\n    }\r\n\r\n    public getObject(name: string) {\r\n        return this.objects[name];\r\n    }\r\n\r\n    public addPhysics(object: Graphic | MovieClip, isStatic: boolean, friction: number, mass: number) {\r\n        let bound: PIXI.Rectangle;\r\n        if (object instanceof MovieClip) {\r\n            bound = object.getBound();\r\n        }\r\n        else {\r\n            bound = object.sprite.getBounds();\r\n        }\r\n        const transform = object.getTransform();\r\n        const body = Matter.Bodies.rectangle(transform.x, transform.y, bound.width, bound.height);\r\n        body.angle = transform.roatation;\r\n        body.friction = friction;\r\n        body.mass = mass;\r\n        body.isStatic = isStatic;\r\n        Matter.World.add(this.engine.world, body);\r\n        object.body = body;\r\n        this.bodys.push({ body: body, gameObject: object });\r\n\r\n    }\r\n\r\n    private updatePhysics(deltaTime: number) {\r\n        this.bodys.map((el) => {\r\n            el.gameObject.setTransform(new Transform(el.body.vertices[0].x, el.body.vertices[0].y, 1, 1, el.body.angle));\r\n        });\r\n        Matter.Engine.update(this.engine, deltaTime, 1);\r\n    }\r\n\r\n    public addMouseEvent(object:PIXI.Sprite,type:string,callback:()=>void){  \r\n        object.interactive = true; \r\n        object.hitArea = new PIXI.Rectangle(0, 0, object.width / this.app.renderer.resolution,\r\n            object.height / this.app.renderer.resolution);\r\n        object.interactiveChildren = true;\r\n        object.addListener(type,callback);\r\n    }\r\n\r\n    public addTick(tickEvent:()=>void)\r\n    {\r\n        this.ticks.push(tickEvent);\r\n    }\r\n\r\n    //mouse,keyboard events\r\n    private keys: boolean[] = [];\r\n    private keysDownOnce: number[] = [];\r\n    private keysUpOnce: number[] = [];\r\n    private mouseDown: boolean = false;\r\n\r\n    private mouseOnceDown: number = 0;\r\n    private mouseOnceUp: number = 0;\r\n    private mouseOnceClick: number = 0;\r\n\r\n\r\n\r\n    public isKeyDown(keyCode: number) {\r\n        return this.keys[keyCode];\r\n    }\r\n\r\n    public isKeyPress(keyCode: number) {\r\n        return this.keysDownOnce[keyCode] == 1;\r\n    }\r\n\r\n    public isKeyRelease(keyCode: number) {\r\n        return this.keysUpOnce[keyCode] == 1;\r\n    }\r\n\r\n    public isMouseDown() {\r\n        return this.mouseDown;\r\n    }\r\n    public isMouseOnceDown() {\r\n        return this.mouseOnceDown == 1;\r\n    }\r\n\r\n    public isMouseOnceUp() {\r\n        return this.mouseOnceUp == 1;\r\n    }\r\n\r\n    public isMouseOnceClick() {\r\n        return this.mouseOnceClick == 1;\r\n    }\r\n\r\n\r\n    private initEvents() {\r\n        this.app.view.addEventListener(\"mousedown\", () => {this.onMouseDown()});\r\n        this.app.view.addEventListener(\"mouseup\", () => {this.onMouseUp()})\r\n        this.app.view.addEventListener(\"click\", () => {this.onClick()});;\r\n        window.addEventListener(\"keydown\", (e) => { this.keyDown(e) });\r\n        window.addEventListener(\"keyup\", (e) => { this.keyUp(e) });\r\n\r\n        this.keys[4] = true;\r\n        this.app.ticker.add(() => { this.eventTick() })\r\n    }\r\n\r\n    private eventTick() {\r\n        this.keysDownOnce.map((key, i) => {\r\n            if (key != 0) {\r\n                this.keysDownOnce[i]--;\r\n            }\r\n            else {\r\n                this.keysDownOnce = this.keysDownOnce.slice(i, i);\r\n            }\r\n        });\r\n        this.keysUpOnce.map((key, i) => {\r\n            if (key != 0) {\r\n                this.keysUpOnce[i]--;\r\n            }\r\n            else {\r\n                this.keysUpOnce = this.keysUpOnce.slice(i, i);\r\n            }\r\n        });\r\n\r\n        if (this.mouseOnceDown != 0) {\r\n            this.mouseOnceDown--;\r\n        }\r\n        if (this.mouseOnceUp != 0) {\r\n            this.mouseOnceUp--;\r\n        }\r\n        if (this.mouseOnceClick != 0) {\r\n            this.mouseOnceClick--;\r\n        }\r\n\r\n    }\r\n\r\n    private onMouseDown() {\r\n        this.mouseDown = true;\r\n        this.mouseOnceDown = 2;\r\n    }\r\n\r\n    private onMouseUp() {\r\n        this.mouseDown = false;\r\n        this.mouseOnceUp = 2;\r\n    }\r\n\r\n    private onClick() {\r\n        this.mouseOnceClick = 2;\r\n    }\r\n\r\n    private keyDown(e: KeyboardEvent) {\r\n        this.keysDownOnce[e.keyCode] = (!e.repeat ? 2 : -1);\r\n        this.keys[e.keyCode] = true;\r\n    }\r\n    private keyUp(e: KeyboardEvent) {\r\n        this.keysUpOnce[e.keyCode] = (!e.repeat ? 2 : -1);\r\n        this.keys[e.keyCode] = false;\r\n    }\r\n}","import Game from \"../Game\";\r\nimport MovieClip from \"../MovieClip\";\r\nimport Graphic from \"../Graphic\";\r\nimport Matter from \"matter-js\";\r\n\r\n\r\nlet BlockFunctions: { [id: string]: (Function); } = {};\r\n\r\nBlockFunctions[\"addForce\"] = (game: Game, object: (MovieClip | Graphic), x: number, y: number) => {\r\n    if (object.body) {\r\n        //Matter.Body.setVelocity(object.body, { x: object.body.velocity.x + x, y: object.body.velocity.y + y })\r\n        Matter.Body.applyForce(object.body,object.body.position,{x:x,y:y});\r\n    }\r\n}\r\n\r\nBlockFunctions[\"addPhysics\"] = (game: Game, object: (MovieClip | Graphic), friction: number, mass: number, isStatic: boolean) => {\r\n    game.addPhysics(object, isStatic, friction, mass);\r\n}\r\n\r\nBlockFunctions[\"checkCollision\"] = (game: Game, a: (MovieClip | Graphic), b: (MovieClip | Graphic)) => {\r\n    if(a.body&&b.body){\r\n        return Matter.Query.collides(a.body,[b.body]).length != 0;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"gameStart\"] = (game: Game, blocks: () => {}) => {\r\n    game.startCallback.push(blocks);\r\n}\r\n\r\nBlockFunctions[\"gameTick\"] = (game: Game, blocks: () => {}) => {\r\n    game.addTick(blocks);\r\n}\r\n\r\nBlockFunctions[\"getKeyboardEvent\"] = (game: Game, eventType: string, keyCode: number) => {\r\n    switch(eventType)\r\n    {\r\n        case \"isDown\":\r\n            return game.isKeyPress(keyCode);\r\n        case \"isUp\":\r\n            return game.isKeyRelease(keyCode);\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getKeyboardState\"] = (game: Game, stateType: string, keyCode: number) => {\r\n    const keyDown =  game.isKeyDown(keyCode);\r\n    switch(stateType)\r\n    {\r\n        case \"isDown\":\r\n            return keyDown;\r\n        case \"isUp\":\r\n            return !keyDown;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getMouseEvent\"] = (game: Game, eventType: string) => {\r\n    switch(eventType)\r\n    {\r\n        case \"isDown\":\r\n            return game.isMouseOnceDown();\r\n        case \"isUp\":\r\n            return game.isMouseOnceUp();\r\n        case \"isClick\":\r\n            return game.isMouseOnceClick();\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getMouseState\"] = (game: Game, stateType: string) => {\r\n    const keyDown =  game.isMouseDown();\r\n    switch(stateType)\r\n    {\r\n        case \"isDown\":\r\n            return keyDown;\r\n        case \"isUp\":\r\n            return !keyDown;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getObject\"] = (game: Game, objectName: string) => {\r\n    return game.getObject(objectName);\r\n}\r\n\r\nBlockFunctions[\"getPos\"] = (game: Game, type: string, object: (MovieClip | Graphic)) => {\r\n    switch(type)\r\n    {\r\n        case \"x\":\r\n            return object.getTransform().x;\r\n        case \"y\":\r\n            return object.getTransform().y;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getVelocity\"] = (game: Game, type: string, object: (MovieClip | Graphic)) => {\r\n    if(!object.body)\r\n        return;\r\n\r\n    switch(type)\r\n    {\r\n        case \"x\":\r\n            return object.body.velocity.x;\r\n        case \"y\":\r\n            return object.body.velocity.y;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"mouseEvent\"] = (game: Game, object: (MovieClip | Graphic), type: string, blocks: (()=>void)) => {\r\n    if(object instanceof MovieClip)\r\n    {\r\n        console.log(\"무비클립은 마우스 이벤트를 지원하지 않습니다.\");\r\n        return;\r\n    }\r\n    game.addMouseEvent(object.sprite,type,blocks);\r\n}\r\n\r\nBlockFunctions[\"setPos\"] = (game: Game, object: (MovieClip | Graphic), x: number, y: number) => {\r\n    if(object.body){\r\n        Matter.Body.setPosition(object.body,{x:x,y:y});\r\n    }\r\n    const transform = object.getTransform();\r\n    transform.x = x;\r\n    transform.y = y;\r\n    object.setTransform(transform);\r\n}\r\n\r\nBlockFunctions[\"setVelocity\"] = (game: Game, object: (MovieClip | Graphic), x: number, y: number) => {\r\n    if(object.body){\r\n        Matter.Body.setVelocity(object.body,{x:x,y:y});\r\n    }\r\n}\r\n\r\nBlockFunctions[\"setRotation\"] = (game: Game, object: (MovieClip | Graphic), angle:number) => {\r\n    if(object.body){\r\n        Matter.Body.setAngle(object.body,angle);\r\n    }\r\n    const transform = object.getTransform();\r\n    transform.roatation = angle;\r\n    object.setTransform(transform);\r\n}\r\n\r\nexport default BlockFunctions;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 229;","export default class Transform {\r\n    static init = new Transform(0, 0);\r\n\r\n    x: number;\r\n    y: number;\r\n    scaleX: number;\r\n    scaleY: number;\r\n    roatation: number;\r\n\r\n    constructor(x:number, y:number, scaleX = 1, scaleY = 1, rotation = 0) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.scaleX = scaleX;\r\n        this.scaleY = scaleY;\r\n        this.roatation = rotation;\r\n    }\r\n\r\n\r\n    public calcChildTransform(transform: Transform) {\r\n        const parent = this;\r\n        const child = transform;\r\n        const rotatedPos = this.rotatePos(child.x, child.y, parent.roatation);\r\n        return new Transform(\r\n            rotatedPos.x * parent.scaleX + parent.x,\r\n            rotatedPos.y * parent.scaleY + parent.y,\r\n            child.scaleX * parent.scaleX,\r\n            child.scaleY * parent.scaleY,\r\n            child.roatation + parent.roatation);\r\n    }\r\n\r\n    private rotatePos(x:number, y:number, seta:number) {\r\n        return {\r\n            x: x * Math.cos(seta) - y * Math.sin(seta),\r\n            y: y * Math.cos(seta) + x * Math.sin(seta)\r\n        };\r\n    }\r\n\r\n    public clone()\r\n    {\r\n        return new Transform(this.x,this.y,this.scaleX,this.scaleY,this.roatation);\r\n    }\r\n\r\n    static fromObject(transform:any){\r\n        return new Transform(transform.x,transform.y,transform.scaleX,transform.scaleY,transform.roatation);\r\n    }\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2NoZF\",\"AppBar\":\"App_AppBar__2Kg9l\",\"Blockly\":\"App_Blockly__3ite3\",\"screenContainer\":\"App_screenContainer__c3hxx\",\"Screen\":\"App_Screen__392HF\",\"Properties\":\"App_Properties__3WWL_\",\"tfContainer\":\"App_tfContainer__3MgPT\",\"test2\":\"App_test2__2Jmwd\",\"test1\":\"App_test1__3G2tV\",\"test3\":\"App_test3__1ssgM\",\"test4\":\"App_test4__10zIh\",\"test5\":\"App_test5__23SaN\",\"test6\":\"App_test6__3Kq8b\",\"test7\":\"App_test7__2T8nz\",\"test8\":\"App_test8__2o9tD\",\"test9\":\"App_test9__3JGwf\"};","import Script from \"./Script\";\r\nimport Transform from \"./Transform\";\r\nimport MovieClip from \"./MovieClip\";\r\nimport Graphic from \"./Graphic\";\r\n\r\nimport * as PIXI from \"pixi.js\";\r\n\r\ninterface Batch{\r\n    object: (MovieClip|Graphic);\r\n    transform: Transform;\r\n}\r\n\r\n\r\nexport default class Frame {\r\n    public script: Script | null = null;\r\n    private objects: (MovieClip | Graphic)[] = []\r\n    private batches: Batch[] = [];\r\n\r\n\r\n    public update(app: PIXI.Application, transform: Transform = Transform.init, entry: boolean = false) {\r\n        this.objects.forEach(object => {\r\n            object.update(app, transform);\r\n        });\r\n\r\n        if (entry) {\r\n            this.rebatchAll();\r\n        }\r\n    }\r\n\r\n    public updateBatchToCurrentState()\r\n    {\r\n        this.batches.map((batch)=>{\r\n            batch.transform = batch.object.getTransform();\r\n        })\r\n    }\r\n\r\n    public rebatchAll()\r\n    {\r\n        this.batches.forEach(batch => {\r\n            batch.object.setTransform(batch.transform);\r\n        });\r\n    }\r\n\r\n    public addObject(object: MovieClip | Graphic,transform :Transform) {\r\n        this.objects.push(object);\r\n        const batch:Batch = {object,transform} as Batch; \r\n        this.batches.push(batch);\r\n    }\r\n\r\n    public removeObject(object:MovieClip|Graphic)\r\n    {\r\n        this.objects.map((el,i)=>{\r\n            if(el==object){\r\n                this.objects.splice(i,1);\r\n                this.batches.splice(i,1);\r\n            }\r\n        })\r\n    }\r\n\r\n    public getObjects()\r\n    {\r\n        return this.objects;\r\n    }\r\n\r\n    public getBatches()\r\n    {\r\n        return this.batches;\r\n    }\r\n\r\n    public render(app: PIXI.Application)\r\n    {\r\n        this.objects.forEach(object => {\r\n            object.render(app);\r\n        });\r\n    }\r\n\r\n    public makeContainer()\r\n    {\r\n        this.rebatchAll();\r\n        const container = new PIXI.Container();\r\n\r\n        this.objects.map((object)=>{\r\n            if(object instanceof MovieClip){\r\n                container.addChild(object.makeContainer(1));\r\n            }\r\n            else{\r\n                container.addChild(object.sprite);\r\n            }\r\n            \r\n        });\r\n        return container;\r\n    }\r\n\r\n\r\n    public exportStruct()\r\n    {\r\n        let newBatchs:any = [];\r\n        this.batches.map(batch=>{\r\n            if(batch.object instanceof MovieClip){\r\n                const tempBatch  = batch.object.exportStruct(batch.transform);\r\n                newBatchs.push(tempBatch);\r\n            }\r\n            else{\r\n                newBatchs.push({type:\"Graphic\",name:batch.object.name,transform:batch.transform,maker:batch.object.exportMaker()});\r\n            }\r\n        })\r\n        return newBatchs;\r\n    }\r\n}","import * as PIXI from \"pixi.js\";\r\n\r\nimport Frame from \"./Frame\";\r\nimport Transform from \"./Transform\";\r\nimport Graphic from \"./Graphic\";\r\nimport Game from \"./Game\";\r\nimport ResourceManager from \"./ResourceManager\";\r\n\r\n\r\n\r\nexport default class MovieClip {\r\n  //객체 정보\r\n  public name:string;\r\n  private transform: Transform;\r\n  private childs: (MovieClip|Graphic)[] = []\r\n  private parent?: MovieClip;\r\n  //프레임\r\n  private frames: Frame[] = []; //프레임은 1부터 시작\r\n  public currentFrame: number = 1;\r\n  public isPlaying: boolean = true;\r\n\r\n  public body:Matter.Body|null = null; \r\n\r\n  constructor(name:string,transform = Transform.init) {\r\n    this.name = name;\r\n    this.transform = transform;\r\n    this.addFrame();\r\n  }\r\n\r\n  public setTransform(transform:Transform)\r\n  {\r\n      this.transform = transform;\r\n  }\r\n\r\n  public getTransform()\r\n  {\r\n    return this.transform.clone();\r\n  }\r\n\r\n\r\n  public play() {\r\n    this.isPlaying = true;\r\n  }\r\n\r\n  public stop() {\r\n    this.isPlaying = false;\r\n  }\r\n\r\n  public gotoAndStop(frame: number) {\r\n    this.currentFrame = frame;\r\n    this.stop();\r\n  }\r\n\r\n  public gotoAndPlay(frame: number) {\r\n    this.currentFrame = frame;\r\n    this.play();\r\n  }\r\n\r\n  public getFrameCount() {\r\n    return this.frames.length;\r\n  }\r\n\r\n  public addFrame() {\r\n    this.frames.push(new Frame());\r\n    return this.getFrameCount();\r\n  }\r\n\r\n  public extendFramesTo(frame: number) {\r\n    const targetCount = frame - this.getFrameCount();\r\n    for (let i = 0; i < targetCount; i++) {\r\n      this.addFrame();\r\n    }\r\n  }\r\n\r\n  public getFrame(frame: number) {\r\n    return this.frames[frame-1];\r\n  }\r\n\r\n  public getCurrentFrame() {\r\n    return this.getFrame(this.currentFrame);\r\n  }\r\n\r\n  public addObject(Object: MovieClip | Graphic, frames: number[], transforms: Transform[]) {\r\n    frames.forEach((frame,i) => {\r\n      this.extendFramesTo(frame);\r\n      this.getFrame(frame).addObject(Object,transforms[i]);\r\n      this.childs.push(Object);\r\n      Object.setParent(this);\r\n    });\r\n  }\r\n\r\n  public removeObject(object: MovieClip|Graphic,frameNum:number)\r\n  {\r\n    const frame = this.getFrame(frameNum);\r\n    frame.removeObject(object);\r\n    this.childs.map((el,i)=>{\r\n      if(el==object){\r\n          this.childs.splice(i,1);\r\n      }\r\n  })\r\n  }\r\n\r\n  public getChild(num:number)\r\n  {\r\n    return this.childs[num];\r\n  }\r\n\r\n  public getParent()\r\n  {\r\n      return this.parent;\r\n  }\r\n  \r\n  public setParent(parent:MovieClip)\r\n  {\r\n      this.parent = parent;\r\n  }\r\n\r\n  public update(app: PIXI.Application, transform: Transform = Transform.init,init:boolean = false) {\r\n    //프레임 재생 처리\r\n    if(this.getFrameCount()<=1)\r\n    {\r\n      this.isPlaying = false;\r\n    }\r\n\r\n    if(this.isPlaying)\r\n    {\r\n      if(this.currentFrame == this.getFrameCount())\r\n      {\r\n        this.currentFrame=1;\r\n      }\r\n      else{\r\n        this.currentFrame+=1;\r\n      }\r\n    }\r\n    //그리기 처리\r\n    this.getCurrentFrame().update(app, transform.calcChildTransform(this.transform),this.isPlaying||init);\r\n  }\r\n\r\n  public render(app: PIXI.Application)\r\n  {\r\n    this.getCurrentFrame().render(app);\r\n  }\r\n\r\n  public makeContainer(frame:number)\r\n  {\r\n    const container = this.getFrame(frame).makeContainer();\r\n    container.setTransform(this.transform.x,this.transform.y,this.transform.scaleX,this.transform.scaleY,this.transform.roatation);\r\n    return container;\r\n  }\r\n\r\n  public getBound()\r\n  {\r\n    const container = this.makeContainer(1);\r\n    container.angle = 0;\r\n    const bound = this.makeContainer(1).getBounds();\r\n    container.destroy();\r\n    return bound;\r\n  }\r\n\r\n  public exportStruct(transform:Transform)\r\n  {\r\n    let frames:any = [];\r\n    this.frames.map((frame)=>{\r\n      frames.push(frame.exportStruct());\r\n    }) \r\n    let struct = {type:\"MovieClip\",name:this.name,\r\n                 transform:transform,\r\n                 frames:frames,\r\n                 maker:this.exportMaker()}\r\n    return struct;\r\n  }\r\n\r\n  public exportMaker()\r\n  {\r\n    //makers = [];\r\n    //makers.push({type:\"MovieClip\",name:this.name,transform:this.transform});\r\n    // this.childs.map((child)=>{\r\n    //   makers.push(child.exportMaker())\r\n    // })\r\n    return {type:\"MovieClip\",name:this.name,transform:this.transform};\r\n  }\r\n\r\n  public exportJson()\r\n  {\r\n    return JSON.stringify(this.exportStruct(new Transform(0,0)));\r\n  }\r\n\r\n  static importJson(json:string,rm:ResourceManager,game:Game|undefined = undefined)\r\n  {\r\n    const struct  = JSON.parse(json);\r\n    const clip = this.make(struct.maker,rm,game);\r\n    clip.importStruct(struct,rm,game);\r\n    return clip;\r\n  }\r\n\r\n  public importStruct(struct:any,rm:ResourceManager,game:Game|undefined = undefined)\r\n  {\r\n    struct.frames.map((batches:any,i:number)=>{\r\n      batches.map((batch:any)=>{\r\n        const object = MovieClip.make(batch.maker,rm,game);\r\n        this.addObject(object,[i+1],[Transform.fromObject(batch.transform)]);\r\n        if(object instanceof MovieClip)\r\n        {\r\n          object.importStruct(batch,rm,game);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  static make(maker:any,resourceManager:ResourceManager,game:Game|undefined = undefined)\r\n  {\r\n    let object:any;\r\n    const transform = Transform.fromObject(maker.transform);\r\n    if(maker.type == \"MovieClip\"){\r\n      object = new MovieClip(maker.name,transform);\r\n    }\r\n    else { //Graphic\r\n      object = new Graphic(maker.name,transform,resourceManager,maker.texture,maker.width,maker.height);\r\n    }\r\n    if(game){\r\n      game.addObject(maker.name, object);\r\n    }\r\n    return object;\r\n  }\r\n}","import * as PIXI from \"pixi.js\";\r\nimport imageToBase64 from \"image-to-base64\"\r\n\r\n\r\n\r\nexport default class ResourceManager {\r\n    private loader = new PIXI.Loader();\r\n    private loading: number = 0;\r\n\r\n    private queue: { name: string, data: string }[] = [];\r\n    private struct:{name:string,data:string}[] = [];\r\n\r\n    private callBack = ()=>{};\r\n    constructor() {\r\n        this.loader.on(\"complete\", ()=>{this.callBack();this.callBack = ()=>{}});\r\n    }\r\n\r\n    public add(name: string, data: string) {\r\n        this.queue.push({ name: name, data: data });\r\n        return this;\r\n    }\r\n\r\n    public load(callback:()=>void) {\r\n        this.callBack = callback;\r\n        this.loading = this.queue.length;\r\n\r\n        for (let i = 0; i < this.queue.length; i++) {\r\n            const el = this.queue[i];\r\n\r\n            imageToBase64(el.data).then(\r\n                (response: string) => {\r\n                    this.addDirectBase64(el.name,\"data:image/png;base64,\"+response);\r\n                    this.onConvert();\r\n                }\r\n            ).catch(\r\n                (error: string) => {\r\n                    this.onConvert();\r\n                }\r\n            )\r\n        }\r\n        this.queue = [];\r\n        return this;\r\n    }\r\n\r\n    private onConvert() {\r\n        this.loading--;\r\n        if (this.loading == 0) {\r\n            this.loader.load();\r\n        }\r\n    }\r\n\r\n    public getTexture(name: string) {\r\n        return this.loader.resources[name].texture;\r\n    }\r\n\r\n    public exportJson()\r\n    {\r\n        return JSON.stringify(this.struct);\r\n    }\r\n\r\n    public importJson(json:string,callBack:()=>void)\r\n    {\r\n        \r\n        this.struct = JSON.parse(json);\r\n        this.struct.map(el=>{\r\n            this.loader.add(el.name, el.data);\r\n        })\r\n        this.loaderLoad(callBack);\r\n    }\r\n\r\n    public loaderLoad(callBack:()=>void)\r\n    {\r\n        this.callBack = callBack;\r\n        this.loader.load();\r\n    }\r\n\r\n    public addDirectBase64(name:string,data:string)\r\n    {\r\n        const base64 = data;\r\n        this.loader.add(name,base64);\r\n        this.struct.push({name:name,data:base64});\r\n        return this;\r\n    }\r\n}\r\n\r\n\r\n","import * as PIXI from \"pixi.js\";\r\nimport Transform from \"./Transform\";\r\nimport MovieClip from \"./MovieClip\";\r\nimport ResourceManager from \"./ResourceManager\";\r\n\r\nexport default class Graphic {\r\n\r\n    public name:string;\r\n    public sprite:PIXI.Sprite;\r\n\r\n    private transform:Transform;\r\n    public width?:number;\r\n    public height?:number;\r\n\r\n    private parent?:MovieClip;\r\n    public texId:string;\r\n    \r\n    public body:Matter.Body|null = null; \r\n\r\n    public getParent()\r\n    {\r\n        return this.parent;\r\n    }\r\n    \r\n    public setParent(parent:MovieClip)\r\n    {\r\n        this.parent = parent;\r\n    }\r\n\r\n    public setTransform(transform:Transform)\r\n    {\r\n        this.transform = transform;\r\n        this.sprite.setTransform(transform.x,transform.y,transform.scaleX,transform.scaleY,transform.roatation);\r\n    }\r\n\r\n    public getTransform()\r\n    {\r\n        return this.transform.clone();\r\n    }\r\n\r\n    constructor(name:string,transform:Transform,resourceManager:ResourceManager,texId:string,width?:number,height?:number){\r\n        this.name = name;\r\n        this.texId = texId;\r\n        this.transform = transform;\r\n        this.sprite = PIXI.Sprite.from(resourceManager.getTexture(texId));\r\n\r\n        if(width)\r\n            this.width = width;\r\n        if(height)\r\n            this.height = height;\r\n        \r\n        this.width = this.sprite.width;\r\n        this.height = this.sprite.height;\r\n    }\r\n\r\n    public update(app: PIXI.Application, transform: Transform = Transform.init) {\r\n        const newTransform = transform.calcChildTransform(this.transform);\r\n        this.sprite.transform.position.set(newTransform.x,newTransform.y);\r\n        this.sprite.transform.rotation = newTransform.roatation;\r\n        this.sprite.scale.set(newTransform.scaleX,newTransform.scaleY);\r\n        if(this.width)\r\n            this.sprite.width = this.width;\r\n        if(this.height)\r\n            this.sprite.height = this.height;\r\n\r\n        app.renderer.render(this.sprite,undefined,false);\r\n    }\r\n\r\n    public render(app: PIXI.Application)\r\n    {\r\n        app.renderer.render(this.sprite,undefined,false);\r\n    }\r\n\r\n    public exportMaker()\r\n    {\r\n      return {type:\"Graphic\",name:this.name,transform:this.transform,texture:this.texId,width:this.width,height:this.height};\r\n    }\r\n}","import React, { useRef, useEffect } from 'react'\r\nimport Game from '../GameEngine/Game';\r\nimport ResourceManager from '../GameEngine/ResourceManager';\r\nimport BlockFunctions from '../GameEngine/blockFuncs/BlockFunctions';\r\nimport MovieClip from '../GameEngine/MovieClip';\r\nimport { Sprite } from 'pixi.js';\r\n\r\n\r\ninterface Props{\r\n    width:number,\r\n    height:number,\r\n    gameJson:string,\r\n    className?:string,\r\n}\r\n\r\n\r\nconst GameScreen:React.FC<Props> = (props)=>{\r\n\r\n    let game = useRef<Game>();\r\n    let stageDiv = useRef<HTMLElement | null>(null);\r\n    \r\n    const init = ()=>{\r\n        if(!stageDiv.current) {\r\n            return;\r\n        }\r\n        if(props.gameJson==\"\"){\r\n            return;\r\n        }\r\n        game.current = new Game(props.width,props.height,stageDiv.current);\r\n        \r\n        try{\r\n            const gameFile = JSON.parse(props.gameJson);\r\n            const rm = new ResourceManager();\r\n            rm.importJson(gameFile.resource, () => {\r\n                if (game.current == undefined) {\r\n                    return;\r\n                }\r\n                game.current.mainClip = MovieClip.importJson(gameFile.objects, rm, game.current);\r\n                eval(`(function(game,blockFunctions){${gameFile.code}})`)(game.current, BlockFunctions);\r\n                game.current.start();\r\n            });\r\n        }\r\n        catch(e){\r\n            alert(\"에러 발생\")\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        //초기화\r\n        init();\r\n        return () => {\r\n            game.current?.destroy();\r\n        }\r\n    },[]);\r\n    return (\r\n        <div className = {props.className} style = {{border:\"#F3F3F3 solid 3px\"}} ref={ref => { stageDiv.current = ref }} />\r\n    );\r\n}\r\n\r\n\r\nexport default GameScreen;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"GamePlayer\":\"GamePlayer_GamePlayer__3oK38\",\"GameScreen\":\"GamePlayer_GameScreen__sUThz\"};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      (\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import * as PIXI from 'pixi.js';\r\nimport FrontUI from './FrontUI';\r\n\r\nexport default class TransformEditor {\r\n    private app: PIXI.Application;\r\n    private container = new PIXI.Container();\r\n\r\n    private frontUI:FrontUI;\r\n    private border = new PIXI.Graphics();\r\n    private points: PIXI.Graphics[] = [];\r\n    private style: { color: number, thickness: number, radius: number };\r\n\r\n    public transformChanged:((index:number,transform:PIXI.Transform)=>void) = ()=>{};\r\n    public selectedTargetChanged:((index:number|undefined)=>void) = ()=>{};\r\n    public selectedTargetMoving:(x:number,y:number)=>void = ()=>{};\r\n\r\n    constructor(app: PIXI.Application, style: { color: number, thickness: number, radius: number }) {\r\n        this.app = app;\r\n        this.style = style;\r\n\r\n        app.ticker.add(()=>{this.tick()});\r\n        this.init();\r\n        this.frontUI = new FrontUI(app);\r\n    }\r\n\r\n    private tick() {\r\n        if(this.targetIndex==undefined)\r\n            return;\r\n\r\n        const target = this.objects[this.targetIndex];\r\n        const bound = target.getBounds();\r\n        this.frontUI.drawRect(5,0x66CC00,1,bound.x-2.5,bound.y-2.5,bound.width+5,bound.height+5,0);\r\n        // alert(\"hello\");\r\n        // if(!this.app)\r\n        //     return;\r\n        // this.app.renderer.render(this.container, undefined, false);\r\n        // this.container.destroy();\r\n        // this.container = new PIXI.Container();\r\n    }\r\n\r\n    private init() {\r\n        for (let i = 0; i < 10; i++) {\r\n            const point = new PIXI.Graphics();\r\n            point.beginFill(this.style.color);\r\n            point.drawCircle(0, 0, this.style.radius);\r\n\r\n            point.addListener(\"mousedown\", () => { this.pointMouseDown(i) });\r\n            this.points.push(point);\r\n        }\r\n\r\n        this.app.stage.addListener(\"mouseup\", ()=>{this.mouseUp()});\r\n        this.app.stage.addListener(\"mousemove\", (e) => { this.mouseMove(e.data.global.x, e.data.global.y) });\r\n    }\r\n\r\n    //Points\r\n    //    8\r\n    //0   1   2\r\n    //3   9   4\r\n    //5   6   7\r\n    private state:State = State.none;\r\n\r\n    private objects: PIXI.DisplayObject[] = [];\r\n    private targetIndex:number|undefined;\r\n\r\n    public setObjects(objects:PIXI.DisplayObject[])\r\n    {\r\n        this.objects = objects;\r\n        for(let i = 0;i < objects.length;i++)\r\n        {\r\n            objects[i].removeAllListeners();\r\n            objects[i].addListener(\"mousedown\",()=>{this.targetMouseDown(i)});\r\n            objects[i].addListener(\"mouseover\",()=>{this.mouseOver(objects[i])});\r\n            objects[i].addListener(\"mouseout\",()=>{this.mouseOut(objects[i])});\r\n            objects[i].interactive = true;\r\n        }\r\n        this.state = State.none;\r\n        if(objects.length!=0)\r\n            this.setTarget(this.targetIndex = objects.length-1)\r\n        else this.removeTarget();\r\n    }\r\n\r\n    public setTarget(targetIndex:number) {\r\n        this.targetIndex = targetIndex;\r\n        this.selectedTargetChanged(this.targetIndex);\r\n    }\r\n\r\n    public removeTarget() {\r\n        this.targetIndex = undefined;\r\n        this.selectedTargetChanged(undefined);\r\n    }\r\n\r\n    public mouseOver(target:PIXI.DisplayObject)\r\n    {\r\n        if(this.state==State.moving)\r\n            return;\r\n        target.alpha = 0.7;\r\n    }\r\n\r\n    public mouseOut(target:PIXI.DisplayObject)\r\n    {\r\n        target.alpha = 1;\r\n    }\r\n\r\n    //events\r\n    private pointMouseDown(num: number) {\r\n        \r\n    }\r\n\r\n    private targetMouseDown(index:number) {\r\n        this.setTarget(index);\r\n        this.state = State.moving;\r\n    }\r\n\r\n    private mouseUp() {\r\n        if(this.targetIndex == undefined)\r\n            return;\r\n\r\n        if(this.state == State.moving)\r\n        {\r\n            const index = this.targetIndex;\r\n            this.transformChanged(index,this.objects[index].transform);\r\n            this.state = State.none;\r\n        }\r\n    }\r\n\r\n    private prevMouseX: number = 0;\r\n    private prevMouseY: number = 0;\r\n\r\n    private mouseMove(x: number, y: number) {\r\n        const deltaMouseX = x - this.prevMouseX;\r\n        const deltaMouseY = y - this.prevMouseY;\r\n        this.prevMouseX = x;\r\n        this.prevMouseY = y;\r\n\r\n        if(this.targetIndex == undefined)\r\n            return;\r\n        const target = this.objects[this.targetIndex];\r\n\r\n        if (this.state == State.moving) {\r\n            target.transform.position.x += deltaMouseX;\r\n            target.transform.position.y += deltaMouseY;\r\n            this.selectedTargetMoving(target.transform.position.x,target.transform.position.y);\r\n        }\r\n    }\r\n    //calcs\r\n}\r\n\r\n\r\nenum State{\r\n    none,\r\n    moving,\r\n}","import React, { useEffect, useRef } from 'react'\r\nimport * as PIXI from 'pixi.js';\r\nimport MovieClip from '../GameEngine/MovieClip';\r\nimport Graphic from '../GameEngine/Graphic';\r\nimport TransformEditor from './ScreenUtils/TransformEditor';\r\nimport Frame from '../GameEngine/Frame';\r\n\r\n\r\ninterface Props {\r\n    width: number,\r\n    height: number,\r\n    frame: number,\r\n    movieClip: MovieClip,\r\n    selectedTargetChanged:(index:number|undefined)=>void,\r\n    selectedTargetMoving:(x:number,y:number)=>void,\r\n    resetFunc:Function,\r\n    className:string,\r\n}\r\n\r\n/*\r\n★TODO\r\n0.  만들기 이전에 받는 객체는 모두 PIXIObject로 처리, 외부에서 EngineObject로 변환 -> \r\n    아이디가 잇으면 좋을수도?(아이디는 나중에 처리해도 안늦음) index로처리해도 될듯?정해져있으니까?\r\n    추가나 제거 경우에는 이벤트로 처리하거나? 프레임 전체를 초기화해야할듯\r\n1.  UI graphic 함수화\r\n2.  Transform Editor는 별도 객체로 처리 -> 이벤트 발생\r\n3.  선택 클릭\r\n4.  드래그 선택\r\n5.  state 잘 정해서 마우스 이벤트 별로 정리\r\n*/\r\n\r\n\r\n\r\nlet app:PIXI.Application;\r\nlet container:PIXI.Container;\r\nlet transformEditor:TransformEditor;\r\nlet frame:Frame;\r\nlet gameObjects:(MovieClip|Graphic)[];\r\nlet pixiObjects:PIXI.DisplayObject[];\r\n\r\n\r\nconst Screen: React.FC<Props> = (props) => {\r\n    \r\n    const stageDiv = useRef<HTMLElement | null>(null);\r\n    const init = ()=>{\r\n        app  = new PIXI.Application({ width: props.width, height: props.height,backgroundColor:0xFFFFFF });\r\n        if(stageDiv.current)\r\n            stageDiv.current.appendChild(app.view);\r\n        transformEditor  = new TransformEditor(app, { color: 0x00CC99, radius: 1, thickness: 5 });\r\n        app.stage.interactive = true;\r\n        app.stage.interactiveChildren = true;\r\n        app.stage.hitArea = new PIXI.Rectangle(0, 0, app.renderer.width / app.renderer.resolution,\r\n            app.renderer.height / app.renderer.resolution);\r\n\r\n        transformEditor.transformChanged = (index, transform) => {\r\n            const transform_ = gameObjects[index].getTransform();\r\n            transform_.x = transform.position.x;\r\n            transform_.y = transform.position.y;\r\n            gameObjects[index].setTransform(transform_);\r\n            frame.updateBatchToCurrentState();\r\n        };\r\n\r\n        transformEditor.selectedTargetChanged = props.selectedTargetChanged;\r\n\r\n        transformEditor.selectedTargetMoving = props.selectedTargetMoving;\r\n\r\n        props.resetFunc(reset);\r\n    }\r\n\r\n    const reset = (movieClip:MovieClip)=>{\r\n        if(container)\r\n            app.stage.removeChild(container);\r\n        \r\n        container = new PIXI.Container();\r\n        container.interactiveChildren = true;\r\n        container.interactive = true;\r\n        app.stage.addChild(container);\r\n        frame = movieClip.getFrame(props.frame);\r\n        frame.rebatchAll();\r\n        gameObjects = frame.getObjects();\r\n        \r\n        pixiObjects = [];\r\n        for(let i = 0; i < gameObjects.length;i++){\r\n            \r\n            const gameObject = gameObjects[i];\r\n            let pixiObject:PIXI.DisplayObject;\r\n    \r\n            if(gameObject instanceof MovieClip){\r\n                pixiObject=gameObject.makeContainer(1)\r\n            }\r\n            else{\r\n                pixiObject=gameObject.sprite;\r\n            }\r\n    \r\n            container.addChild(pixiObject);\r\n            pixiObjects.push(pixiObject);\r\n        }\r\n        transformEditor.setObjects(pixiObjects);\r\n    }\r\n\r\n    \r\n    useEffect(() => {\r\n        //초기화\r\n        init();\r\n        return () => {\r\n            //마지막\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div className = {props.className} ref={ref => { stageDiv.current = ref }} />\r\n    );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// const Screen: React.FC<Props> = (props) => {\r\n\r\n//     let stageDiv: HTMLElement | null;\r\n//     const app = new PIXI.Application({ width: props.width, height: props.height });\r\n//     const rect = new PIXI.Graphics();\r\n//     let draggingObject:{pixiObject:PIXI.DisplayObject,gameObject:(MovieClip|Graphic)}|null;\r\n\r\n\r\n//     useEffect(() => {\r\n//         //초기화\r\n//         stageDiv?.appendChild(app.view);\r\n//         app.stage.addChild(rect);\r\n//         app.stage.interactive = true;\r\n//         app.stage.interactiveChildren = true;\r\n//         app.stage.hitArea = new PIXI.Rectangle(0, 0, app.renderer.width/app.renderer.resolution, app.renderer.height/app.renderer.resolution);\r\n//         rect.zIndex = 0;\r\n//         app.ticker.add((delta)=>{\r\n\r\n//         });\r\n//     }, [])\r\n\r\n//     useEffect(() => {\r\n//         const container = new PIXI.Container();\r\n//         container.pivot.set(0.5, 0.5);\r\n//         container.position.set(props.width / 2, props.height / 2);\r\n//         const frame = props.movieClip.getFrame(props.frame);\r\n//         frame.rebatchAll();\r\n//         frame.getObjects().map((object) => {\r\n//             let pixiObject:PIXI.DisplayObject;\r\n//             if (object instanceof MovieClip) {\r\n//                 pixiObject = object.makeContainer(1);\r\n//             }\r\n//             else {\r\n//                 pixiObject = object.sprite;\r\n//             }\r\n\r\n//             pixiObject.interactive = true;\r\n//             pixiObject.addListener('mouseover',(e)=>{objectOver(e,object)})\r\n//             pixiObject.addListener('mouseout',(e)=>{objectOut(e,object)})\r\n//             pixiObject.addListener('mousedown',(e)=>{objectMouseDown(e,object)})\r\n//             app.stage.addListener('mouseup',mouseUp)\r\n//             app.stage.addListener('mousemove',mouseMove)\r\n//             container.addChild(pixiObject);\r\n//         });\r\n//         app.stage.addChild(container);\r\n//     })\r\n\r\n//     const objectOver = (event:PIXI.interaction.InteractionEvent,gameObject:Graphic|MovieClip)=>{\r\n//         const bound  = event.target.getBounds()\r\n//         rect.lineStyle(5, 0xFF0000);\r\n//         rect.drawRect(bound.x,bound.y,bound.width,bound.height);\r\n//     }\r\n//     const objectOut = (event:PIXI.interaction.InteractionEvent,gameObject:Graphic|MovieClip)=>{\r\n//         rect.clear();\r\n//     }\r\n//     const objectMouseDown = (event:PIXI.interaction.InteractionEvent,gameObject:Graphic|MovieClip)=>{\r\n//         draggingObject = {pixiObject:event.target,gameObject:gameObject};\r\n//     }\r\n//     const mouseUp = ()=>{\r\n//         if(draggingObject)\r\n//         {\r\n//             draggingObject.pixiObject.alpha = 1;\r\n//         }\r\n//         draggingObject = null;\r\n//         (\"up\");\r\n//     }\r\n\r\n//     let prevMouseX:number;\r\n//     let prevMouseY:number;\r\n\r\n//     const mouseMove = (event:PIXI.interaction.InteractionEvent)=>{\r\n//         const deltaMouseX = event.data.global.x - prevMouseX;\r\n//         const deltaMouseY = event.data.global.y - prevMouseY;\r\n//         prevMouseX = event.data.global.x;\r\n//         prevMouseY = event.data.global.y;\r\n\r\n//         if(draggingObject)\r\n//         {   \r\n//             const bound = draggingObject.pixiObject.getBounds();\r\n//             rect.clear();\r\n//             rect.lineStyle(5, 0x00CC66);\r\n//             rect.drawRect(bound.x,bound.y,bound.width,bound.height);\r\n//             draggingObject.pixiObject.transform.position.x+=deltaMouseX;\r\n//             draggingObject.pixiObject.transform.position.y+=deltaMouseY;\r\n//             draggingObject.pixiObject.alpha = 0.7;\r\n//         }\r\n//     }\r\n\r\n\r\n//     return (\r\n//         <div ref={ref => { stageDiv = ref }} />\r\n//     );\r\n// }\r\n\r\nexport default Screen;","import * as PIXI from 'pixi.js';\r\n\r\nexport default class FrontUI {\r\n    private app: PIXI.Application;\r\n    private container = new PIXI.Container();\r\n\r\n    constructor(app: PIXI.Application) {\r\n        this.app = app;\r\n\r\n        app.ticker.add(()=>{this.tick()});\r\n        this.app.stage.addChild(this.container);\r\n    }\r\n\r\n    private tick()\r\n    {\r\n        if(!this.app)\r\n            return;\r\n    }\r\n\r\n    public drawRect(lineWidth: number, lineColor: number, alpha: number, x: number, y: number, width: number, height: number, rotation: number, pivot: { x: number, y: number } = { x: 0, y: 0 }) {\r\n        this.drawShape(lineWidth, lineColor, alpha, (graphic: PIXI.Graphics) => {\r\n            graphic.drawRect(x, y, width, height);\r\n            graphic.rotation = rotation;\r\n            graphic.pivot.set(pivot.x, pivot.y);\r\n        });\r\n    }\r\n\r\n    public drawCircle(lineWidth: number, lineColor: number, alpha: number, x: number, y: number, radius: number, rotation: number, pivot: { x: number, y: number } = { x: 0, y: 0 }) {\r\n        this.drawShape(lineWidth, lineColor, alpha, (graphic: PIXI.Graphics) => {\r\n            graphic.drawCircle(x, y, radius);\r\n            graphic.rotation = rotation;\r\n        });\r\n    }\r\n\r\n    public drawLine(lineWidth: number, lineColor: number, alpha: number, x1: number, y1: number, x2: number, y2: number, rotation: number, pivot: { x: number, y: number } = { x: 0, y: 0 }) {\r\n        this.drawShape(lineWidth, lineColor, alpha, (graphic: PIXI.Graphics) => {\r\n            graphic.moveTo(x1, y1).lineTo(x2, y2);\r\n            graphic.rotation = rotation;\r\n        });\r\n    }\r\n\r\n    public drawShape(lineWidth: number, lineColor: number, alpha: number, drawing: (graphic:PIXI.Graphics) => void) {\r\n        this.container.removeChildren();\r\n        const graphic = new PIXI.Graphics();\r\n        graphic.lineStyle(lineWidth, lineColor, alpha);\r\n        drawing(graphic);\r\n        this.container.addChild(graphic);\r\n    }\r\n}","import * as Blockly from 'blockly/core';\r\n\r\nBlockly.Blocks['setpos'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"무비클립\");\r\n    this.appendValueInput(\"X\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"의 위치를\")\r\n        .appendField(\"X:\");\r\n    this.appendValueInput(\"Y\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"Y:\");\r\n    this.appendDummyInput()\r\n        .appendField(\"로 설정\");\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(230);\r\n this.setTooltip(\"좌표 설정\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getobject'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"objectName\")\r\n        .setCheck(\"String\")\r\n        .appendField(\"오브젝트 :\");\r\n    this.setOutput(true, \"object\");\r\n    this.setColour(230);\r\n this.setTooltip(\"오브젝트를 이름으로 찾습니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getpos'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트의 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"x\",\"x\"], [\"y\",\"y\"]]), \"type\")\r\n        .appendField(\"좌표\");\r\n    this.setOutput(true, \"Number\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['gametick'] = {\r\n  init: function() {\r\n    this.appendStatementInput(\"blocks\")\r\n        .setCheck(null)\r\n        .appendField(\"게임 틱\");\r\n    this.setColour(255);\r\n this.setTooltip(\"게임 틱마다 내용을 반복합니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getmousestate'] = {\r\n  init: function() {\r\n    this.appendDummyInput()\r\n        .appendField(\"마우스가\")\r\n        .appendField(new Blockly.FieldDropdown([[\"누른상태\",\"isDown\"], [\"뗀상태\",\"isUp\"]]), \"stateType\")\r\n        .appendField(\"인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"마우스가 눌린 상태인지 뗀 상태인지 확인합니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getmouseevent'] = {\r\n  init: function() {\r\n    this.appendDummyInput()\r\n        .appendField(\"마우스를 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"누른\",\"isDown\"], [\"뗀\",\"isUp\"], [\"클릭한\",\"isClick\"]]), \"eventType\")\r\n        .appendField(\"순간인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"마우스가 이벤트당  한번만 True를 반환합니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getkeyboardstate'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"keycode\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"다음 키가 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"눌린\",\"isDown\"], [\"뗀\",\"isUp\"]]), \"statetype\")\r\n        .appendField(\"상태인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getkeyboardevent'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"keycode\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"다음 키를 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"누른\",\"isDown\"], [\"뗀\",\"isUp\"]]), \"eventType\")\r\n        .appendField(\"순간인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['addphysics'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트에 물리엔진 추가\");\r\n    this.appendValueInput(\"friction\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"마찰\");\r\n    this.appendValueInput(\"mass\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"질량\");\r\n    this.appendDummyInput()\r\n        .appendField(\"고정된 물체인가? \")\r\n        .appendField(new Blockly.FieldCheckbox(\"FALSE\"), \"isstatic\");\r\n    this.setInputsInline(false);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(0);\r\n this.setTooltip(\"물리세계에 던진다!\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['addforce'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트에\");\r\n    this.appendValueInput(\"X\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"X:\");\r\n    this.appendValueInput(\"Y\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"Y:\");\r\n    this.appendDummyInput()\r\n        .appendField(\"만큼 힘주기\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['setvelocity'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트의 속도를\");\r\n    this.appendValueInput(\"X\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"X:\");\r\n    this.appendValueInput(\"Y\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"Y:\");\r\n    this.appendDummyInput()\r\n        .appendField(\"로 정하기\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getvelocity'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트의 속도\")\r\n        .appendField(new Blockly.FieldDropdown([[\"x\",\"x\"], [\"y\",\"y\"]]), \"type\")\r\n        .appendField(\"구하기\");\r\n    this.setOutput(true, \"Number\");\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['checkcollision'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"a\")\r\n        .setCheck(null)\r\n        .appendField(\"오브젝트\");\r\n    this.appendValueInput(\"b\")\r\n        .setCheck(null)\r\n        .appendField(\"오브젝트\");\r\n    this.appendDummyInput()\r\n        .appendField(\"사이의 충돌 확인\");\r\n    this.setInputsInline(true);\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['mouseevent'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\");\r\n    this.appendStatementInput(\"blocks\")\r\n        .setCheck(null)\r\n        .appendField(new Blockly.FieldDropdown([[\"눌림\",\"mousedown\"], [\"뗌\",\"mouseup\"], [\"움직임\",\"mousemove\"], [\"올림\",\"mouseover\"], [\"클릭\",\"mouseclick\"]]), \"type\")\r\n        .appendField(\"이벤트\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['gamestart'] = {\r\n  init: function() {\r\n    this.appendStatementInput(\"blocks\")\r\n        .setCheck(null)\r\n        .appendField(\"시작\");\r\n    this.setColour(50);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['setrotation'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"오브젝트\");\r\n    this.appendValueInput(\"NAME\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"의 각도를\");\r\n    this.appendDummyInput()\r\n        .appendField(\"로 설정\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['gamestart'] = function(block:any) {\r\n    var statements_blocks = Blockly.JavaScript.statementToCode(block, 'blocks');\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"gameStart\"](game, ()=>{\r\n        ${statements_blocks}\r\n    });\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['addforce'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_x = Blockly.JavaScript.valueToCode(block, 'X', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_y = Blockly.JavaScript.valueToCode(block, 'Y', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"addForce\"](game, ${value_object}, ${value_x}, ${value_y});\\n`;\r\n    return code;\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['addphysics'] = function (block: any) {\r\n  var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var value_friction = Blockly.JavaScript.valueToCode(block, 'friction', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var value_mass = Blockly.JavaScript.valueToCode(block, 'mass', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var checkbox_isstatic = block.getFieldValue('isstatic') == 'TRUE';\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"addPhysics\"](game, ${value_object}, ${value_friction}, ${value_mass}, ${checkbox_isstatic});\\n`;\r\n  return code;\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['checkcollision'] = function(block:any) {\r\n    var value_a = Blockly.JavaScript.valueToCode(block, 'a', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_b = Blockly.JavaScript.valueToCode(block, 'b', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"checkCollision\"](game, ${value_a}, ${value_b})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['gametick'] = function (block: any) {\r\n  var statements_blocks = Blockly.JavaScript.statementToCode(block, 'blocks');\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"gameTick\"](game, ()=>{\r\n      ${statements_blocks}\r\n  });\\n`;\r\n  return code;\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getkeyboardevent'] = function(block:any) {\r\n  var dropdown_eventtype = block.getFieldValue('eventType');\r\n  var value_keycode = Blockly.JavaScript.valueToCode(block, 'keycode', Blockly.JavaScript.ORDER_ATOMIC);\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"getKeyboardEvent\"](game, \"${dropdown_eventtype}\", ${value_keycode})`;\r\n  // TODO: Change ORDER_NONE to the correct strength.\r\n  return [code, Blockly.JavaScript.ORDER_NONE];\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getkeyboardstate'] = function(block:any) {\r\n    var dropdown_statetype = block.getFieldValue('statetype');\r\n    var value_keycode = Blockly.JavaScript.valueToCode(block, 'keycode', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getKeyboardState\"](game, \"${dropdown_statetype}\", ${value_keycode})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getmouseevent'] = function(block:any) {\r\n    var dropdown_eventtype = block.getFieldValue('eventType');\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getMouseEvent\"](game, \"${dropdown_eventtype}\")`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getmousestate'] = function(block:any) {\r\n    var dropdown_statetype = block.getFieldValue('stateType');\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getMouseState\"](game, \"${dropdown_statetype}\")`;\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  }","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getobject'] = function(block:any) {\r\n    var value_objectname = Blockly.JavaScript.valueToCode(block, 'objectName', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getObject\"](game, ${value_objectname})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getpos'] = function(block:any) {\r\n    var dropdown_type = block.getFieldValue('type');\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getPos\"](game, \"${dropdown_type}\", ${value_object})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getvelocity'] = function(block:any) {\r\n    var dropdown_type = block.getFieldValue('type');\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getVelocity\"](game, \"${dropdown_type}\", ${value_object})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['mouseevent'] = function(block:any) {\r\n  var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var dropdown_type = block.getFieldValue('type');\r\n  var statements_blocks = Blockly.JavaScript.statementToCode(block, 'blocks');\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"mouseEvent\"](game, ${value_object}, \"${dropdown_type}\",()=>{\r\n    ${statements_blocks}\r\n  })\\n`;\r\n  return code;\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['setpos'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_x = Blockly.JavaScript.valueToCode(block, 'X', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_y = Blockly.JavaScript.valueToCode(block, 'Y', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"setPos\"](game, ${value_object}, ${value_x}, ${value_y})\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['setvelocity'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_x = Blockly.JavaScript.valueToCode(block, 'X', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_y = Blockly.JavaScript.valueToCode(block, 'Y', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"setVelocity\"](game, ${value_object}, ${value_x}, ${value_y})\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['setrotation'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_name = Blockly.JavaScript.valueToCode(block, 'NAME', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"setPos\"](game, ${value_object}, ${value_name})\\n`;\r\n    return code;\r\n  };","import BlocklyJS from 'blockly/javascript';\r\n\r\nimport \"./customBlocks/definitions/definition\"\r\nimport \"./customBlocks/generators/gameStart\"\r\nimport \"./customBlocks/generators/addForce\"\r\nimport \"./customBlocks/generators/addPhysics\"\r\nimport \"./customBlocks/generators/checkCollision\"\r\nimport \"./customBlocks/generators/gameTick\"\r\nimport \"./customBlocks/generators/getKeyboardEvent\"\r\nimport \"./customBlocks/generators/getKeyboardState\"\r\nimport \"./customBlocks/generators/getMouseEvent\"\r\nimport \"./customBlocks/generators/getMouseState\"\r\nimport \"./customBlocks/generators/getObject\"\r\nimport \"./customBlocks/generators/getPos\"\r\nimport \"./customBlocks/generators/getVelocity\"\r\nimport \"./customBlocks/generators/mouseEvent\"\r\nimport \"./customBlocks/generators/setPos\"\r\nimport \"./customBlocks/generators/setVelocity\"\r\nimport \"./customBlocks/generators/setRotation\"\r\n\r\nexport const INITIAL_XML = '<xml xmlns=\"http://www.w3.org/1999/xhtml\"></xml>';\r\n\r\nexport const INITIAL_TOOLBOX_XML = \r\n`<xml xmlns=\"http://www.w3.org/1999/xhtml\" id=\"toolbox\" style=\"display: none;\">\r\n<category name=\"Logic\" colour=\"#5C81A6\">\r\n  <block type=\"controls_if\"></block>\r\n  <block type=\"logic_compare\">\r\n    <field name=\"OP\">EQ</field>\r\n  </block>\r\n  <block type=\"logic_operation\">\r\n    <field name=\"OP\">AND</field>\r\n  </block>\r\n  <block type=\"logic_negate\"></block>\r\n  <block type=\"logic_boolean\">\r\n    <field name=\"BOOL\">TRUE</field>\r\n  </block>\r\n  <block type=\"logic_null\"></block>\r\n  <block type=\"logic_ternary\"></block>\r\n</category>\r\n<category name=\"Loops\" colour=\"#5CA65C\">\r\n  <block type=\"controls_repeat_ext\">\r\n    <value name=\"TIMES\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">10</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"controls_whileUntil\">\r\n    <field name=\"MODE\">WHILE</field>\r\n  </block>\r\n  <block type=\"controls_for\">\r\n    <field name=\"VAR\" id=\"C(8;cYCF}~vSgkxzJ+{O\" variabletype=\"\">i</field>\r\n    <value name=\"FROM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"TO\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">10</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"BY\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"controls_forEach\">\r\n    <field name=\"VAR\" id=\"Cg!CSk/ZJo2XQN3=VVrz\" variabletype=\"\">j</field>\r\n  </block>\r\n  <block type=\"controls_flow_statements\">\r\n    <field name=\"FLOW\">BREAK</field>\r\n  </block>\r\n</category>\r\n<category name=\"Math\" colour=\"#5C68A6\">\r\n  <block type=\"math_round\">\r\n    <field name=\"OP\">ROUND</field>\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">3.1</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_number\">\r\n    <field name=\"NUM\">0</field>\r\n  </block>\r\n  <block type=\"math_single\">\r\n    <field name=\"OP\">ROOT</field>\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">9</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_trig\">\r\n    <field name=\"OP\">SIN</field>\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">45</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_constant\">\r\n    <field name=\"CONSTANT\">PI</field>\r\n  </block>\r\n  <block type=\"math_number_property\">\r\n    <mutation divisor_input=\"false\"></mutation>\r\n    <field name=\"PROPERTY\">EVEN</field>\r\n    <value name=\"NUMBER_TO_CHECK\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">0</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_arithmetic\">\r\n    <field name=\"OP\">ADD</field>\r\n    <value name=\"A\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"B\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_on_list\">\r\n    <mutation op=\"SUM\"></mutation>\r\n    <field name=\"OP\">SUM</field>\r\n  </block>\r\n  <block type=\"math_modulo\">\r\n    <value name=\"DIVIDEND\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">64</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"DIVISOR\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">10</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_constrain\">\r\n    <value name=\"VALUE\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">50</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"LOW\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"HIGH\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">100</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_random_int\">\r\n    <value name=\"FROM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"TO\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">100</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_random_float\"></block>\r\n</category>\r\n<category name=\"Text\" colour=\"#5CA68D\">\r\n  <block type=\"text_charAt\">\r\n    <mutation at=\"true\"></mutation>\r\n    <field name=\"WHERE\">FROM_START</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"q@$ZF(L?Zo/z\\`d{o.Bp!\" variabletype=\"\">text</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"text\">\r\n    <field name=\"TEXT\"></field>\r\n  </block>\r\n  <block type=\"text_append\">\r\n    <field name=\"VAR\" id=\":};P,s[*|I8+L^-.EbRi\" variabletype=\"\">item</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\"></field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_length\">\r\n    <value name=\"VALUE\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_isEmpty\">\r\n    <value name=\"VALUE\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\"></field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_indexOf\">\r\n    <field name=\"END\">FIRST</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"q@$ZF(L?Zo/z\\`d{o.Bp!\" variabletype=\"\">text</field>\r\n      </block>\r\n    </value>\r\n    <value name=\"FIND\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_join\">\r\n    <mutation items=\"2\"></mutation>\r\n  </block>\r\n  <block type=\"text_getSubstring\">\r\n    <mutation at1=\"true\" at2=\"true\"></mutation>\r\n    <field name=\"WHERE1\">FROM_START</field>\r\n    <field name=\"WHERE2\">FROM_START</field>\r\n    <value name=\"STRING\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"q@$ZF(L?Zo/z\\`d{o.Bp!\" variabletype=\"\">text</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_changeCase\">\r\n    <field name=\"CASE\">UPPERCASE</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_trim\">\r\n    <field name=\"MODE\">BOTH</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_print\">\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_prompt_ext\">\r\n    <mutation type=\"TEXT\"></mutation>\r\n    <field name=\"TYPE\">TEXT</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n</category>\r\n<category name=\"Lists\" colour=\"#745CA6\">\r\n  <block type=\"lists_indexOf\">\r\n    <field name=\"END\">FIRST</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_create_with\">\r\n    <mutation items=\"0\"></mutation>\r\n  </block>\r\n  <block type=\"lists_repeat\">\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">5</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_length\"></block>\r\n  <block type=\"lists_isEmpty\"></block>\r\n  <block type=\"lists_create_with\">\r\n    <mutation items=\"3\"></mutation>\r\n  </block>\r\n  <block type=\"lists_getIndex\">\r\n    <mutation statement=\"false\" at=\"true\"></mutation>\r\n    <field name=\"MODE\">GET</field>\r\n    <field name=\"WHERE\">FROM_START</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_setIndex\">\r\n    <mutation at=\"true\"></mutation>\r\n    <field name=\"MODE\">SET</field>\r\n    <field name=\"WHERE\">FROM_START</field>\r\n    <value name=\"LIST\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_getSublist\">\r\n    <mutation at1=\"true\" at2=\"true\"></mutation>\r\n    <field name=\"WHERE1\">FROM_START</field>\r\n    <field name=\"WHERE2\">FROM_START</field>\r\n    <value name=\"LIST\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_split\">\r\n    <mutation mode=\"SPLIT\"></mutation>\r\n    <field name=\"MODE\">SPLIT</field>\r\n    <value name=\"DELIM\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">,</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_sort\">\r\n    <field name=\"TYPE\">NUMERIC</field>\r\n    <field name=\"DIRECTION\">1</field>\r\n  </block>\r\n</category>\r\n<category name=\"Colour\" colour=\"#A6745C\">\r\n  <block type=\"colour_picker\">\r\n    <field name=\"COLOUR\">#ff0000</field>\r\n  </block>\r\n  <block type=\"colour_random\"></block>\r\n  <block type=\"colour_rgb\">\r\n    <value name=\"RED\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">100</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"GREEN\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">50</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"BLUE\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">0</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"colour_blend\">\r\n    <value name=\"COLOUR1\">\r\n      <shadow type=\"colour_picker\">\r\n        <field name=\"COLOUR\">#ff0000</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"COLOUR2\">\r\n      <shadow type=\"colour_picker\">\r\n        <field name=\"COLOUR\">#3333ff</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"RATIO\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">0.5</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n</category>\r\n<sep></sep>\r\n<category name=\"Custom Button\" colour=\"#A6745C\">\r\n  <button text=\"A button\" callbackKey=\"myFirstButtonPressed\"></button>\r\n</category>\r\n<category name=\"Variables\" colour=\"#A65C81\" custom=\"VARIABLE\"></category>\r\n<category name=\"Functions\" colour=\"#9A5CA6\" custom=\"PROCEDURE\"></category>\r\n<category name=\"Engine\" colour=\"#5ba55b\">\r\n<block type=\"gamestart\"></block>\r\n<block type=\"setpos\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"X\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"Y\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"getpos\">\r\n  <field name=\"type\">x</field>\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"gametick\"></block>\r\n<block type=\"getmousestate\">\r\n  <field name=\"stateType\">isDown</field>\r\n</block>\r\n<block type=\"getmouseevent\">\r\n  <field name=\"eventType\">isDown</field>\r\n</block>\r\n<block type=\"getkeyboardstate\">\r\n  <field name=\"statetype\">isDown</field>\r\n  <value name=\"keycode\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"getkeyboardevent\">\r\n  <field name=\"eventType\">isDown</field>\r\n  <value name=\"keycode\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"addphysics\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"friction\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0.1</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"mass\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0.0001</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"addforce\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"X\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"Y\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"setvelocity\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"X\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"Y\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"getvelocity\">\r\n  <field name=\"type\">x</field>\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"checkcollision\">\r\n  <value name=\"a\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"b\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"mouseevent\">\r\n  <field name=\"type\">mousedown</field>\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"setrotation\">\r\n      <value name=\"object\">\r\n        <block type=\"getobject\">\r\n          <value name=\"objectName\">\r\n            <block type=\"text\">\r\n              <field name=\"TEXT\"></field>\r\n            </block>\r\n          </value>\r\n        </block>\r\n      </value>\r\n      <value name=\"NAME\">\r\n        <block type=\"math_number\">\r\n          <field name=\"NUM\">0</field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n</category>\r\n</xml>`;\r\n\r\nconst INITIAL_TOOLBOX_CATEGORIES = [\r\n  {\r\n    name: 'Controls',\r\n    blocks: [\r\n      { type: 'controls_if' },\r\n      {\r\n        type: 'controls_repeat_ext',\r\n        values: {\r\n          TIMES: {\r\n            type: 'math_number',\r\n            shadow: true,\r\n            fields: {\r\n              NUM: 10,\r\n            },\r\n          },\r\n        },\r\n        statements: {\r\n          DO: {\r\n            type: 'text_print',\r\n            shadow: true,\r\n            values: {\r\n              TEXT: {\r\n                type: 'text',\r\n                shadow: true,\r\n                fields: {\r\n                  TEXT: 'abc',\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    name: 'Text',\r\n    blocks: [\r\n      { type: 'text' },\r\n      {\r\n        type: 'text_print',\r\n        values: {\r\n          TEXT: {\r\n            type: 'text',\r\n            shadow: true,\r\n            fields: {\r\n              TEXT: 'abc',\r\n            },\r\n          },\r\n        },\r\n      },\r\n    ],\r\n  },\r\n];\r\n","import React, { useState, useRef, useEffect } from 'react';\nimport styles from './App.module.css';\nimport Screen from './components/Screen';\nimport Graphic from './GameEngine/Graphic';\nimport Transform from './GameEngine/Transform';\nimport MovieClip from './GameEngine/MovieClip';\nimport ReactBlocklyComponent from 'react-blockly';\nimport parseWorkspaceXml from 'react-blockly/src/BlocklyHelper';\n\nimport { INITIAL_XML, INITIAL_TOOLBOX_XML } from './content';\nimport * as Blockly from 'blockly/core';\nimport ResourceManager from './GameEngine/ResourceManager';\n\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\"\nimport AppBar from '@material-ui/core/AppBar';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\n\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport ShareIcon from '@material-ui/icons/Share';\nimport EditIcon from '@material-ui/icons/Edit';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport SaveIcon from '@material-ui/icons/Save';\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\nimport Menu from '@material-ui/core/Menu';\n\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport Link from '@material-ui/core/Link';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton'\nimport { generateUUID } from './Utils';\nimport fileDownload from 'js-file-download';\nimport GameScreen from './components/GameScreen';\n\nimport ReactModal from './resizableWindow/index';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\n\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '& > *': {\n        margin: theme.spacing(1),\n      },\n    },\n    input: {\n      display: 'none',\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n    },\n    editProjectNameButton: {\n      marginRight: theme.spacing(2),\n    },\n    title: {\n      marginRight: theme.spacing(3),\n    },\n    shareButton:{\n      marginLeft: \"auto\",\n    },\n    runButton:{\n      position: \"absolute\",\n      transform: \"translate(calc(50vw - 100%), 0)\",\n      transformOrigin: \"-50% 0\"\n    },\n    Button:{\n      width: \"100%\",\n      height: \"100%\"\n    },\n    link:{\n      color:\"white\",\n      fontSize:\"15px\",\n    },\n  }),\n);\n\nlet mainClip = new MovieClip(\"root\");\nlet resourceManager = new ResourceManager();\nlet selectedIndex: number | undefined = undefined;\nlet updateScreen: Function = () => { };\nlet currentClip: MovieClip = mainClip;\n\nlet workspace: any;\nlet workspaceInit = false;\n\nconst App = () => {\n\n  const workspaceChange = (w:any)=>{\n    if(workspaceInit)\n      return;\n    console.log(\"적용!\");\n    workspaceInit=true;\n    workspace = w;\n  }\n  const [gameFile, setGameFile] = useState<string>(\"\");\n  const [objectName, setObjectName] = useState(\"\");\n  const [isMovieclip, setIsMovieclip] = useState(false);\n  const [selectedObject, setSelectedObject] = useState<MovieClip | Graphic | undefined>();\n  //xy view\n  const xel = useRef<HTMLDivElement|null>();\n  const yel = useRef<HTMLDivElement|null>();\n\n  const classes = useStyles();\n\n  const graphicOpen = (e: any) => {\n    const file = e.target.files[0];\n    if (!file)\n      return;\n    var reader = new FileReader();\n    reader.onload = function (e) {\n      let contents = e.target?.result;\n      if (contents) {\n        let uuid = generateUUID();\n        resourceManager.addDirectBase64(uuid, contents.toString()).loaderLoad(() => {\n          addGraphic(file.name, uuid);\n        });\n      }\n    };\n    reader.readAsDataURL(file);\n  }\n\n  const addGraphic = (name: string, texId: string) => {\n    const graphic = new Graphic(name, new Transform(0, 0), resourceManager, texId);\n    currentClip.addObject(graphic, [1], [new Transform(0, 0)]);\n    updateScreen(currentClip);\n  }\n\n  const changeCurrentClip = (clip: MovieClip) => {\n    currentClip = clip;\n    updateScreen(currentClip);\n    renderBreadcrumbs();\n  }\n\n  const selectedTargetChanged = (index: number | undefined) => {\n    selectedIndex = index;\n    if (index == undefined) {\n      setSelectedObject(undefined);\n      setObjectName(\"\");\n      setIsMovieclip(false);\n      return;\n    }\n    const nselectedObject = currentClip.getFrame(1).getObjects()[index];\n    const pos = nselectedObject.getTransform();\n    setSelectedObject(nselectedObject);\n    setXYPos(pos.x,pos.y);\n    if (!nselectedObject)\n      return;\n\n    setObjectName(nselectedObject.name);\n    setIsMovieclip(nselectedObject instanceof MovieClip);\n  }\n\n  const onNameInputChanged = (event: any) => {\n    if (selectedIndex == undefined) {\n      setObjectName(\"\");\n      return;\n    }\n    setObjectName(event.target.value);\n    if (selectedObject)\n      selectedObject.name = event.target.value;\n  }\n\n  const removeSelectedObject = () => {\n    if (selectedObject != undefined) {\n      currentClip.getFrame(1).removeObject(selectedObject);\n      updateScreen(currentClip);\n    }\n  }\n\n\n\n  const goInside = () => {\n    if (selectedObject != undefined && selectedObject instanceof MovieClip) {\n      changeCurrentClip(selectedObject);\n    }\n  }\n\n  const goOutside = () => {\n    const parent = currentClip.getParent();\n    if (parent)\n      changeCurrentClip(parent);\n  }\n\n  const getResetFunc = (reset: Function) => {\n    updateScreen = reset;\n  }\n\n\n\n\n\n  //materialui + ui\n\n  //menu\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState<null | HTMLElement>(null);\n  const handleMenuClose = () => {\n    setMenuAnchorEl(null);\n  };\n\n  const handleMenuClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setMenuAnchorEl(event.currentTarget);\n  };\n\n  const saveProject = () => {\n    const resource = resourceManager.exportJson();\n    const xml = Blockly.Xml.workspaceToDom(workspace);\n    const xml_text = Blockly.Xml.domToText(xml);\n\n    const objectJson = mainClip.exportJson();\n    fileDownload(JSON.stringify({ resource: resource, xml: xml_text, objects: objectJson }), projectName+\".mandunda\");\n  }\n\n  const projectOpen = (e: any) => {\n    const file = e.target.files[0];\n    if (!file)\n      return;\n    var reader = new FileReader();\n    reader.onload = function (e) {\n      let contents = e.target?.result;\n      if (contents) {\n        const project = JSON.parse(contents.toString());\n        resourceManager = new ResourceManager();\n        resourceManager.importJson(project.resource, () => {\n          mainClip = MovieClip.importJson(project.objects, resourceManager);\n          workspace.clear();\n          var xml = Blockly.Xml.textToDom(project.xml);\n          Blockly.Xml.domToWorkspace(xml, workspace);\n          changeCurrentClip(mainClip);\n        })\n      }\n    };\n    reader.readAsText(file);\n  }\n\n\n\n  //projectname\n  const [newPName,setNewPName] = useState(\"\");\n  const [projectName, setProjectName] = useState(\"New Project\");\n  const [openProjectNameDialog, setOpenProjectNameDialog] = useState(false);\n  const handleEditProjectNameClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setOpenProjectNameDialog(true);\n  };\n  const projectNameCloseDialog = (set:boolean)=>{\n    if(set&&newPName!=\"\")\n    {\n      setProjectName(newPName);\n    }\n    else{\n      setNewPName(projectName);\n    }\n    setOpenProjectNameDialog(false);\n  }\n\n  //movieclipName\n  const [newMcName,setNewMcName] = useState(\"new_movieclip\");\n  const [openMcNameDialog, setOpenMcNameDialog] = useState(false);\n  const makeMovieClip = () => {\n    if (selectedObject == undefined)\n      return;\n\n    setNewMcName(\"new_movieclip\")\n    setOpenMcNameDialog(true);\n  }\n\n  const mcNameCloseDialog = (set:boolean)=>{\n    if (selectedObject == undefined)\n      return;\n    if(set&&newMcName!=\"\")\n    {\n      currentClip.getFrame(1).removeObject(selectedObject);\n      let newPos = selectedObject.getTransform();\n      const movieClip = new MovieClip(newMcName, new Transform(newPos.x, newPos.y));\n      newPos.x = 0;\n      newPos.y = 0;\n      movieClip.addObject(selectedObject, [1], [newPos]);\n      currentClip.addObject(movieClip, [1], [movieClip.getTransform()]);\n      updateScreen(currentClip);\n    }\n    setOpenMcNameDialog(false);\n  }\n  //upload\n  const uploadProject = ()=>{\n    fetch(\"http://203.234.191.83:5353/\"+projectName.replace(\" \",\"_\"), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: exportGameFile()\n    }).then((response)=>{\n      alert(\"업로드 완료!\\n /player/\"+projectName.replace(\" \",\"_\")+\"에서 플레이 가능!\");\n    });\n  }\n\n\n  //gamerun\n  const [gameRuning,setGameRunning] = useState(false);\n  const handleRunClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    gameStart();\n    setGameRunning(true);\n  };\n  const closeGameDialog = ()=>{\n    setGameRunning(false);\n  }\n\n\n  const gameStart = () => {\n    const resource = resourceManager.exportJson();\n    const code = Blockly.JavaScript.workspaceToCode(workspace);\n    const objectJson = mainClip.exportJson();\n\n    setGameFile(exportGameFile());\n  }\n\n  const exportGameFile = ()=>{\n    const resource = resourceManager.exportJson();\n    const code = Blockly.JavaScript.workspaceToCode(workspace);\n    const objectJson = mainClip.exportJson();\n\n    return JSON.stringify({ resource: resource, code: code, objects: objectJson });\n  }\n\n\n  const resizeBlocky = ()=>{\n    if(workspace!=null)\n      Blockly.svgResize(workspace);\n    }\n\n  const setXYPos = (x: number, y: number) => {\n    if (!xel.current || !yel.current)\n      return;\n    if (!selectedObject) {\n      xel.current.textContent = \"X: -\";\n      yel.current.textContent = \"Y: -\";\n    }\n    xel.current.textContent = \"X: \" + x;\n    yel.current.textContent = \"Y: \" + y;\n  }\n\n\nconst handleClick = ()=>{\n  \n}\n\nconst [breadObjects,setBreadObjects] = useState<(MovieClip)[]>([mainClip]);\n\nconst renderBreadcrumbs = ()=>{\n  let current = currentClip; \n  let objects:(MovieClip)[] = [];\n\n  for(let i = 0;i<3;i++){\n    objects.push(current);\n    if(current == mainClip)\n    {\n      break;\n    }\n    const parent = current.getParent();\n    if(parent)\n      current = parent;\n  }\n  setBreadObjects(objects.reverse());\n}\n\n  window.addEventListener(\"mousemove\",resizeBlocky);\n\n  return (\n    <div className={styles.App}>\n\n      <input onChange={projectOpen} accept=\"*\" className={classes.input} id=\"contained-button-file2\" type=\"file\" />\n\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={menuAnchorEl}\n        keepMounted\n        open={Boolean(menuAnchorEl)}\n        onClose = {handleMenuClose}\n      >\n        <MenuItem onClick={saveProject}> Save Project　<SaveIcon /></MenuItem>\n        <label htmlFor=\"contained-button-file2\">\n          <MenuItem onClick={handleMenuClose}>Load Project　<FolderOpenIcon /></MenuItem>\n        </label> \n      </Menu>\n\n      <AppBar position=\"static\" className={styles.AppBar}>\n        <Toolbar>\n          <IconButton onClick = {handleMenuClick} edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" className={classes.title}>\n            만든다 - {projectName}\n          </Typography>\n          <IconButton onClick = {handleEditProjectNameClick} edge=\"start\" className={classes.editProjectNameButton} color=\"inherit\">\n            <EditIcon />\n          </IconButton>\n          <IconButton onClick = {handleRunClick} edge=\"start\" className={classes.runButton} color=\"inherit\">\n            <PlayArrowIcon style={{fontSize: 35}} />\n          </IconButton>\n          <Button onClick = {uploadProject} startIcon={<ShareIcon />} className = {classes.shareButton} color=\"inherit\">Upload</Button>\n        </Toolbar>\n      </AppBar>\n\n\n\n      <Dialog maxWidth={false} disableEscapeKeyDown={true} disableBackdropClick = {true} open={gameRuning} onClose={closeGameDialog} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">게임 화면</DialogTitle>\n        <DialogContent>\n        <GameScreen width={800} height={500} gameJson={gameFile} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={closeGameDialog} color=\"primary\">\n            닫기\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n\n\n      <Dialog disableEscapeKeyDown={true} open={openProjectNameDialog} onClose={()=>{projectNameCloseDialog(false)}} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">프로젝트 이름</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            새로운 프로젝트 이름을 설정해주세요.\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"프로젝트 이름\"\n            defaultValue={projectName}\n            fullWidth\n            onChange={(e)=>{setNewPName(e.target.value)}}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={()=>{projectNameCloseDialog(false)}} color=\"secondary\">\n            취소\n          </Button>\n          <Button onClick={()=>{projectNameCloseDialog(true)}} color=\"primary\">\n            설정\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n\n      <Dialog open={openMcNameDialog} onClose={()=>{mcNameCloseDialog(false)}} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">무비클립 이름</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            무비클립 이름을 설정해주세요.\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"무비클립 이름\"\n            defaultValue={\"new_movieclip\"}\n            fullWidth\n            onChange={(e)=>{setNewPName(e.target.value)}}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={()=>{mcNameCloseDialog(false)}} color=\"secondary\">\n            취소\n          </Button>\n          <Button onClick={()=>{mcNameCloseDialog(true)}} color=\"primary\">\n            설정\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n\n      <Dialog disableEscapeKeyDown={true} open={openMcNameDialog} onClose={()=>{mcNameCloseDialog(false)}} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">무비클립 이름</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            무비클립 이름을 설정해주세요.\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"무비클립 이름\"\n            defaultValue={\"new_movieclip\"}\n            fullWidth\n            onChange={(e)=>{setNewPName(e.target.value)}}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={()=>{mcNameCloseDialog(false)}} color=\"secondary\">\n            취소\n          </Button>\n          <Button onClick={()=>{mcNameCloseDialog(true)}} color=\"primary\">\n            설정\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n\n\n\n      <div className={styles.screenContainer}>\n        <Screen className = {styles.Screen} selectedTargetMoving={setXYPos} resetFunc={getResetFunc} width={800} height={500} movieClip={currentClip} frame={1} selectedTargetChanged={selectedTargetChanged} />\n        <div className={styles.Properties}>\n          <div className = {styles.tfContainer}>\n            <TextField\n              label=\"오브젝트 이름\"\n              id=\"outlined-margin-dense\"\n              defaultValue=\"Default Value\"\n              className={styles.test1}\n              margin=\"dense\"\n              variant=\"outlined\"\n              value={objectName} \n              onChange={onNameInputChanged}\n            />\n          </div>\n          <div className={styles.test2}>\n            <Breadcrumbs className = {classes.link} aria-label=\"breadcrumb\">\n              {breadObjects.indexOf(mainClip)==-1&&(<div></div>)} \n              {breadObjects.map((el) => \n                (<Link title = {el.name} onClick={()=>{changeCurrentClip(el)}} className = {classes.link}>{(el.name.slice(0,6)+\"…\").slice(0,el.name.length)}</Link>)\n              )}\n            </Breadcrumbs>\n          </div>\n          <div className={styles.test3}>\n            <div ref = {ref => { xel.current = ref }}>X: - </div>\n          </div>\n          <div className={styles.test4}>\n            <div ref = {ref => { yel.current = ref }}>Y: -</div>\n          </div>\n          <input onChange={graphicOpen} accept=\"image/*\" className={classes.input} id=\"contained-button-file\" type=\"file\" />\n          <div className={styles.test5}>\n            <label htmlFor=\"contained-button-file\">\n              <Button className={classes.Button} variant=\"contained\" color=\"primary\" disableElevation component=\"span\">그래픽 추가</Button>\n            </label>\n          </div>\n          <div className={styles.test6}>\n            <Button className={classes.Button} onClick={makeMovieClip} variant=\"contained\" color=\"primary\" disableElevation>무비클립화 하기</Button>\n          </div>\n          <div className={styles.test8}>\n            <Button className={classes.Button} onClick={goInside} variant=\"outlined\" disableElevation disabled={!isMovieclip}>안으로 들어가기</Button>\n          </div>\n          <div className={styles.test9}>\n            <Button className={classes.Button} onClick={goOutside} variant=\"outlined\" disableElevation disabled={(currentClip == mainClip)}>밖으로 나가기</Button>\n          </div>\n          <div className={styles.test7}>\n            <Button className={classes.Button} onClick={removeSelectedObject} variant=\"contained\" color=\"secondary\" disableElevation>삭제</Button>\n          </div>\n        </div>\n      </div>\n\n\n\n      <ReactModal initWidth={800} initHeight={400}\n        onFocus={() => (\"Modal is clicked\")}\n        isOpen={true}\n        resizing={resizeBlocky}>\n        <ReactBlocklyComponent.BlocklyEditor\n        initialXml={INITIAL_XML}\n        toolboxCategories={parseWorkspaceXml(INITIAL_TOOLBOX_XML)}\n        wrapperDivClassName={styles.Blockly}\n        workspaceDidChange={workspaceChange} />\n      </ReactModal>\n\n\n      \n    </div>\n  );\n}\n\nexport default App;\n\n\n\n/*\n\n \n      <TextField id=\"standard-basic\" label=\"오브젝트 이름\" value={objectName} onChange={onNameInputChanged} />\n      <input onChange={graphicOpen} accept=\"image/*\" className={classes.input} id=\"contained-button-file\" type=\"file\" />\n      <label htmlFor=\"contained-button-file\">\n        <Button variant=\"contained\" color=\"primary\" disableElevation component=\"span\">그래픽 추가</Button>\n      </label>\n\n      \n      <Button onClick={goInside} variant=\"outlined\" disableElevation disabled={!isMovieclip}>안으로 들어가기</Button>\n      \n      <Button onClick={removeSelectedObject} variant=\"contained\" color=\"secondary\" disableElevation>삭제</Button>\n      <br />\n      <Button onClick={gameStart} variant=\"contained\" color=\"secondary\" disableElevation>게임 실행</Button>\n      <Button onClick={saveProject} variant=\"contained\" color=\"secondary\" disableElevation>프로젝트 저장</Button>\n      <input onChange={projectOpen} accept=\"*\" className={classes.input} id=\"contained-button-file2\" type=\"file\" />\n      <label htmlFor=\"contained-button-file2\">\n        <Button variant=\"contained\" color=\"primary\" disableElevation component=\"span\">프로젝트 불러오기</Button>\n      </label>\n*/","import React, { Component } from \"react\";\nimport \"./index.css\";\n\nclass Resizer extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  handleMouseDown(e) {\n    this.props.updateStateResizing(true);\n  }\n  render() {\n    const style = {\n      width: 16,\n      height: 16\n    };\n    return (\n      <div\n        className=\"flexible-modal-resizer\"\n        style={style}\n        onMouseDown={this.handleMouseDown.bind(this)}\n      />\n    );\n  }\n}\n\nexport default Resizer;\n","import React, { Component, Fragment } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Resizer from './Resize.js';\nimport * as FontAwesome from 'react-icons/lib/fa';\nimport { CSSTransition } from 'react-transition-group';\n\nclass Modal extends Component {\n\trender() {\n\t\tconst { isDragging, width, height, top, left, isOpen, isMinimised, onRequestRecover,className,onFocus } = this.props;\n\t\tif (isOpen) {\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<CSSTransition in={!isMinimised} timeout={300} classNames=\"minimise\" unmountOnExit>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonClick={onFocus}\n\t\t\t\t\t\t\tref={(node) => {\n\t\t\t\t\t\t\t\tthis.node = node;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdraggable={isDragging}\n\t\t\t\t\t\t\tclassName={!className?\"flexible-modal\":\"flexible-modal \"+className}\n\t\t\t\t\t\t\tstyle={{ width, height, top, left }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.props.children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CSSTransition>\n\t\t\t\t\t{isMinimised && (\n\t\t\t\t\t\t<button className=\"flexible-modal-rebound-btn\" onClick={onRequestRecover}>\n\t\t\t\t\t\t\t<FontAwesome.FaBars />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t)}\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nclass FlexibleModal extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisDragging: false,\n\t\t\tisResizing: false,\n\t\t\ttop:\n\t\t\t\tthis.props.top !== undefined\n\t\t\t\t\t? this.props.top\n\t\t\t\t\t: this.props.initHeight\n\t\t\t\t\t\t? window.innerHeight / 2 - this.props.initHeight / 2 - 50\n\t\t\t\t\t\t: window.innerHeight / 2 - 400 / 2 - 50,\n\t\t\tleft:\n\t\t\t\tthis.props.left !== undefined\n\t\t\t\t\t? this.props.left\n\t\t\t\t\t: this.props.initWidth\n\t\t\t\t\t\t? window.innerWidth / 2 - this.props.initWidth / 2 - 21\n\t\t\t\t\t\t: window.innerWidth / 2 - 800 / 2 - 21,\n\t\t\twidth: this.props.initWidth ? this.props.initWidth : 800,\n\t\t\theight: this.props.initHeight ? this.props.initHeight : 400,\n\t\t\trel: null\n\t\t};\n\t\tthis.updateStateResizing = this.updateStateResizing.bind(this);\n\t\tthis.funcResizing = this.funcResizing.bind(this);\n\t\tthis.resize = this.resize.bind(this);\n\t\tthis.onMouseMove = this.onMouseMove.bind(this);\n\t\tthis.onMouseUp = this.onMouseUp.bind(this);\n\t\tthis.onMouseDown = this.onMouseDown.bind(this);\n\t\tthis.pressKey = this.pressKey.bind(this);\n\t\tthis.updateStateDragging = this.updateStateDragging.bind(this);\n\t}\n\n\tcomponentDidMount() {\n    \tconst { disableKeystroke } = this.props;\n\t\tdocument.addEventListener('mouseup', this.onMouseUp);\n\t\tif(!disableKeystroke) document.addEventListener('keydown', this.pressKey);\n\t}\n\n\t// componentDidUpdate(props, state) {\n\t// \tif (!this.state.isDragging && state.isDragging) {\n\t// \t\tdocument.removeEventListener('mousemove', this.onMouseMove);\n\t// \t\tdocument.removeEventListener('mouseup', this.onMouseUp);\n\t// \t}\n  \t// }\n  \n\tcomponentWillUnmount() {\n\t\tconst { disableKeystroke } = this.props;\n\t\tif(document.removeEventListener){\n\t\tdocument.removeEventListener('mousemove', this.onMouseMove);\n\t\tdocument.removeEventListener('mouseup', this.onMouseUp);\n\t\tif(!disableKeystroke) document.removeEventListener('keydown', this.pressKey);\n\t\t}\n\t}\n\n\tonMouseDown(e) {\n\t\t// only left mouse button\n\t\tdocument.addEventListener('mousemove', this.onMouseMove);\n\t\tif (e.button !== 0) return;\n\t\tvar pos = ReactDOM.findDOMNode(this.node_modal);\n\t\tthis.setState({\n\t\t\tisDragging: true,\n\t\t\trel: {\n\t\t\t\tx: e.pageX - pos.offsetLeft,\n\t\t\t\ty: e.pageY - pos.offsetTop\n\t\t\t}\n\t\t});\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t}\n\n\tonMouseUp(e) {\n\t\tdocument.removeEventListener('mousemove', this.onMouseMove);\n\t\tthis.setState({ isDragging: false });\n\t\tthis.setState({ isResizing: false });\n\t\te.stopPropagation();\n\t\t// e.preventDefault();\n\t}\n\n\tonMouseMove(e) {\n\t\tthis.props.resizing();\n\t\tconst { disableMove, disableVerticalMove, disableHorizontalMove } = this.props;\n\t\tif (this.state.isDragging) {\n\n\t\t\tif (disableMove) {\n\t\t\t} else if (disableVerticalMove && disableHorizontalMove) {\n\t\t\t} else if (!disableVerticalMove && disableHorizontalMove) {\n\t\t\t\tthis.setState({\n\t\t\t\t\ttop: e.pageY - this.state.rel.y\n\t\t\t\t});\n\t\t\t} else if (disableVerticalMove && !disableHorizontalMove) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tleft: e.pageX - this.state.rel.x\n\t\t\t\t});\n\t\t\t} else if (!disableVerticalMove && !disableHorizontalMove) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tleft: e.pageX - this.state.rel.x,\n\t\t\t\t\ttop: e.pageY - this.state.rel.y\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (this.state.isResizing) {\n\t\t\tthis.funcResizing(e.clientX, e.clientY);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t}\n\n\tupdateStateResizing(isResizing) {\n\t\tdocument.addEventListener('mousemove', this.onMouseMove);\n\t\tthis.setState({ isResizing });\n\t}\n\n\tfuncResizing(clientX, clientY) {\n\t\tthis.props.resizing();\n\t\tconst { minWidth: mWidth, minHeight: mHeight, disableVerticalResize, disableHorizontalResize } = this.props;\n\t\tlet node = ReactDOM.findDOMNode(this.node_modal);\n\t\tlet minWidth = mWidth ? mWidth : 200;\n\t\tlet minHeight = mHeight ? mHeight : 100;\n\t\tif (!disableHorizontalResize && clientX > node.offsetLeft + minWidth) {\n\t\t\tthis.setState({\n\t\t\t\twidth: clientX - node.offsetLeft + 16 / 2\n\t\t\t});\n\t\t}\n\t\tif (!disableVerticalResize && clientY > node.offsetTop + minHeight) {\n\t\t\tthis.setState({\n\t\t\t\theight: clientY - node.offsetTop + 16 / 2\n\t\t\t});\n\t\t}\n\t}\n\n\tupdateStateDragging(isDragging) {\n\t\tthis.setState({ isDragging });\n\t\tthis.props.resizing();\n\t}\n\n\tpressKey(e) {\n\t\tconst { onRequestClose, disableResize, disableMove, disableVerticalMove, disableHorizontalMove } = this.props;\n\t\tif (e.ctrlKey) {\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 37:\n\t\t\t\t\t!disableResize && this.setState((prevState) => ({ width: prevState.width - 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 38:\n\t\t\t\t\t!disableResize && this.setState((prevState) => ({ height: prevState.height - 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39:\n\t\t\t\t\t!disableResize && this.setState((prevState) => ({ width: prevState.width + 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 40:\n\t\t\t\t\t!disableResize && this.setState((prevState) => ({ height: prevState.height + 20 }));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 27:\n\t\t\t\t\tonRequestClose();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 37:\n\t\t\t\t\t!disableMove &&\n\t\t\t\t\t\t!disableHorizontalMove &&\n\t\t\t\t\t\tthis.setState((prevState) => ({ left: prevState.left - 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 38:\n\t\t\t\t\t!disableMove && !disableVerticalMove && this.setState((prevState) => ({ top: prevState.top - 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39:\n\t\t\t\t\t!disableMove &&\n\t\t\t\t\t\t!disableHorizontalMove &&\n\t\t\t\t\t\tthis.setState((prevState) => ({ left: prevState.left + 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 40:\n\t\t\t\t\t!disableMove && !disableVerticalMove && this.setState((prevState) => ({ top: prevState.top + 20 }));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tresize(width, height) {\n\t\tthis.props.resizing();\n\t\tthis.setState((prevState) => (\n      { width: width || prevState.width, height: height || prevState.height }\n    ));\n\t}\n\n\trender() {\n\t\tconst { isOpen, isMinimised, onRequestClose, onRequestMinimise, onRequestRecover, disableResize,className,onFocus } = this.props;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{/*this mask is a must*/}\n\t\t\t\t{isOpen &&\n\t\t\t\t!isMinimised && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tonClick={onRequestMinimise ? onRequestMinimise : onRequestClose}\n\t\t\t\t\t\tclassName=\"flexible-modal-mask\"\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t<Modal\n\t\t\t\t\tclassName = {className}\n\t\t\t\t\tonFocus={onFocus}\n\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\theight={this.state.height}\n\t\t\t\t\ttop={this.state.top}\n\t\t\t\t\tleft={this.state.left}\n\t\t\t\t\tisDragging={this.state.isDragging}\n\t\t\t\t\tonRequestRecover={onRequestRecover}\n\t\t\t\t\tisMinimised={isMinimised}\n\t\t\t\t\tisOpen={isOpen}\n\t\t\t\t\tupdateStateDragging={this.updateStateDragging}\n\t\t\t\t\ttransitionName=\"modal-anim\"\n\t\t\t\t\tref={(node) => {\n\t\t\t\t\t\tthis.node_modal = node;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t\t<div\n\t\t\t\t\t\tonMouseDown={this.onMouseDown}\n\t\t\t\t\t\tclassName=\"flexible-modal-drag-area\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: this.state.width\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tref={(dragArea) => {\n\t\t\t\t\t\t\tthis.dragArea = dragArea;\n\t\t\t\t\t\t}}\n\t\t\t\t\t><div>Block Script</div></div>\n\t\t\t\t\t{!disableResize && <Resizer updateStateResizing={this.updateStateResizing} />}\n\t\t\t\t</Modal>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default FlexibleModal;\n","export function generateUUID() {\r\n    var d = new Date().getTime();\r\n    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n        var r = (d + Math.random()*16)%16 | 0;\r\n        d = Math.floor(d/16);\r\n        return (c=='x' ? r : (r&0x3|0x8)).toString(16);\r\n    });\r\n    return uuid;\r\n};","import * as React from \"react\";\r\nimport { withRouter, RouteComponentProps } from \"react-router\";\r\nimport GameScreen from \"./components/GameScreen\";\r\nimport styles from \"./GamePlayer.module.css\"\r\ninterface MatchParams {\r\n  id: string;\r\n}\r\n\r\nconst GamePlayer: React.SFC<RouteComponentProps<MatchParams>> = ({ match }) => {\r\n  console.log(match.params.id);\r\n  const [gameFile,setGameFile] = React.useState(\"\");\r\n  const [gameLoad,setGameLoad] = React.useState(false);\r\n  React.useEffect(()=>{\r\n    fetch(\"http://203.234.191.83:5353/\"+match.params.id).then(x => x.text()).then(x => {\r\n        setGameFile(x);\r\n        setGameLoad(true)\r\n      })\r\n  },[])\r\n  return (\r\n      <div className={styles.GamePlayer}>\r\n        {gameLoad?(<GameScreen className={styles.GameScreen} gameJson = {gameFile} width = {800} height={500}/>):(<div className= {styles.loading}>LOADING</div>)}\r\n      </div>\r\n      )\r\n  \r\n};\r\n\r\nexport default withRouter(GamePlayer);","import React from \"react\";\r\nimport GameScreen from \"./components/GameScreen\";\r\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport GamePlayer from \"./GamePlayer\";\r\n\r\nconst Root = () => {\r\n    return(\r\n        <div>\r\n            <HashRouter>\r\n                <Route exact path=\"/\" component={App} />\r\n                <Route path=\"/player/:id\" component={GamePlayer} />\r\n            </HashRouter>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default Root","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport Game from './GameEngine/Game';\nimport MovieClip from './GameEngine/MovieClip';\nimport Transform from './GameEngine/Transform';\nimport Graphic from './GameEngine/Graphic';\nimport Matter from 'matter-js';\n\nimport ResourceManager from './GameEngine/ResourceManager';\nimport Root from './Root';\n\n\n\n\nReactDOM.render(\n  <Root/>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}