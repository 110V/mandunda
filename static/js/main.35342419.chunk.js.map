{"version":3,"sources":["GameEngine/Game.ts","GameEngine/blockFuncs/BlockFunctions.ts","GameEngine/Frame.ts","GameEngine/MovieClip.ts","../node_modules/encoding/lib sync","GameEngine/Transform.ts","App.module.css","GameEngine/ResourceManager.ts","GameEngine/Graphic.ts","components/GameScreen.tsx","components/Frame.module.css","GamePlayer.module.css","serviceWorker.js","components/ScreenUtils/TransformEditor.ts","components/Screen.tsx","components/ScreenUtils/FrontUI.ts","customBlocks/definitions/definition.ts","customBlocks/generators/gameStart.ts","customBlocks/generators/addForce.ts","customBlocks/generators/addPhysics.ts","customBlocks/generators/checkCollision.ts","customBlocks/generators/gameTick.ts","customBlocks/generators/getKeyboardEvent.ts","customBlocks/generators/getKeyboardState.ts","customBlocks/generators/getMouseEvent.ts","customBlocks/generators/getMouseState.ts","customBlocks/generators/getObject.ts","customBlocks/generators/getPos.ts","customBlocks/generators/getVelocity.ts","customBlocks/generators/mouseEvent.ts","customBlocks/generators/setPos.ts","customBlocks/generators/setVelocity.ts","customBlocks/generators/setRotation.ts","customBlocks/generators/currentObject.ts","customBlocks/generators/getCurrentFrame.ts","customBlocks/generators/play.ts","customBlocks/generators/stop.ts","customBlocks/generators/checkDrawing.ts","customBlocks/generators/gotoAndPlay.ts","customBlocks/generators/gotoAndStop.ts","content.tsx","App.tsx","resizableWindow/Resize.js","resizableWindow/index.js","components/FrameBar.tsx","Utils.ts","GamePlayer.tsx","Root.tsx","index.tsx"],"names":["Game","width","height","target","backgroundColor","fps","mainClip","MovieClip","app","isPlaying","framesPerSecond","secondPerFrame","this","lastTime","Date","getTime","timeLeft","deltaTime","ticks","objects","engine","Matter","create","bodys","startCallback","isDestroying","keys","keysDownOnce","keysUpOnce","mouseDown","mouseOnceDown","mouseOnceUp","mouseOnceClick","PIXI","setFps","appendChild","view","world","gravity","y","shared","on","alert","initEvents","update","Transform","init","map","func","tick","ticker","add","requestAnimationFrame","animate","game","destroy","Math","min","updatePhysics","render","name","object","isStatic","friction","mass","noRotation","bound","getBound","sprite","getBounds","transform","getTransform","body","rectangle","x","angle","rotation","setInertia","push","gameObject","el","setTransform","vertices","scaleX","scaleY","type","callback","interactive","hitArea","renderer","resolution","interactiveChildren","addListener","tickEvent","keyCode","addEventListener","onMouseDown","onMouseUp","onClick","window","e","keyDown","keyUp","eventTick","key","i","slice","repeat","BlockFunctions","Body","applyForce","position","addPhysics","a","b","Query","collides","length","blocks","addTick","eventType","isKeyPress","isKeyRelease","stateType","isKeyDown","isMouseOnceDown","isMouseOnceUp","isMouseOnceClick","isMouseDown","objectName","getObject","velocity","console","log","addMouseEvent","deltaX","deltaY","setPosition","setVelocity","setAngle","PI","play","stop","frame","gotoAndPlay","gotoAndStop","getCurrentFrame","getObjects","indexOf","currentFrame","Frame","script","batches","entry","forEach","rebatchAll","batch","splice","container","addChild","makeContainer","newBatchs","tempBatch","exportStruct","maker","exportMaker","childs","parent","frames","nextUpdate","addFrame","clone","getFrameCount","max","targetCount","getFrame","Object","transforms","extendFramesTo","addObject","setParent","frameNum","removeObject","num","calcChildTransform","JSON","stringify","struct","rm","undefined","make","fromObject","importStruct","json","parse","clip","resourceManager","Graphic","texture","webpackEmptyContext","req","Error","code","resolve","module","exports","id","child","rotatedPos","rotatePos","seta","cos","sin","roatation","ResourceManager","loader","loading","queue","callBack","data","imageToBase64","then","response","addDirectBase64","onConvert","catch","error","load","resources","loaderLoad","base64","texId","pixiTransform","from","getTexture","updatePIXI","newTransform","set","scale","GameScreen","props","useRef","stageDiv","current","gameJson","gameFile","importJson","resource","eval","start","useEffect","className","style","border","ref","Boolean","location","hostname","match","State","transformEditor","gameObjects","pixiObjects","FrontUI","stage","addChildAt","removeChildren","zIndex","sortChildren","lineWidth","lineColor","alpha","pivot","drawShape","graphic","drawRect","radius","drawCircle","x1","y1","x2","y2","moveTo","lineTo","drawing","lineStyle","TransformEditor","frontUI","points","transformChanged","selectedTargetChanged","selectedTargetMoving","state","none","currentPoint","oppositePoint","transX","transY","reposX","reposY","targetIndex","prevMouseX","prevMouseY","setVisiblePoints","point","beginFill","color","pointMouseDown","pointMouseOver","pointMouseOut","visible","document","removeTarget","mouseUp","mouseMove","global","exeptNum","temp","boundPoints","xMiddle","left","right","yMiddle","top","bottom","removeAllListeners","targetMouseDown","mouseOver","mouseOut","setTarget","moving","resizing","index","deltaMouseX","deltaMouseY","cpoint","opoint","distanceX","getLocalBounds","distanceY","updatePoints","Screen","reset","movieClip","removeChild","pixiObject","setObjects","thickness","transform_","updateBatchToCurrentState","resetFunc","Blockly","appendValueInput","setCheck","appendField","appendDummyInput","setPreviousStatement","setNextStatement","setColour","setTooltip","setHelpUrl","setOutput","appendStatementInput","setInputsInline","block","statements_blocks","statementToCode","value_object","valueToCode","ORDER_ATOMIC","value_x","value_y","value_friction","value_mass","checkbox_isstatic","getFieldValue","checkbox_norotation","value_a","value_b","ORDER_NONE","dropdown_eventtype","value_keycode","dropdown_statetype","value_objectname","dropdown_type","value_name","value_currentframe","value_obj","value_isdrawing","value_frame","workspace","Resizer","updateStateResizing","handleMouseDown","bind","React","Component","Modal","isDragging","isOpen","isMinimised","onRequestRecover","onFocus","CSSTransition","in","timeout","classNames","unmountOnExit","node","draggable","children","FlexibleModal","isResizing","initHeight","innerHeight","initWidth","innerWidth","rel","funcResizing","resize","onMouseMove","pressKey","updateStateDragging","disableKeystroke","removeEventListener","button","pos","ReactDOM","findDOMNode","node_modal","setState","pageX","offsetLeft","pageY","offsetTop","stopPropagation","preventDefault","disableMove","disableVerticalMove","disableHorizontalMove","clientX","clientY","mWidth","minWidth","mHeight","minHeight","disableVerticalResize","disableHorizontalResize","onRequestClose","disableResize","prevState","onRequestMinimise","transitionName","dragArea","Resize","selected","styles","sFrame","usFrame","click","FrameBar","frameChanged","maxFrame","bar","frameAdd","frameRemove","useStyles","makeStyles","theme","createStyles","root","margin","spacing","input","display","menuButton","marginRight","editProjectNameButton","title","shareButton","marginLeft","runButton","transformOrigin","Button","link","fontSize","selectedIndex","updateScreen","currentClip","codes","xml","workspaceInit","selectedObject2","App","useState","setGameFile","setObjectName","isMovieclip","setIsMovieclip","selectedObject","setSelectedObject","xel","yel","classes","addGraphic","currentFrame2","changeCurrentClip","setCurrentFrame","renderBreadcrumbs","getCodeXmlByObjectName","saveCodeXmlByObjectName","workspaceToDom","xml_text","domToText","setWorkspaceCode","clear","dom","textToDom","domToWorkspace","nselectedObject","setXYPos","menuAnchorEl","setMenuAnchorEl","handleMenuClose","newPName","setNewPName","projectName","setProjectName","openProjectNameDialog","setOpenProjectNameDialog","projectNameCloseDialog","newMcName","setNewMcName","openMcNameDialog","setOpenMcNameDialog","mcNameCloseDialog","newPos","gameRuning","setGameRunning","closeGameDialog","gameStart","exportGameFile","exportJson","wholeCode","tempCode","workspaceToCode","replaceAll","objectJson","resizeBlocky","textContent","toFixed","setCurrentFrameHook","breadObjects","setBreadObjects","getParent","reverse","onChange","file","files","reader","FileReader","onload","contents","result","project","toString","readAsText","accept","anchorEl","keepMounted","open","onClose","MenuItem","fileDownload","htmlFor","AppBar","Toolbar","IconButton","event","currentTarget","edge","aria-label","Typography","variant","text","replace","fetch","method","headers","startIcon","Dialog","maxWidth","disableEscapeKeyDown","disableBackdropClick","aria-labelledby","DialogTitle","DialogContent","DialogActions","DialogContentText","TextField","autoFocus","label","defaultValue","fullWidth","value","screenContainer","Properties","tfContainer","test1","test2","Breadcrumbs","Link","test3","test4","uuid","d","c","r","random","floor","generateUUID","readAsDataURL","test5","disableElevation","component","test6","test8","disabled","test9","test7","removeFrame","BlocklyEditor","initialXml","toolboxCategories","parseWorkspaceXml","wrapperDivClassName","workspaceDidChange","w","withRouter","params","gameLoad","setGameLoad","GamePlayer","Root","exact","path","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.35342419.chunk.js","sourcesContent":["import * as PIXI from \"pixi.js\";\r\nimport * as Matter from 'matter-js'\r\n\r\nimport MovieClip from \"./MovieClip\";\r\nimport Transform from \"./Transform\";\r\nimport Graphic from \"./Graphic\";\r\n\r\nexport default class Game {\r\n    public mainClip: MovieClip = new MovieClip(\"root\");\r\n\r\n    public app: PIXI.Application;\r\n    private isPlaying: boolean = false;\r\n\r\n    private framesPerSecond = 60;\r\n    private secondPerFrame = 1 / this.framesPerSecond;\r\n    private lastTime = (new Date()).getTime();\r\n    private timeLeft = this.secondPerFrame * 1000;\r\n    public deltaTime = 0;\r\n    public ticks:(()=>void)[] = []; \r\n\r\n    private objects: { [id: string]: (MovieClip | Graphic); } = {};\r\n\r\n    private engine = Matter.Engine.create();\r\n    private bodys: { gameObject: (MovieClip | Graphic), body: Matter.Body }[] = [];\r\n    public startCallback: (()=>void)[] = [];\r\n\r\n    private isDestroying = false;\r\n    private target:HTMLElement;\r\n\r\n    constructor(width: number, height: number, target: HTMLElement, backgroundColor = 0xFFFFFF, fps = 60) {\r\n        this.app = new PIXI.Application({\r\n            width: width,\r\n            height: height,\r\n            backgroundColor: backgroundColor\r\n        });\r\n        this.objects[\"root\"] = this.mainClip;\r\n        this.target = target;\r\n        this.setFps(fps);\r\n        target.appendChild(this.app.view);\r\n        this.engine.world.gravity.y = 1;\r\n    }\r\n\r\n    public setFps(fps: number) {\r\n        this.framesPerSecond = fps;\r\n        this.secondPerFrame = 1 / fps;\r\n    }\r\n\r\n    public start() {\r\n        PIXI.Loader.shared.on(\"complete\",()=>{alert(\"완료\")});\r\n        this.initEvents();\r\n        this.isPlaying = true;\r\n        this.mainClip.update(this.app, Transform.init, true);\r\n        this.startCallback.map(func => { func() });\r\n        this.ticks.map((tick)=>{\r\n            this.app.ticker.add(tick);\r\n        });\r\n        requestAnimationFrame(() => { this.animate(this) });\r\n\r\n        // var render = Matter.Render.create({\r\n        //     element: this.target,\r\n        //     engine: this.engine,\r\n        //     options: {\r\n        //         width: 800,\r\n        //         height: 500,\r\n        //         background: '#fafafa',\r\n        //         wireframeBackground: '#222',\r\n        //         hasBounds: false,\r\n\r\n        //     }\r\n        // });\r\n    \r\n        // Matter.Render.run(render);\r\n    }\r\n\r\n    private animate(game: Game) {\r\n        if(this.isDestroying){\r\n            this.app.destroy(true);\r\n            return;\r\n        }\r\n        this.deltaTime = Math.min((new Date()).getTime() - this.lastTime,this.secondPerFrame * 1000);\r\n        this.updatePhysics(this.deltaTime);\r\n        this.timeLeft -= this.deltaTime;\r\n        if (this.timeLeft < 0 && this.isPlaying) {\r\n            this.mainClip.update(this.app);\r\n            this.timeLeft = this.secondPerFrame * 1000;\r\n        }\r\n        else {\r\n            this.mainClip.render(this.app);\r\n        }\r\n        this.lastTime = (new Date()).getTime()\r\n        requestAnimationFrame(() => { this.animate(game) });\r\n    }\r\n\r\n    public destroy()\r\n    {\r\n        this.isDestroying = true;\r\n    }\r\n\r\n    public stop() {\r\n        this.isPlaying = false;\r\n    }\r\n\r\n    public play() {\r\n        this.isPlaying = true;\r\n    }\r\n\r\n    public addObject(name: string, object: MovieClip|Graphic) {\r\n        this.objects[name] = object;\r\n        object.name = name;\r\n    }\r\n\r\n    public getObject(name: string) {\r\n        return this.objects[name];\r\n    }\r\n\r\n    public addPhysics(object: Graphic | MovieClip, isStatic: boolean, friction: number, mass: number, noRotation:boolean) {\r\n        let bound: PIXI.Rectangle;\r\n        if (object instanceof MovieClip) {\r\n            bound = object.getBound();\r\n        }\r\n        else {\r\n            bound = object.sprite.getBounds();\r\n        }\r\n        const transform = object.getTransform();\r\n        const body = Matter.Bodies.rectangle(transform.x+bound.width/2, transform.y+bound.height/2, bound.width, bound.height);\r\n        body.angle = transform.rotation;\r\n        body.friction = friction;\r\n        body.mass = mass;\r\n        body.isStatic = isStatic;\r\n        Matter.World.add(this.engine.world, body);\r\n        if(noRotation)\r\n            Matter.Body.setInertia(body,9999999999);\r\n        object.body = body;\r\n        this.bodys.push({ body: body, gameObject: object });\r\n\r\n    }\r\n\r\n    private updatePhysics(deltaTime: number) {\r\n        this.bodys.map((el) => {\r\n            const transform = el.gameObject.getTransform();\r\n            el.gameObject.setTransform(new Transform(el.body.vertices[0].x, el.body.vertices[0].y, transform.scaleX, transform.scaleY, el.body.angle));\r\n        });\r\n        Matter.Engine.update(this.engine, deltaTime, 1);\r\n    }\r\n\r\n    public addMouseEvent(object:PIXI.Sprite,type:string,callback:()=>void){  \r\n        object.interactive = true; \r\n        object.hitArea = new PIXI.Rectangle(0, 0, object.width / this.app.renderer.resolution,\r\n            object.height / this.app.renderer.resolution);\r\n        object.interactiveChildren = true;\r\n        object.addListener(type,callback);\r\n    }\r\n\r\n    public addTick(tickEvent:()=>void)\r\n    {\r\n        this.ticks.push(tickEvent);\r\n    }\r\n\r\n    //mouse,keyboard events\r\n    private keys: boolean[] = [];\r\n    private keysDownOnce: number[] = [];\r\n    private keysUpOnce: number[] = [];\r\n    private mouseDown: boolean = false;\r\n\r\n    private mouseOnceDown: number = 0;\r\n    private mouseOnceUp: number = 0;\r\n    private mouseOnceClick: number = 0;\r\n\r\n\r\n\r\n    public isKeyDown(keyCode: number) {\r\n        return this.keys[keyCode];\r\n    }\r\n\r\n    public isKeyPress(keyCode: number) {\r\n        return this.keysDownOnce[keyCode] == 1;\r\n    }\r\n\r\n    public isKeyRelease(keyCode: number) {\r\n        return this.keysUpOnce[keyCode] == 1;\r\n    }\r\n\r\n    public isMouseDown() {\r\n        return this.mouseDown;\r\n    }\r\n    public isMouseOnceDown() {\r\n        return this.mouseOnceDown == 1;\r\n    }\r\n\r\n    public isMouseOnceUp() {\r\n        return this.mouseOnceUp == 1;\r\n    }\r\n\r\n    public isMouseOnceClick() {\r\n        return this.mouseOnceClick == 1;\r\n    }\r\n\r\n\r\n    private initEvents() {\r\n        this.app.view.addEventListener(\"mousedown\", () => {this.onMouseDown()});\r\n        this.app.view.addEventListener(\"mouseup\", () => {this.onMouseUp()})\r\n        this.app.view.addEventListener(\"click\", () => {this.onClick()});;\r\n        window.addEventListener(\"keydown\", (e) => { this.keyDown(e) });\r\n        window.addEventListener(\"keyup\", (e) => { this.keyUp(e) });\r\n\r\n        this.keys[4] = true;\r\n        this.app.ticker.add(() => { this.eventTick() })\r\n    }\r\n\r\n    private eventTick() {\r\n        this.keysDownOnce.map((key, i) => {\r\n            if (key != 0) {\r\n                this.keysDownOnce[i]--;\r\n            }\r\n            else {\r\n                this.keysDownOnce = this.keysDownOnce.slice(i, i);\r\n            }\r\n        });\r\n        this.keysUpOnce.map((key, i) => {\r\n            if (key != 0) {\r\n                this.keysUpOnce[i]--;\r\n            }\r\n            else {\r\n                this.keysUpOnce = this.keysUpOnce.slice(i, i);\r\n            }\r\n        });\r\n\r\n        if (this.mouseOnceDown != 0) {\r\n            this.mouseOnceDown--;\r\n        }\r\n        if (this.mouseOnceUp != 0) {\r\n            this.mouseOnceUp--;\r\n        }\r\n        if (this.mouseOnceClick != 0) {\r\n            this.mouseOnceClick--;\r\n        }\r\n\r\n    }\r\n\r\n    private onMouseDown() {\r\n        this.mouseDown = true;\r\n        this.mouseOnceDown = 2;\r\n    }\r\n\r\n    private onMouseUp() {\r\n        this.mouseDown = false;\r\n        this.mouseOnceUp = 2;\r\n    }\r\n\r\n    private onClick() {\r\n        this.mouseOnceClick = 2;\r\n    }\r\n\r\n    private keyDown(e: KeyboardEvent) {\r\n        this.keysDownOnce[e.keyCode] = (!e.repeat ? 2 : -1);\r\n        this.keys[e.keyCode] = true;\r\n    }\r\n    private keyUp(e: KeyboardEvent) {\r\n        this.keysUpOnce[e.keyCode] = (!e.repeat ? 2 : -1);\r\n        this.keys[e.keyCode] = false;\r\n    }\r\n}","import Game from \"../Game\";\r\nimport MovieClip from \"../MovieClip\";\r\nimport Graphic from \"../Graphic\";\r\nimport Matter from \"matter-js\";\r\n\r\n\r\nlet BlockFunctions: { [id: string]: (Function); } = {};\r\n\r\nBlockFunctions[\"addForce\"] = (game: Game, object: (MovieClip | Graphic), x: number, y: number) => {\r\n    if (object.body) {\r\n        //Matter.Body.setVelocity(object.body, { x: object.body.velocity.x + x, y: object.body.velocity.y + y })\r\n        Matter.Body.applyForce(object.body,object.body.position,{x:x,y:y});\r\n    }\r\n}\r\n\r\nBlockFunctions[\"addPhysics\"] = (game: Game, object: (MovieClip | Graphic), friction: number, mass: number, isStatic: boolean, noRotation:boolean ) => {\r\n    game.addPhysics(object, isStatic, friction, mass, noRotation);\r\n}\r\n\r\nBlockFunctions[\"checkCollision\"] = (game: Game, a: (MovieClip | Graphic), b: (MovieClip | Graphic)) => {\r\n    if(a.body&&b.body){\r\n        return Matter.Query.collides(a.body,[b.body]).length != 0;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"gameStart\"] = (game: Game, blocks: () => {}) => {\r\n    game.startCallback.push(blocks);\r\n}\r\n\r\nBlockFunctions[\"gameTick\"] = (game: Game, blocks: () => {}) => {\r\n    game.addTick(blocks);\r\n}\r\n\r\nBlockFunctions[\"getKeyboardEvent\"] = (game: Game, eventType: string, keyCode: number) => {\r\n    switch(eventType)\r\n    {\r\n        case \"isDown\":\r\n            return game.isKeyPress(keyCode);\r\n        case \"isUp\":\r\n            return game.isKeyRelease(keyCode);\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getKeyboardState\"] = (game: Game, stateType: string, keyCode: number) => {\r\n    const keyDown =  game.isKeyDown(keyCode);\r\n    switch(stateType)\r\n    {\r\n        case \"isDown\":\r\n            return keyDown;\r\n        case \"isUp\":\r\n            return !keyDown;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getMouseEvent\"] = (game: Game, eventType: string) => {\r\n    switch(eventType)\r\n    {\r\n        case \"isDown\":\r\n            return game.isMouseOnceDown();\r\n        case \"isUp\":\r\n            return game.isMouseOnceUp();\r\n        case \"isClick\":\r\n            return game.isMouseOnceClick();\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getMouseState\"] = (game: Game, stateType: string) => {\r\n    const keyDown =  game.isMouseDown();\r\n    switch(stateType)\r\n    {\r\n        case \"isDown\":\r\n            return keyDown;\r\n        case \"isUp\":\r\n            return !keyDown;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getObject\"] = (game: Game, objectName: string) => {\r\n    return game.getObject(objectName);\r\n}\r\n\r\nBlockFunctions[\"getPos\"] = (game: Game, type: string, object: (MovieClip | Graphic)) => {\r\n    switch(type)\r\n    {\r\n        case \"x\":\r\n            return object.getTransform().x;\r\n        case \"y\":\r\n            return object.getTransform().y;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getVelocity\"] = (game: Game, type: string, object: (MovieClip | Graphic)) => {\r\n    if(!object.body)\r\n        return;\r\n\r\n    switch(type)\r\n    {\r\n        case \"x\":\r\n            return object.body.velocity.x;\r\n        case \"y\":\r\n            return object.body.velocity.y;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"mouseEvent\"] = (game: Game, object: (MovieClip | Graphic), type: string, blocks: (()=>void)) => {\r\n    if(object instanceof MovieClip)\r\n    {\r\n        console.log(\"무비클립은 마우스 이벤트를 지원하지 않습니다.\");\r\n        return;\r\n    }\r\n    game.addMouseEvent(object.sprite,type,blocks);\r\n}\r\n\r\nBlockFunctions[\"setPos\"] = (game: Game, object: (MovieClip | Graphic), x: number, y: number) => {\r\n    if(object.body){\r\n        const deltaX = object.body.vertices[0].x - object.body.position.x;\r\n        const deltaY = object.body.vertices[0].y - object.body.position.y;\r\n        Matter.Body.setPosition(object.body,{x:x-deltaX,y:y-deltaY});\r\n    }\r\n    const transform = object.getTransform();\r\n    transform.x = x;\r\n    transform.y = y;\r\n    object.setTransform(transform,true);\r\n}\r\n\r\nBlockFunctions[\"setVelocity\"] = (game: Game, object: (MovieClip | Graphic), x: number, y: number) => {\r\n    if(object.body){\r\n        Matter.Body.setVelocity(object.body,{x:x,y:y});\r\n    }\r\n}\r\n\r\nBlockFunctions[\"setRotation\"] = (game: Game, object: (MovieClip | Graphic), angle:number) => {\r\n    if(object.body){\r\n        console.log(angle);\r\n        Matter.Body.setAngle(object.body, angle*Math.PI/180);\r\n    }\r\n    const transform = object.getTransform();\r\n    transform.rotation = angle;\r\n    object.setTransform(transform,true);\r\n}\r\n\r\n\r\nBlockFunctions[\"play\"] = (game: Game, object: (MovieClip | Graphic)) => {\r\n    if(object instanceof MovieClip)\r\n    {\r\n        object.play();\r\n    }\r\n}\r\n\r\nBlockFunctions[\"stop\"] = (game: Game, object: (MovieClip | Graphic)) => {\r\n    if(object instanceof MovieClip)\r\n    {\r\n        object.stop();\r\n    }\r\n}\r\n\r\nBlockFunctions[\"gotoAndPlay\"] = (game: Game, object: (MovieClip | Graphic),frame:number) => {\r\n    if(object instanceof MovieClip)\r\n    {\r\n        object.gotoAndPlay(frame);\r\n    }\r\n}\r\n\r\nBlockFunctions[\"gotoAndStop\"] = (game: Game, object: (MovieClip | Graphic),frame:number) => {\r\n    if(object instanceof MovieClip)\r\n    {\r\n        object.gotoAndStop(frame);\r\n    }\r\n}\r\n\r\nBlockFunctions[\"checkDrawing\"] = (game: Game, object: (MovieClip | Graphic)) => {\r\n    return game.mainClip.getCurrentFrame().getObjects().indexOf(object)!=-1;\r\n}\r\n\r\nBlockFunctions[\"getCurrentFrame\"] = (game: Game, object: (MovieClip | Graphic)) => {\r\n    if(object instanceof MovieClip)\r\n    {\r\n        return object.currentFrame;\r\n    }\r\n    else{\r\n        return 1;\r\n    }\r\n}\r\n\r\nexport default BlockFunctions;","import Script from \"./Script\";\r\nimport Transform from \"./Transform\";\r\nimport MovieClip from \"./MovieClip\";\r\nimport Graphic from \"./Graphic\";\r\n\r\nimport * as PIXI from \"pixi.js\";\r\n\r\ninterface Batch{\r\n    object: (MovieClip|Graphic);\r\n    transform: Transform;\r\n}\r\n\r\n\r\nexport default class Frame {\r\n    public script: Script | null = null;\r\n    private objects: (MovieClip | Graphic)[] = []\r\n    private batches: Batch[] = [];\r\n\r\n\r\n    public update(app: PIXI.Application, transform: Transform = Transform.init, entry: boolean = false) {\r\n        this.objects.forEach(object => {\r\n            object.update(app, transform);\r\n        });\r\n\r\n        if (entry) {\r\n            this.rebatchAll();\r\n        }\r\n    }\r\n\r\n    public updateBatchToCurrentState()\r\n    {\r\n        this.batches.map((batch)=>{\r\n            batch.transform = batch.object.getTransform();\r\n        })\r\n    }\r\n\r\n    public rebatchAll()\r\n    {\r\n        this.batches.forEach(batch => {\r\n            batch.object.setTransform(batch.transform);\r\n        });\r\n    }\r\n\r\n    public addObject(object: MovieClip | Graphic,transform :Transform) {\r\n        this.objects.push(object);\r\n        const batch:Batch = {object,transform} as Batch; \r\n        this.batches.push(batch);\r\n    }\r\n\r\n    public removeObject(object:MovieClip|Graphic)\r\n    {\r\n        this.objects.map((el,i)=>{\r\n            if(el==object){\r\n                this.objects.splice(i,1);\r\n                this.batches.splice(i,1);\r\n            }\r\n        })\r\n    }\r\n\r\n    public getObjects()\r\n    {\r\n        return this.objects;\r\n    }\r\n\r\n    public getBatches()\r\n    {\r\n        return this.batches;\r\n    }\r\n\r\n    public render(app: PIXI.Application)\r\n    {\r\n        this.objects.forEach(object => {\r\n            object.render(app);\r\n        });\r\n    }\r\n\r\n    public makeContainer()\r\n    {\r\n        this.rebatchAll();\r\n        const container = new PIXI.Container();\r\n\r\n        this.objects.map((object)=>{\r\n            if(object instanceof MovieClip){\r\n                container.addChild(object.makeContainer(1));\r\n            }\r\n            else{\r\n                container.addChild(object.sprite);\r\n            }\r\n            \r\n        });\r\n        return container;\r\n    }\r\n\r\n\r\n    public exportStruct()\r\n    {\r\n        let newBatchs:any = [];\r\n        this.batches.map(batch=>{\r\n            if(batch.object instanceof MovieClip){\r\n                const tempBatch  = batch.object.exportStruct(batch.transform);\r\n                newBatchs.push(tempBatch);\r\n            }\r\n            else{\r\n                newBatchs.push({type:\"Graphic\",name:batch.object.name,transform:batch.transform,maker:batch.object.exportMaker()});\r\n            }\r\n        })\r\n        return newBatchs;\r\n    }\r\n}","import * as PIXI from \"pixi.js\";\r\n\r\nimport Frame from \"./Frame\";\r\nimport Transform from \"./Transform\";\r\nimport Graphic from \"./Graphic\";\r\nimport Game from \"./Game\";\r\nimport ResourceManager from \"./ResourceManager\";\r\n\r\n\r\n\r\nexport default class MovieClip {\r\n  //객체 정보\r\n  public name:string;\r\n  private transform: Transform;\r\n  private childs: (MovieClip|Graphic)[] = []\r\n  private parent?: MovieClip;\r\n  //프레임\r\n  private frames: Frame[] = []; //프레임은 1부터 시작\r\n  public currentFrame: number = 1;\r\n  public isPlaying: boolean = true;\r\n  private nextUpdate:number = -1;\r\n\r\n  public body:Matter.Body|null = null; \r\n\r\n  constructor(name:string,transform = Transform.init) {\r\n    this.name = name;\r\n    this.transform = transform;\r\n    this.addFrame();\r\n  }\r\n\r\n  public setTransform(transform:Transform)\r\n  {\r\n      this.transform = transform;\r\n  }\r\n\r\n  public getTransform()\r\n  {\r\n    return this.transform.clone();\r\n  }\r\n\r\n\r\n  public play() {\r\n    this.isPlaying = true;\r\n  }\r\n\r\n  public stop() {\r\n    this.isPlaying = false;\r\n  }\r\n\r\n  public gotoAndStop(frame: number) {\r\n    this.nextUpdate = frame;\r\n    this.stop();\r\n  }\r\n\r\n  public gotoAndPlay(frame: number) {\r\n    this.nextUpdate = frame;\r\n    this.play();\r\n  }\r\n\r\n  public getFrameCount() {\r\n    return this.frames.length;\r\n  }\r\n\r\n  public addFrame() {\r\n    this.frames.push(new Frame());\r\n    return this.getFrameCount();\r\n  }\r\n\r\n  public removeFrame(i : number){\r\n    if(this.getFrameCount() == 1){\r\n      return 1;\r\n    }\r\n    \r\n    this.frames.splice(i-1,1);\r\n    this.currentFrame = Math.max(i-1,1);\r\n    return this.currentFrame;\r\n  }\r\n\r\n  public extendFramesTo(frame: number) {\r\n    const targetCount = frame - this.getFrameCount();\r\n    for (let i = 0; i < targetCount; i++) {\r\n      this.addFrame();\r\n    }\r\n  }\r\n\r\n  public getFrame(frame: number) {\r\n    return this.frames[frame-1];\r\n  }\r\n\r\n  public getCurrentFrame() {\r\n    return this.getFrame(this.currentFrame);\r\n  }\r\n\r\n  public addObject(Object: MovieClip | Graphic, frames: number[], transforms: Transform[]) {\r\n    frames.forEach((frame,i) => {\r\n      this.extendFramesTo(frame);\r\n      this.getFrame(frame).addObject(Object,transforms[i]);\r\n      this.childs.push(Object);\r\n      Object.setParent(this);\r\n    });\r\n  }\r\n\r\n  public removeObject(object: MovieClip|Graphic,frameNum:number)\r\n  {\r\n    const frame = this.getFrame(frameNum);\r\n    frame.removeObject(object);\r\n    this.childs.map((el,i)=>{\r\n      if(el==object){\r\n          this.childs.splice(i,1);\r\n      }\r\n  })\r\n  }\r\n\r\n  public getChild(num:number)\r\n  {\r\n    return this.childs[num];\r\n  }\r\n\r\n  public getParent()\r\n  {\r\n      return this.parent;\r\n  }\r\n  \r\n  public setParent(parent:MovieClip)\r\n  {\r\n      this.parent = parent;\r\n  }\r\n\r\n  public update(app: PIXI.Application, transform: Transform = Transform.init,init:boolean = false) {\r\n    //프레임 재생 처리\r\n    console.log(this.name);\r\n    console.log(this.currentFrame);\r\n    if(this.getFrameCount()<=1)\r\n    {\r\n      this.isPlaying = false;\r\n    }\r\n\r\n    if(this.nextUpdate !=-1)\r\n    {\r\n      this.currentFrame = this.nextUpdate;\r\n      this.nextUpdate = -1;\r\n    }\r\n\r\n    if(this.isPlaying)\r\n    {\r\n      if(this.currentFrame == this.getFrameCount())\r\n      {\r\n        this.currentFrame=1;\r\n      }\r\n      else{\r\n        this.currentFrame+=1;\r\n      }\r\n    }\r\n    //그리기 처리\r\n    this.getCurrentFrame().update(app, transform.calcChildTransform(this.transform),this.isPlaying||init);\r\n\r\n  }\r\n\r\n  public render(app: PIXI.Application)\r\n  {\r\n    this.getCurrentFrame().render(app);\r\n  }\r\n\r\n  public makeContainer(frame:number)\r\n  {\r\n    const container = this.getFrame(frame).makeContainer();\r\n    container.setTransform(this.transform.x,this.transform.y,this.transform.scaleX,this.transform.scaleY,this.transform.rotation);\r\n    return container;\r\n  }\r\n\r\n  public getBound()\r\n  {\r\n    const container = this.makeContainer(1);\r\n    container.angle = 0;\r\n    const bound = this.makeContainer(1).getBounds();\r\n    container.destroy();\r\n    return bound;\r\n  }\r\n\r\n  public exportStruct(transform:Transform)\r\n  {\r\n    let frames:any = [];\r\n    this.frames.map((frame)=>{\r\n      frames.push(frame.exportStruct());\r\n    }) \r\n    let struct = {type:\"MovieClip\",name:this.name,\r\n                 transform:transform,\r\n                 frames:frames,\r\n                 maker:this.exportMaker()}\r\n    return struct;\r\n  }\r\n\r\n  public exportMaker()\r\n  {\r\n    //makers = [];\r\n    //makers.push({type:\"MovieClip\",name:this.name,transform:this.transform});\r\n    // this.childs.map((child)=>{\r\n    //   makers.push(child.exportMaker())\r\n    // })\r\n    return {type:\"MovieClip\",name:this.name,transform:this.transform};\r\n  }\r\n\r\n  public exportJson()\r\n  {\r\n    return JSON.stringify(this.exportStruct(new Transform(0,0)));\r\n  }\r\n\r\n  static importJson(json:string,rm:ResourceManager,game:Game|undefined = undefined)\r\n  {\r\n    const struct  = JSON.parse(json);\r\n    const clip = this.make(struct.maker,rm,game);\r\n    clip.importStruct(struct,rm,game);\r\n    return clip;\r\n  }\r\n\r\n  public importStruct(struct:any,rm:ResourceManager,game:Game|undefined = undefined)\r\n  {\r\n    struct.frames.map((batches:any,i:number)=>{\r\n      batches.map((batch:any)=>{\r\n        const object = MovieClip.make(batch.maker,rm,game);\r\n        this.addObject(object,[i+1],[Transform.fromObject(batch.transform)]);\r\n        if(object instanceof MovieClip)\r\n        {\r\n          object.importStruct(batch,rm,game);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  static make(maker:any,resourceManager:ResourceManager,game:Game|undefined = undefined)\r\n  {\r\n    let object:any;\r\n    const transform = Transform.fromObject(maker.transform);\r\n    if(maker.type == \"MovieClip\"){\r\n      object = new MovieClip(maker.name,transform);\r\n    }\r\n    else { //Graphic\r\n      object = new Graphic(maker.name,transform,resourceManager,maker.texture,maker.width,maker.height);\r\n    }\r\n    if(game){\r\n      game.addObject(maker.name, object);\r\n    }\r\n    return object;\r\n  }\r\n}","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 231;","export default class Transform {\r\n    static init = new Transform(0, 0);\r\n\r\n    x: number;\r\n    y: number;\r\n    scaleX: number;\r\n    scaleY: number;\r\n    rotation: number;\r\n\r\n    constructor(x:number, y:number, scaleX = 1, scaleY = 1, rotation = 0) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.scaleX = scaleX;\r\n        this.scaleY = scaleY;\r\n        this.rotation = rotation;\r\n    }\r\n\r\n\r\n    public calcChildTransform(transform: Transform) {\r\n        const parent = this;\r\n        const child = transform;\r\n        const rotatedPos = this.rotatePos(child.x, child.y, parent.rotation);\r\n        return new Transform(\r\n            rotatedPos.x * parent.scaleX + parent.x,\r\n            rotatedPos.y * parent.scaleY + parent.y,\r\n            child.scaleX * parent.scaleX,\r\n            child.scaleY * parent.scaleY,\r\n            child.rotation + parent.rotation);\r\n    }\r\n\r\n    private rotatePos(x:number, y:number, seta:number) {\r\n        return {\r\n            x: x * Math.cos(seta) - y * Math.sin(seta),\r\n            y: y * Math.cos(seta) + x * Math.sin(seta)\r\n        };\r\n    }\r\n\r\n    public clone()\r\n    {\r\n        return new Transform(this.x,this.y,this.scaleX,this.scaleY,this.rotation);\r\n    }\r\n\r\n    static fromObject(transform:any){\r\n        return new Transform(transform.x,transform.y,transform.scaleX,transform.scaleY,transform.roatation);\r\n    }\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2NoZF\",\"AppBar\":\"App_AppBar__2Kg9l\",\"Blockly\":\"App_Blockly__3ite3\",\"screenContainer\":\"App_screenContainer__c3hxx\",\"Screen\":\"App_Screen__392HF\",\"Properties\":\"App_Properties__3WWL_\",\"tfContainer\":\"App_tfContainer__3MgPT\",\"test2\":\"App_test2__2Jmwd\",\"test1\":\"App_test1__3G2tV\",\"test3\":\"App_test3__1ssgM\",\"test4\":\"App_test4__10zIh\",\"test5\":\"App_test5__23SaN\",\"test6\":\"App_test6__3Kq8b\",\"test7\":\"App_test7__2T8nz\",\"test8\":\"App_test8__2o9tD\",\"test9\":\"App_test9__3JGwf\"};","import * as PIXI from \"pixi.js\";\r\nimport imageToBase64 from \"image-to-base64\"\r\n\r\n\r\n\r\nexport default class ResourceManager {\r\n    private loader = new PIXI.Loader();\r\n    private loading: number = 0;\r\n\r\n    private queue: { name: string, data: string }[] = [];\r\n    private struct:{name:string,data:string}[] = [];\r\n\r\n    private callBack = ()=>{};\r\n    constructor() {\r\n        this.loader.on(\"complete\", ()=>{this.callBack();this.callBack = ()=>{}});\r\n    }\r\n\r\n    public add(name: string, data: string) {\r\n        this.queue.push({ name: name, data: data });\r\n        return this;\r\n    }\r\n\r\n    public load(callback:()=>void) {\r\n        this.callBack = callback;\r\n        this.loading = this.queue.length;\r\n\r\n        for (let i = 0; i < this.queue.length; i++) {\r\n            const el = this.queue[i];\r\n\r\n            imageToBase64(el.data).then(\r\n                (response: string) => {\r\n                    this.addDirectBase64(el.name,\"data:image/png;base64,\"+response);\r\n                    this.onConvert();\r\n                }\r\n            ).catch(\r\n                (error: string) => {\r\n                    this.onConvert();\r\n                }\r\n            )\r\n        }\r\n        this.queue = [];\r\n        return this;\r\n    }\r\n\r\n    private onConvert() {\r\n        this.loading--;\r\n        if (this.loading == 0) {\r\n            this.loader.load();\r\n        }\r\n    }\r\n\r\n    public getTexture(name: string) {\r\n        return this.loader.resources[name].texture;\r\n    }\r\n\r\n    public exportJson()\r\n    {\r\n        return JSON.stringify(this.struct);\r\n    }\r\n\r\n    public importJson(json:string,callBack:()=>void)\r\n    {\r\n        \r\n        this.struct = JSON.parse(json);\r\n        this.struct.map(el=>{\r\n            this.loader.add(el.name, el.data);\r\n        })\r\n        this.loaderLoad(callBack);\r\n    }\r\n\r\n    public loaderLoad(callBack:()=>void)\r\n    {\r\n        this.callBack = callBack;\r\n        this.loader.load();\r\n    }\r\n\r\n    public addDirectBase64(name:string,data:string)\r\n    {\r\n        const base64 = data;\r\n        this.loader.add(name,base64);\r\n        this.struct.push({name:name,data:base64});\r\n        return this;\r\n    }\r\n}\r\n\r\n\r\n","import * as PIXI from \"pixi.js\";\r\nimport Transform from \"./Transform\";\r\nimport MovieClip from \"./MovieClip\";\r\nimport ResourceManager from \"./ResourceManager\";\r\n\r\nexport default class Graphic {\r\n\r\n    public name:string;\r\n    public sprite:PIXI.Sprite;\r\n\r\n    private pixiTransform:PIXI.Transform|undefined;\r\n    private transform:Transform;\r\n    public width?:number;\r\n    public height?:number;\r\n\r\n    private parent?:MovieClip;\r\n    public texId:string;\r\n    \r\n    public body:Matter.Body|null = null; \r\n\r\n    public getParent()\r\n    {\r\n        return this.parent;\r\n    }\r\n    \r\n    public setParent(parent:MovieClip)\r\n    {\r\n        this.parent = parent;\r\n    }\r\n\r\n    public setTransform(transform:Transform,updatePIXI:boolean = false)\r\n    {\r\n        this.transform = transform;\r\n        if(updatePIXI){\r\n            this.sprite.setTransform(transform.x,transform.y,transform.scaleX,transform.scaleY,transform.rotation);\r\n        }\r\n    }\r\n\r\n    public getTransform()\r\n    {\r\n        return this.transform.clone();\r\n    }\r\n\r\n    constructor(name:string,transform:Transform,resourceManager:ResourceManager,texId:string,width?:number,height?:number){\r\n        this.name = name;\r\n        this.texId = texId;\r\n        this.transform = transform;\r\n        this.sprite = PIXI.Sprite.from(resourceManager.getTexture(texId));\r\n\r\n        if(width)\r\n            this.width = width;\r\n        if(height)\r\n            this.height = height;\r\n        \r\n        this.width = this.sprite.width;\r\n        this.height = this.sprite.height;\r\n    }\r\n\r\n    public update(app: PIXI.Application, transform: Transform = Transform.init) {\r\n        const newTransform = transform.calcChildTransform(this.transform);\r\n        this.sprite.transform.position.set(newTransform.x,newTransform.y);\r\n        this.sprite.transform.rotation = newTransform.rotation;\r\n        this.sprite.scale.set(newTransform.scaleX,newTransform.scaleY);\r\n        this.pixiTransform = this.sprite.transform;\r\n\r\n        app.renderer.render(this.sprite,undefined,false);\r\n    }\r\n\r\n    public render(app: PIXI.Application)\r\n    {\r\n        if(this.pixiTransform)\r\n            this.sprite.transform = this.pixiTransform;\r\n        app.renderer.render(this.sprite,undefined,false);\r\n    }\r\n\r\n    public exportMaker()\r\n    {\r\n      return {type:\"Graphic\",name:this.name,transform:this.transform,texture:this.texId,width:this.width,height:this.height};\r\n    }\r\n}","import React, { useRef, useEffect } from 'react'\r\nimport Game from '../GameEngine/Game';\r\nimport ResourceManager from '../GameEngine/ResourceManager';\r\nimport BlockFunctions from '../GameEngine/blockFuncs/BlockFunctions';\r\nimport MovieClip from '../GameEngine/MovieClip';\r\nimport { Sprite } from 'pixi.js';\r\n\r\n\r\ninterface Props{\r\n    width:number,\r\n    height:number,\r\n    gameJson:string,\r\n    className?:string,\r\n}\r\n\r\n\r\nconst GameScreen:React.FC<Props> = (props)=>{\r\n\r\n    let game = useRef<Game>();\r\n    let stageDiv = useRef<HTMLElement | null>(null);\r\n    \r\n    const init = ()=>{\r\n        if(!stageDiv.current) {\r\n            return;\r\n        }\r\n        if(props.gameJson==\"\"){\r\n            return;\r\n        }\r\n        game.current = new Game(props.width,props.height,stageDiv.current);\r\n        \r\n        try{\r\n            const gameFile = JSON.parse(props.gameJson);\r\n            const rm = new ResourceManager();\r\n            rm.importJson(gameFile.resource, () => {\r\n                if (game.current == undefined) {\r\n                    return;\r\n                }\r\n                game.current.mainClip = MovieClip.importJson(gameFile.objects, rm, game.current);\r\n                eval(`(function(game,blockFunctions){${gameFile.code}})`)(game.current, BlockFunctions);\r\n                game.current.start();\r\n            });\r\n        }\r\n        catch(e){\r\n            alert(\"에러 발생\")\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        //초기화\r\n        init();\r\n        return () => {\r\n            game.current?.destroy();\r\n        }\r\n    },[]);\r\n    return (\r\n        <div className = {props.className} style = {{border:\"#F3F3F3 solid 3px\"}} ref={ref => { stageDiv.current = ref }} />\r\n    );\r\n}\r\n\r\n\r\nexport default GameScreen;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sFrame\":\"Frame_sFrame__1VieA\",\"usFrame\":\"Frame_usFrame__1DJN2\",\"bar\":\"Frame_bar__sb_4H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"GamePlayer\":\"GamePlayer_GamePlayer__3oK38\",\"GameScreen\":\"GamePlayer_GameScreen__sUThz\"};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      (\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import * as PIXI from 'pixi.js';\r\nimport FrontUI from './FrontUI';\r\n\r\nexport default class TransformEditor {\r\n    private app: PIXI.Application;\r\n    private container = new PIXI.Container();\r\n\r\n    private frontUI: FrontUI;\r\n    private border = new PIXI.Graphics();\r\n    private points: PIXI.Graphics[] = [];\r\n    private style: { color: number, thickness: number, radius: number };\r\n\r\n    public transformChanged: ((index: number, transform: PIXI.Transform) => void) = () => { };\r\n    public selectedTargetChanged: ((index: number | undefined) => void) = () => { };\r\n    public selectedTargetMoving: (x: number, y: number) => void = () => { };\r\n\r\n    constructor(app: PIXI.Application, style: { color: number, thickness: number, radius: number }) {\r\n        this.app = app;\r\n        this.style = style;\r\n\r\n        app.ticker.add(() => { this.tick() });\r\n        this.init();\r\n        this.frontUI = new FrontUI(app);\r\n    }\r\n\r\n    private tick() {\r\n        this.frontUI.update();\r\n        if (this.targetIndex == undefined)\r\n        {\r\n            this.setVisiblePoints(false);\r\n            return;\r\n        }\r\n            \r\n        const target = this.objects[this.targetIndex];\r\n        const bound = target.getBounds();\r\n        this.frontUI.drawRect(5, 0x66CC00, 1, bound.x - 2.5, bound.y - 2.5, bound.width + 5, bound.height + 5, 0);\r\n    }\r\n\r\n    private init() {\r\n        for (let i = 0; i < 10; i++) {\r\n            const point = new PIXI.Graphics();\r\n            point.beginFill(this.style.color);\r\n            point.drawCircle(0, 0, this.style.radius);\r\n            this.app.stage.addChild(point);\r\n            point.addListener(\"mousedown\", () => { this.pointMouseDown(i) });\r\n            point.addListener(\"mouseover\", () => { this.pointMouseOver(i) });\r\n            point.addListener(\"mouseout\", () => { this.pointMouseOut(i) });\r\n            point.visible = false;\r\n            point.interactive = true;\r\n            this.points.push(point);\r\n            point.zIndex = 1000;\r\n            this.app.stage.sortChildren();\r\n        }\r\n        document.addEventListener(\"keydown\",(e)=>{if(e.keyCode == 27){this.removeTarget()}});\r\n        this.app.stage.addListener(\"mouseup\", () => { this.mouseUp() });\r\n        this.app.stage.addListener(\"mousemove\", (e) => { this.mouseMove(e.data.global.x, e.data.global.y) });\r\n    }\r\n\r\n    //Points\r\n    //    8\r\n    //0   1   2\r\n    //3   9   4\r\n    //5   6   7\r\n    private state: State = State.none;\r\n\r\n    private currentPoint: number = -1;\r\n    private oppositePoint: number = -1;\r\n    private transX: boolean = false;\r\n    private transY: boolean = false;\r\n    private reposX: boolean = false;\r\n    private reposY: boolean = false;\r\n\r\n    private objects: PIXI.DisplayObject[] = [];\r\n    private targetIndex: number | undefined;\r\n\r\n    private setVisiblePoints(visible: boolean) {\r\n        this.points.forEach((point) => {\r\n            point.visible = visible;\r\n        })\r\n    }\r\n    private updatePoints(exeptNum:number) {\r\n        if (this.targetIndex == undefined) {\r\n            this.setVisiblePoints(false);\r\n            return;\r\n        }\r\n        this.setVisiblePoints(true);\r\n\r\n        const target = this.objects[this.targetIndex];\r\n        const boundPoints = target.getBounds();\r\n        const xMiddle = (boundPoints.left + boundPoints.right) / 2;\r\n        const yMiddle = (boundPoints.top + boundPoints.bottom) / 2;\r\n        let temp:any;\r\n        if(exeptNum!=-1){\r\n            temp = this.points[exeptNum].position;\r\n        }\r\n        this.points[0].position.set(boundPoints.left, boundPoints.top);\r\n        this.points[1].position.set(xMiddle, boundPoints.top);\r\n        this.points[2].position.set(boundPoints.right, boundPoints.top);\r\n        this.points[3].position.set(boundPoints.left, yMiddle);\r\n        this.points[4].position.set(boundPoints.right, yMiddle);\r\n        this.points[5].position.set(boundPoints.left, boundPoints.bottom);\r\n        this.points[6].position.set(xMiddle, boundPoints.bottom);\r\n        this.points[7].position.set(boundPoints.right, boundPoints.bottom);\r\n        this.points[8].position.set();\r\n        this.points[9].position.set();\r\n\r\n        if(exeptNum!=-1){\r\n            this.points[exeptNum].position = temp;\r\n        }\r\n    }\r\n\r\n    public setObjects(objects: PIXI.DisplayObject[]) {\r\n        this.objects = objects;\r\n        for (let i = 0; i < objects.length; i++) {\r\n            objects[i].removeAllListeners();\r\n            objects[i].addListener(\"mousedown\", () => { this.targetMouseDown(i) });\r\n            objects[i].addListener(\"mouseover\", () => { this.mouseOver(objects[i]) });\r\n            objects[i].addListener(\"mouseout\", () => { this.mouseOut(objects[i]) });\r\n            objects[i].interactive = true;\r\n        }\r\n        this.state = State.none;\r\n        if (objects.length != 0)\r\n            this.setTarget(this.targetIndex = objects.length - 1)\r\n        else this.removeTarget();\r\n    }\r\n\r\n    public setTarget(targetIndex: number) {\r\n        this.targetIndex = targetIndex;\r\n        this.selectedTargetChanged(this.targetIndex);\r\n    }\r\n\r\n    public removeTarget() {\r\n        this.targetIndex = undefined;\r\n        this.selectedTargetChanged(undefined);\r\n    }\r\n\r\n    public mouseOver(target: PIXI.DisplayObject) {\r\n        if (this.state == State.moving)\r\n            return;\r\n        target.alpha = 0.7;\r\n    }\r\n\r\n    public mouseOut(target: PIXI.DisplayObject) {\r\n        if (this.state == State.moving)\r\n            return;\r\n        target.alpha = 1;\r\n    }\r\n\r\n    public mouseDown() {\r\n        console.log('asdasd')\r\n        this.removeTarget();\r\n    }\r\n\r\n    //events\r\n    private pointMouseOver(num: number)\r\n    {\r\n        console.log(num);\r\n        this.points[num].alpha = 0.7;\r\n    }\r\n    private pointMouseOut(num: number)\r\n    {\r\n        this.points[num].alpha = 1;\r\n    }\r\n    private pointMouseDown(num: number) {\r\n        console.log(num);\r\n        if (num <= 7) {\r\n            this.transX = false;\r\n            this.transY = false;\r\n\r\n            if(num == 3||num==4){\r\n                this.transX = true;\r\n            }\r\n            else if(num==1||num==6){\r\n                this.transY = true;\r\n            }\r\n            else{\r\n                this.transX = true;\r\n                this.transY = true;\r\n            }\r\n\r\n            this.reposX = false;\r\n            this.reposY = false;\r\n            if(num==0||num==3||num==5){\r\n                this.reposX = true;\r\n            }\r\n            if(num == 0||num==1||num==2){\r\n                this.reposY = true;\r\n            }\r\n            this.currentPoint = num;\r\n            this.oppositePoint = 7 - num;\r\n            this.state = State.resizing;\r\n        }\r\n    }\r\n\r\n    private targetMouseDown(index: number) {\r\n        this.setTarget(index);\r\n        this.state = State.moving;\r\n    }\r\n\r\n    private mouseUp() {\r\n        if (this.targetIndex == undefined)\r\n            return;\r\n        if (this.state == State.moving) {\r\n            const index = this.targetIndex;\r\n            this.transformChanged(index, this.objects[index].transform);\r\n        }\r\n        if (this.state == State.resizing) {\r\n            this.currentPoint = -1;\r\n            this.oppositePoint = -1;\r\n            const index = this.targetIndex;\r\n            this.transformChanged(index, this.objects[index].transform);\r\n            console.log(this.objects[index].transform.scale.x)\r\n        }\r\n        this.state = State.none;\r\n    }\r\n\r\n    private prevMouseX: number = 0;\r\n    private prevMouseY: number = 0;\r\n\r\n    private mouseMove(x: number, y: number) {\r\n        const deltaMouseX = x - this.prevMouseX;\r\n        const deltaMouseY = y - this.prevMouseY;\r\n        this.prevMouseX = x;\r\n        this.prevMouseY = y;\r\n\r\n        if (this.targetIndex == undefined)\r\n            return;\r\n        const target = this.objects[this.targetIndex];\r\n\r\n        if (this.state == State.moving) {\r\n            target.transform.position.x += deltaMouseX;\r\n            target.transform.position.y += deltaMouseY;\r\n\r\n            this.selectedTargetMoving(target.transform.position.x, target.transform.position.y);\r\n        }\r\n        \r\n        if (this.state == State.resizing) {\r\n            const cpoint = this.points[this.currentPoint];\r\n            const opoint = this.points[this.oppositePoint]\r\n            if(this.reposX)\r\n            {\r\n                target.x = x;\r\n            }\r\n            if(this.reposY)\r\n            {\r\n                target.y = y;\r\n            }\r\n            if (this.transX) {\r\n                cpoint.x = x;\r\n                const distanceX = (this.reposX?1:-1)*(opoint.x - cpoint.x);\r\n                target.scale.x = distanceX/(target.getLocalBounds().width);\r\n            }\r\n            if (this.transY) {\r\n                cpoint.y = y;\r\n                const distanceY = (this.reposY?1:-1)*(opoint.y - cpoint.y);\r\n                target.scale.y = distanceY/(target.getLocalBounds().height);\r\n            }\r\n\r\n        }\r\n        this.updatePoints(this.currentPoint);\r\n    }\r\n    //calcs\r\n}\r\n\r\n\r\nenum State {\r\n    none,\r\n    moving,\r\n    resizing,\r\n    rotating,\r\n}","import React, { useEffect, useRef } from 'react'\r\nimport * as PIXI from 'pixi.js';\r\nimport MovieClip from '../GameEngine/MovieClip';\r\nimport Graphic from '../GameEngine/Graphic';\r\nimport TransformEditor from './ScreenUtils/TransformEditor';\r\nimport Frame from '../GameEngine/Frame';\r\n\r\n\r\ninterface Props {\r\n    width: number,\r\n    height: number,\r\n    frame: number,\r\n    movieClip: MovieClip,\r\n    selectedTargetChanged:(index:number|undefined)=>void,\r\n    selectedTargetMoving:(x:number,y:number)=>void,\r\n    resetFunc:Function,\r\n    className:string,\r\n}\r\n\r\n/*\r\n★TODO\r\n0.  만들기 이전에 받는 객체는 모두 PIXIObject로 처리, 외부에서 EngineObject로 변환 -> \r\n    아이디가 잇으면 좋을수도?(아이디는 나중에 처리해도 안늦음) index로처리해도 될듯?정해져있으니까?\r\n    추가나 제거 경우에는 이벤트로 처리하거나? 프레임 전체를 초기화해야할듯\r\n1.  UI graphic 함수화\r\n2.  Transform Editor는 별도 객체로 처리 -> 이벤트 발생\r\n3.  선택 클릭\r\n4.  드래그 선택\r\n5.  state 잘 정해서 마우스 이벤트 별로 정리\r\n*/\r\n\r\n\r\n\r\nlet app:PIXI.Application;\r\nlet container:PIXI.Container;\r\nlet transformEditor:TransformEditor;\r\nlet frame:Frame;\r\nlet gameObjects:(MovieClip|Graphic)[];\r\nlet pixiObjects:PIXI.DisplayObject[];\r\n\r\n\r\nconst Screen: React.FC<Props> = (props) => {\r\n    const stageDiv = useRef<HTMLElement | null>(null);\r\n    const init = ()=>{\r\n        app  = new PIXI.Application({ width: props.width, height: props.height,backgroundColor:0xFFFFFF });\r\n        if(stageDiv.current)\r\n            stageDiv.current.appendChild(app.view);\r\n        transformEditor  = new TransformEditor(app, { color: 0x00CC99, radius: 10, thickness: 3 });\r\n        app.stage.interactive = true;\r\n        app.stage.interactiveChildren = true;\r\n        app.stage.hitArea = new PIXI.Rectangle(0, 0, app.renderer.width / app.renderer.resolution,\r\n            app.renderer.height / app.renderer.resolution);\r\n\r\n        transformEditor.transformChanged = (index, transform) => {\r\n            const transform_ = gameObjects[index].getTransform();\r\n            transform_.x = transform.position.x;\r\n            transform_.y = transform.position.y;\r\n            transform_.scaleX = transform.scale.x;\r\n            transform_.scaleY = transform.scale.y;\r\n            gameObjects[index].setTransform(transform_,true);\r\n            frame.updateBatchToCurrentState();\r\n        };\r\n\r\n        transformEditor.selectedTargetChanged = props.selectedTargetChanged;\r\n\r\n        transformEditor.selectedTargetMoving = props.selectedTargetMoving;\r\n\r\n        props.resetFunc(reset);\r\n    }\r\n\r\n    const reset = (movieClip:MovieClip,frameNum:number)=>{\r\n        if(container)\r\n            app.stage.removeChild(container);\r\n        \r\n        container = new PIXI.Container();\r\n        container.interactiveChildren = true;\r\n        container.interactive = true;\r\n        app.stage.addChild(container);\r\n        frame = movieClip.getFrame(frameNum);\r\n        frame.rebatchAll();\r\n        gameObjects = frame.getObjects();\r\n        \r\n        pixiObjects = [];\r\n        for(let i = 0; i < gameObjects.length;i++){\r\n            \r\n            const gameObject = gameObjects[i];\r\n            let pixiObject:PIXI.DisplayObject;\r\n    \r\n            if(gameObject instanceof MovieClip){\r\n                pixiObject=gameObject.makeContainer(1);\r\n            }\r\n            else{\r\n                pixiObject=gameObject.sprite;\r\n            }\r\n    \r\n            container.addChild(pixiObject);\r\n            pixiObjects.push(pixiObject);\r\n        }\r\n        transformEditor.setObjects(pixiObjects);\r\n    }\r\n\r\n    \r\n    useEffect(() => {\r\n        //초기화\r\n        init();\r\n        return () => {\r\n            //마지막\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div className = {props.className} ref={ref => { stageDiv.current = ref }} />\r\n    );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// const Screen: React.FC<Props> = (props) => {\r\n\r\n//     let stageDiv: HTMLElement | null;\r\n//     const app = new PIXI.Application({ width: props.width, height: props.height });\r\n//     const rect = new PIXI.Graphics();\r\n//     let draggingObject:{pixiObject:PIXI.DisplayObject,gameObject:(MovieClip|Graphic)}|null;\r\n\r\n\r\n//     useEffect(() => {\r\n//         //초기화\r\n//         stageDiv?.appendChild(app.view);\r\n//         app.stage.addChild(rect);\r\n//         app.stage.interactive = true;\r\n//         app.stage.interactiveChildren = true;\r\n//         app.stage.hitArea = new PIXI.Rectangle(0, 0, app.renderer.width/app.renderer.resolution, app.renderer.height/app.renderer.resolution);\r\n//         rect.zIndex = 0;\r\n//         app.ticker.add((delta)=>{\r\n\r\n//         });\r\n//     }, [])\r\n\r\n//     useEffect(() => {\r\n//         const container = new PIXI.Container();\r\n//         container.pivot.set(0.5, 0.5);\r\n//         container.position.set(props.width / 2, props.height / 2);\r\n//         const frame = props.movieClip.getFrame(props.frame);\r\n//         frame.rebatchAll();\r\n//         frame.getObjects().map((object) => {\r\n//             let pixiObject:PIXI.DisplayObject;\r\n//             if (object instanceof MovieClip) {\r\n//                 pixiObject = object.makeContainer(1);\r\n//             }\r\n//             else {\r\n//                 pixiObject = object.sprite;\r\n//             }\r\n\r\n//             pixiObject.interactive = true;\r\n//             pixiObject.addListener('mouseover',(e)=>{objectOver(e,object)})\r\n//             pixiObject.addListener('mouseout',(e)=>{objectOut(e,object)})\r\n//             pixiObject.addListener('mousedown',(e)=>{objectMouseDown(e,object)})\r\n//             app.stage.addListener('mouseup',mouseUp)\r\n//             app.stage.addListener('mousemove',mouseMove)\r\n//             container.addChild(pixiObject);\r\n//         });\r\n//         app.stage.addChild(container);\r\n//     })\r\n\r\n//     const objectOver = (event:PIXI.interaction.InteractionEvent,gameObject:Graphic|MovieClip)=>{\r\n//         const bound  = event.target.getBounds()\r\n//         rect.lineStyle(5, 0xFF0000);\r\n//         rect.drawRect(bound.x,bound.y,bound.width,bound.height);\r\n//     }\r\n//     const objectOut = (event:PIXI.interaction.InteractionEvent,gameObject:Graphic|MovieClip)=>{\r\n//         rect.clear();\r\n//     }\r\n//     const objectMouseDown = (event:PIXI.interaction.InteractionEvent,gameObject:Graphic|MovieClip)=>{\r\n//         draggingObject = {pixiObject:event.target,gameObject:gameObject};\r\n//     }\r\n//     const mouseUp = ()=>{\r\n//         if(draggingObject)\r\n//         {\r\n//             draggingObject.pixiObject.alpha = 1;\r\n//         }\r\n//         draggingObject = null;\r\n//         (\"up\");\r\n//     }\r\n\r\n//     let prevMouseX:number;\r\n//     let prevMouseY:number;\r\n\r\n//     const mouseMove = (event:PIXI.interaction.InteractionEvent)=>{\r\n//         const deltaMouseX = event.data.global.x - prevMouseX;\r\n//         const deltaMouseY = event.data.global.y - prevMouseY;\r\n//         prevMouseX = event.data.global.x;\r\n//         prevMouseY = event.data.global.y;\r\n\r\n//         if(draggingObject)\r\n//         {   \r\n//             const bound = draggingObject.pixiObject.getBounds();\r\n//             rect.clear();\r\n//             rect.lineStyle(5, 0x00CC66);\r\n//             rect.drawRect(bound.x,bound.y,bound.width,bound.height);\r\n//             draggingObject.pixiObject.transform.position.x+=deltaMouseX;\r\n//             draggingObject.pixiObject.transform.position.y+=deltaMouseY;\r\n//             draggingObject.pixiObject.alpha = 0.7;\r\n//         }\r\n//     }\r\n\r\n\r\n//     return (\r\n//         <div ref={ref => { stageDiv = ref }} />\r\n//     );\r\n// }\r\n\r\nexport default Screen;","import * as PIXI from 'pixi.js';\r\n\r\nexport default class FrontUI {\r\n    private app: PIXI.Application;\r\n    private container = new PIXI.Container();\r\n\r\n    constructor(app: PIXI.Application) {\r\n        this.app = app;\r\n        this.app.stage.addChildAt(this.container,0);\r\n    }\r\n\r\n    public update()\r\n    {\r\n        this.container.removeChildren();\r\n        this.container.zIndex = 100;\r\n        this.app.stage.sortChildren();\r\n    }\r\n\r\n    public drawRect(lineWidth: number, lineColor: number, alpha: number, x: number, y: number, width: number, height: number, rotation: number, pivot: { x: number, y: number } = { x: 0, y: 0 }) {\r\n        this.drawShape(lineWidth, lineColor, alpha, (graphic: PIXI.Graphics) => {\r\n            graphic.drawRect(x, y, width, height);\r\n            graphic.rotation = rotation;\r\n            graphic.pivot.set(pivot.x, pivot.y);\r\n        });\r\n    }\r\n\r\n    public drawCircle(lineWidth: number, lineColor: number, alpha: number, x: number, y: number, radius: number, rotation: number, pivot: { x: number, y: number } = { x: 0, y: 0 }) {\r\n        this.drawShape(lineWidth, lineColor, alpha, (graphic: PIXI.Graphics) => {\r\n            graphic.drawCircle(x, y, radius);\r\n            graphic.rotation = rotation;\r\n        });\r\n    }\r\n\r\n    public drawLine(lineWidth: number, lineColor: number, alpha: number, x1: number, y1: number, x2: number, y2: number, rotation: number, pivot: { x: number, y: number } = { x: 0, y: 0 }) {\r\n        this.drawShape(lineWidth, lineColor, alpha, (graphic: PIXI.Graphics) => {\r\n            graphic.moveTo(x1, y1).lineTo(x2, y2);\r\n            graphic.rotation = rotation;\r\n        });\r\n    }\r\n\r\n    public drawShape(lineWidth: number, lineColor: number, alpha: number, drawing: (graphic:PIXI.Graphics) => void) {\r\n\r\n        const graphic = new PIXI.Graphics();\r\n        graphic.lineStyle(lineWidth, lineColor, alpha);\r\n        drawing(graphic);\r\n        this.container.addChild(graphic);\r\n    }\r\n}","import * as Blockly from 'blockly/core';\r\n\r\nBlockly.Blocks['setpos'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"무비클립\");\r\n    this.appendValueInput(\"X\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"의 위치를\")\r\n        .appendField(\"X:\");\r\n    this.appendValueInput(\"Y\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"Y:\");\r\n    this.appendDummyInput()\r\n        .appendField(\"로 설정\");\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(230);\r\n this.setTooltip(\"좌표 설정\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getobject'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"objectName\")\r\n        .setCheck(\"String\")\r\n        .appendField(\"오브젝트 :\");\r\n    this.setOutput(true, \"object\");\r\n    this.setColour(230);\r\n this.setTooltip(\"오브젝트를 이름으로 찾습니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getpos'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트의 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"x\",\"x\"], [\"y\",\"y\"]]), \"type\")\r\n        .appendField(\"좌표\");\r\n    this.setOutput(true, \"Number\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['gametick'] = {\r\n  init: function() {\r\n    this.appendStatementInput(\"blocks\")\r\n        .setCheck(null)\r\n        .appendField(\"게임 틱\");\r\n    this.setColour(255);\r\n this.setTooltip(\"게임 틱마다 내용을 반복합니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getmousestate'] = {\r\n  init: function() {\r\n    this.appendDummyInput()\r\n        .appendField(\"마우스가\")\r\n        .appendField(new Blockly.FieldDropdown([[\"누른상태\",\"isDown\"], [\"뗀상태\",\"isUp\"]]), \"stateType\")\r\n        .appendField(\"인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"마우스가 눌린 상태인지 뗀 상태인지 확인합니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getmouseevent'] = {\r\n  init: function() {\r\n    this.appendDummyInput()\r\n        .appendField(\"마우스를 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"누른\",\"isDown\"], [\"뗀\",\"isUp\"], [\"클릭한\",\"isClick\"]]), \"eventType\")\r\n        .appendField(\"순간인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"마우스가 이벤트당  한번만 True를 반환합니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getkeyboardstate'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"keycode\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"다음 키가 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"눌린\",\"isDown\"], [\"뗀\",\"isUp\"]]), \"statetype\")\r\n        .appendField(\"상태인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getkeyboardevent'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"keycode\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"다음 키를 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"누른\",\"isDown\"], [\"뗀\",\"isUp\"]]), \"eventType\")\r\n        .appendField(\"순간인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['addphysics'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트에 물리엔진 추가\");\r\n    this.appendValueInput(\"friction\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"마찰\");\r\n    this.appendValueInput(\"mass\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"질량\");\r\n    this.appendDummyInput()\r\n        .appendField(\"고정된 물체인가? \")\r\n        .appendField(new Blockly.FieldCheckbox(\"FALSE\"), \"isstatic\");\r\n    this.appendDummyInput()\r\n        .appendField(\"각도 고정\")\r\n        .appendField(new Blockly.FieldCheckbox(\"FALSE\"), \"norotation\");\r\n    this.setInputsInline(false);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(0);\r\n this.setTooltip(\"물리세계에 던진다!\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['addforce'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트에\");\r\n    this.appendValueInput(\"X\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"X:\");\r\n    this.appendValueInput(\"Y\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"Y:\");\r\n    this.appendDummyInput()\r\n        .appendField(\"만큼 힘주기\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['setvelocity'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트의 속도를\");\r\n    this.appendValueInput(\"X\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"X:\");\r\n    this.appendValueInput(\"Y\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"Y:\");\r\n    this.appendDummyInput()\r\n        .appendField(\"로 정하기\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getvelocity'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트의 속도\")\r\n        .appendField(new Blockly.FieldDropdown([[\"x\",\"x\"], [\"y\",\"y\"]]), \"type\")\r\n        .appendField(\"구하기\");\r\n    this.setOutput(true, \"Number\");\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['checkcollision'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"a\")\r\n        .setCheck(null)\r\n        .appendField(\"오브젝트\");\r\n    this.appendValueInput(\"b\")\r\n        .setCheck(null)\r\n        .appendField(\"오브젝트\");\r\n    this.appendDummyInput()\r\n        .appendField(\"사이의 충돌 확인\");\r\n    this.setInputsInline(true);\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['mouseevent'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\");\r\n    this.appendStatementInput(\"blocks\")\r\n        .setCheck(null)\r\n        .appendField(new Blockly.FieldDropdown([[\"눌림\",\"mousedown\"], [\"뗌\",\"mouseup\"], [\"움직임\",\"mousemove\"], [\"올림\",\"mouseover\"], [\"클릭\",\"mouseclick\"]]), \"type\")\r\n        .appendField(\"이벤트\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['gamestart'] = {\r\n  init: function() {\r\n    this.appendStatementInput(\"blocks\")\r\n        .setCheck(null)\r\n        .appendField(\"시작\");\r\n    this.setColour(50);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['setrotation'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"오브젝트\");\r\n    this.appendValueInput(\"NAME\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"의 각도를\");\r\n    this.appendDummyInput()\r\n        .appendField(\"로 설정\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\nBlockly.Blocks['currentobject'] = {\r\n  init: function() {\r\n    this.appendDummyInput()\r\n        .appendField(\"이 오브젝트\");\r\n    this.setOutput(true, \"object\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\nBlockly.Blocks['checkdrawing'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"isDrawing\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트가 그려지는 중인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\nBlockly.Blocks['getcurrentframe'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"currentframe\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트의 현재 프레임\");\r\n    this.setOutput(true, \"Number\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\nBlockly.Blocks['gotoandplay'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"obj\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"오브젝트\");\r\n    this.appendValueInput(\"frame\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"프레임\");\r\n    this.appendDummyInput()\r\n        .appendField(\"으로 이동한뒤 재생\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\nBlockly.Blocks['gotoandstop'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"obj\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"오브젝트\");\r\n    this.appendValueInput(\"frame\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"프레임\");\r\n    this.appendDummyInput()\r\n        .appendField(\"으로 이동한뒤 멈춤\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\nBlockly.Blocks['stop'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"obj\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"오브젝트\");\r\n    this.appendDummyInput()\r\n        .appendField(\"프레임 멈춤\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\nBlockly.Blocks['play'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"obj\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"오브젝트\");\r\n    this.appendDummyInput()\r\n        .appendField(\"프레임 재생\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['gamestart'] = function(block:any) {\r\n    var statements_blocks = Blockly.JavaScript.statementToCode(block, 'blocks');\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"gameStart\"](game, ()=>{\r\n        ${statements_blocks}\r\n    });\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['addforce'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_x = Blockly.JavaScript.valueToCode(block, 'X', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_y = Blockly.JavaScript.valueToCode(block, 'Y', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"addForce\"](game, ${value_object}, ${value_x}, ${value_y});\\n`;\r\n    return code;\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['addphysics'] = function (block: any) {\r\n  var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var value_friction = Blockly.JavaScript.valueToCode(block, 'friction', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var value_mass = Blockly.JavaScript.valueToCode(block, 'mass', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var checkbox_isstatic = block.getFieldValue('isstatic') == 'TRUE';\r\n  var checkbox_norotation = block.getFieldValue('norotation') == 'TRUE';\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"addPhysics\"](game, ${value_object}, ${value_friction}, ${value_mass}, ${checkbox_isstatic}, ${checkbox_norotation});\\n`;\r\n  return code;\r\n};\r\n\r\n","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['checkcollision'] = function(block:any) {\r\n    var value_a = Blockly.JavaScript.valueToCode(block, 'a', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_b = Blockly.JavaScript.valueToCode(block, 'b', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"checkCollision\"](game, ${value_a}, ${value_b})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['gametick'] = function (block: any) {\r\n  var statements_blocks = Blockly.JavaScript.statementToCode(block, 'blocks');\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"gameTick\"](game, ()=>{\r\n      ${statements_blocks}\r\n  });\\n`;\r\n  return code;\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getkeyboardevent'] = function(block:any) {\r\n  var dropdown_eventtype = block.getFieldValue('eventType');\r\n  var value_keycode = Blockly.JavaScript.valueToCode(block, 'keycode', Blockly.JavaScript.ORDER_ATOMIC);\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"getKeyboardEvent\"](game, \"${dropdown_eventtype}\", ${value_keycode})`;\r\n  // TODO: Change ORDER_NONE to the correct strength.\r\n  return [code, Blockly.JavaScript.ORDER_NONE];\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getkeyboardstate'] = function(block:any) {\r\n    var dropdown_statetype = block.getFieldValue('statetype');\r\n    var value_keycode = Blockly.JavaScript.valueToCode(block, 'keycode', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getKeyboardState\"](game, \"${dropdown_statetype}\", ${value_keycode})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getmouseevent'] = function(block:any) {\r\n    var dropdown_eventtype = block.getFieldValue('eventType');\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getMouseEvent\"](game, \"${dropdown_eventtype}\")`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getmousestate'] = function(block:any) {\r\n    var dropdown_statetype = block.getFieldValue('stateType');\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getMouseState\"](game, \"${dropdown_statetype}\")`;\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  }","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getobject'] = function(block:any) {\r\n    var value_objectname = Blockly.JavaScript.valueToCode(block, 'objectName', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getObject\"](game, ${value_objectname})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getpos'] = function(block:any) {\r\n    var dropdown_type = block.getFieldValue('type');\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getPos\"](game, \"${dropdown_type}\", ${value_object})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getvelocity'] = function(block:any) {\r\n    var dropdown_type = block.getFieldValue('type');\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getVelocity\"](game, \"${dropdown_type}\", ${value_object})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['mouseevent'] = function(block:any) {\r\n  var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var dropdown_type = block.getFieldValue('type');\r\n  var statements_blocks = Blockly.JavaScript.statementToCode(block, 'blocks');\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"mouseEvent\"](game, ${value_object}, \"${dropdown_type}\",()=>{\r\n    ${statements_blocks}\r\n  })\\n`;\r\n  return code;\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['setpos'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_x = Blockly.JavaScript.valueToCode(block, 'X', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_y = Blockly.JavaScript.valueToCode(block, 'Y', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"setPos\"](game, ${value_object}, ${value_x}, ${value_y})\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['setvelocity'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_x = Blockly.JavaScript.valueToCode(block, 'X', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_y = Blockly.JavaScript.valueToCode(block, 'Y', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"setVelocity\"](game, ${value_object}, ${value_x}, ${value_y})\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['setrotation'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_name = Blockly.JavaScript.valueToCode(block, 'NAME', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"setRotation\"](game, ${value_object}, ${value_name})\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['currentobject'] = function(block:any) {\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = '{CURRENTOBJECT}';\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getcurrentframe'] = function(block:any) {\r\n    var value_currentframe = Blockly.JavaScript.valueToCode(block, 'currentframe', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getCurrentFrame\"](game, ${value_currentframe})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['play'] = function(block:any) {\r\n    var value_obj = Blockly.JavaScript.valueToCode(block, 'obj', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"play\"](game, ${value_obj})\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['stop'] = function(block:any) {\r\n    var value_obj = Blockly.JavaScript.valueToCode(block, 'obj', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"stop\"](game, ${value_obj})\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['checkdrawing'] = function(block:any) {\r\n    var value_isdrawing = Blockly.JavaScript.valueToCode(block, 'isDrawing', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"stop\"](game, ${value_isdrawing})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['gotoandplay'] = function(block:any) {\r\n    var value_obj = Blockly.JavaScript.valueToCode(block, 'obj', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_frame = Blockly.JavaScript.valueToCode(block, 'frame', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"gotoAndPlay\"](game, ${value_obj}, ${value_frame})\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['gotoandstop'] = function(block:any) {\r\n    var value_obj = Blockly.JavaScript.valueToCode(block, 'obj', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_frame = Blockly.JavaScript.valueToCode(block, 'frame', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"gotoAndStop\"](game, ${value_obj}, ${value_frame})\\n`;\r\n    return code;\r\n  };","import BlocklyJS from 'blockly/javascript';\r\n\r\nimport \"./customBlocks/definitions/definition\"\r\nimport \"./customBlocks/generators/gameStart\"\r\nimport \"./customBlocks/generators/addForce\"\r\nimport \"./customBlocks/generators/addPhysics\"\r\nimport \"./customBlocks/generators/checkCollision\"\r\nimport \"./customBlocks/generators/gameTick\"\r\nimport \"./customBlocks/generators/getKeyboardEvent\"\r\nimport \"./customBlocks/generators/getKeyboardState\"\r\nimport \"./customBlocks/generators/getMouseEvent\"\r\nimport \"./customBlocks/generators/getMouseState\"\r\nimport \"./customBlocks/generators/getObject\"\r\nimport \"./customBlocks/generators/getPos\"\r\nimport \"./customBlocks/generators/getVelocity\"\r\nimport \"./customBlocks/generators/mouseEvent\"\r\nimport \"./customBlocks/generators/setPos\"\r\nimport \"./customBlocks/generators/setVelocity\"\r\nimport \"./customBlocks/generators/setRotation\"\r\nimport \"./customBlocks/generators/currentObject\"\r\nimport \"./customBlocks/generators/getCurrentFrame\"\r\nimport \"./customBlocks/generators/play\"\r\nimport \"./customBlocks/generators/stop\"\r\nimport \"./customBlocks/generators/checkDrawing\"\r\nimport \"./customBlocks/generators/gotoAndPlay\"\r\nimport \"./customBlocks/generators/gotoAndStop\"\r\nexport const INITIAL_XML = '<xml xmlns=\"http://www.w3.org/1999/xhtml\"></xml>';\r\n\r\nexport const INITIAL_TOOLBOX_XML = \r\n`<xml xmlns=\"http://www.w3.org/1999/xhtml\" id=\"toolbox\" style=\"display: none;\">\r\n<category name=\"Logic\" colour=\"#5C81A6\">\r\n  <block type=\"controls_if\"></block>\r\n  <block type=\"logic_compare\">\r\n    <field name=\"OP\">EQ</field>\r\n  </block>\r\n  <block type=\"logic_operation\">\r\n    <field name=\"OP\">AND</field>\r\n  </block>\r\n  <block type=\"logic_negate\"></block>\r\n  <block type=\"logic_boolean\">\r\n    <field name=\"BOOL\">TRUE</field>\r\n  </block>\r\n  <block type=\"logic_null\"></block>\r\n  <block type=\"logic_ternary\"></block>\r\n</category>\r\n<category name=\"Loops\" colour=\"#5CA65C\">\r\n  <block type=\"controls_repeat_ext\">\r\n    <value name=\"TIMES\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">10</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"controls_whileUntil\">\r\n    <field name=\"MODE\">WHILE</field>\r\n  </block>\r\n  <block type=\"controls_for\">\r\n    <field name=\"VAR\" id=\"C(8;cYCF}~vSgkxzJ+{O\" variabletype=\"\">i</field>\r\n    <value name=\"FROM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"TO\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">10</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"BY\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"controls_forEach\">\r\n    <field name=\"VAR\" id=\"Cg!CSk/ZJo2XQN3=VVrz\" variabletype=\"\">j</field>\r\n  </block>\r\n  <block type=\"controls_flow_statements\">\r\n    <field name=\"FLOW\">BREAK</field>\r\n  </block>\r\n</category>\r\n<category name=\"Math\" colour=\"#5C68A6\">\r\n  <block type=\"math_round\">\r\n    <field name=\"OP\">ROUND</field>\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">3.1</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_number\">\r\n    <field name=\"NUM\">0</field>\r\n  </block>\r\n  <block type=\"math_single\">\r\n    <field name=\"OP\">ROOT</field>\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">9</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_trig\">\r\n    <field name=\"OP\">SIN</field>\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">45</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_constant\">\r\n    <field name=\"CONSTANT\">PI</field>\r\n  </block>\r\n  <block type=\"math_number_property\">\r\n    <mutation divisor_input=\"false\"></mutation>\r\n    <field name=\"PROPERTY\">EVEN</field>\r\n    <value name=\"NUMBER_TO_CHECK\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">0</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_arithmetic\">\r\n    <field name=\"OP\">ADD</field>\r\n    <value name=\"A\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"B\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_on_list\">\r\n    <mutation op=\"SUM\"></mutation>\r\n    <field name=\"OP\">SUM</field>\r\n  </block>\r\n  <block type=\"math_modulo\">\r\n    <value name=\"DIVIDEND\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">64</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"DIVISOR\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">10</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_constrain\">\r\n    <value name=\"VALUE\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">50</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"LOW\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"HIGH\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">100</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_random_int\">\r\n    <value name=\"FROM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"TO\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">100</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_random_float\"></block>\r\n</category>\r\n<category name=\"Text\" colour=\"#5CA68D\">\r\n  <block type=\"text_charAt\">\r\n    <mutation at=\"true\"></mutation>\r\n    <field name=\"WHERE\">FROM_START</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"q@$ZF(L?Zo/z\\`d{o.Bp!\" variabletype=\"\">text</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"text\">\r\n    <field name=\"TEXT\"></field>\r\n  </block>\r\n  <block type=\"text_append\">\r\n    <field name=\"VAR\" id=\":};P,s[*|I8+L^-.EbRi\" variabletype=\"\">item</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\"></field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_length\">\r\n    <value name=\"VALUE\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_isEmpty\">\r\n    <value name=\"VALUE\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\"></field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_indexOf\">\r\n    <field name=\"END\">FIRST</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"q@$ZF(L?Zo/z\\`d{o.Bp!\" variabletype=\"\">text</field>\r\n      </block>\r\n    </value>\r\n    <value name=\"FIND\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_join\">\r\n    <mutation items=\"2\"></mutation>\r\n  </block>\r\n  <block type=\"text_getSubstring\">\r\n    <mutation at1=\"true\" at2=\"true\"></mutation>\r\n    <field name=\"WHERE1\">FROM_START</field>\r\n    <field name=\"WHERE2\">FROM_START</field>\r\n    <value name=\"STRING\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"q@$ZF(L?Zo/z\\`d{o.Bp!\" variabletype=\"\">text</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_changeCase\">\r\n    <field name=\"CASE\">UPPERCASE</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_trim\">\r\n    <field name=\"MODE\">BOTH</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_print\">\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_prompt_ext\">\r\n    <mutation type=\"TEXT\"></mutation>\r\n    <field name=\"TYPE\">TEXT</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n</category>\r\n<category name=\"Lists\" colour=\"#745CA6\">\r\n  <block type=\"lists_indexOf\">\r\n    <field name=\"END\">FIRST</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_create_with\">\r\n    <mutation items=\"0\"></mutation>\r\n  </block>\r\n  <block type=\"lists_repeat\">\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">5</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_length\"></block>\r\n  <block type=\"lists_isEmpty\"></block>\r\n  <block type=\"lists_create_with\">\r\n    <mutation items=\"3\"></mutation>\r\n  </block>\r\n  <block type=\"lists_getIndex\">\r\n    <mutation statement=\"false\" at=\"true\"></mutation>\r\n    <field name=\"MODE\">GET</field>\r\n    <field name=\"WHERE\">FROM_START</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_setIndex\">\r\n    <mutation at=\"true\"></mutation>\r\n    <field name=\"MODE\">SET</field>\r\n    <field name=\"WHERE\">FROM_START</field>\r\n    <value name=\"LIST\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_getSublist\">\r\n    <mutation at1=\"true\" at2=\"true\"></mutation>\r\n    <field name=\"WHERE1\">FROM_START</field>\r\n    <field name=\"WHERE2\">FROM_START</field>\r\n    <value name=\"LIST\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_split\">\r\n    <mutation mode=\"SPLIT\"></mutation>\r\n    <field name=\"MODE\">SPLIT</field>\r\n    <value name=\"DELIM\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">,</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_sort\">\r\n    <field name=\"TYPE\">NUMERIC</field>\r\n    <field name=\"DIRECTION\">1</field>\r\n  </block>\r\n</category>\r\n<category name=\"Colour\" colour=\"#A6745C\">\r\n  <block type=\"colour_picker\">\r\n    <field name=\"COLOUR\">#ff0000</field>\r\n  </block>\r\n  <block type=\"colour_random\"></block>\r\n  <block type=\"colour_rgb\">\r\n    <value name=\"RED\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">100</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"GREEN\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">50</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"BLUE\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">0</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"colour_blend\">\r\n    <value name=\"COLOUR1\">\r\n      <shadow type=\"colour_picker\">\r\n        <field name=\"COLOUR\">#ff0000</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"COLOUR2\">\r\n      <shadow type=\"colour_picker\">\r\n        <field name=\"COLOUR\">#3333ff</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"RATIO\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">0.5</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n</category>\r\n<sep></sep>\r\n<category name=\"Custom Button\" colour=\"#A6745C\">\r\n  <button text=\"A button\" callbackKey=\"myFirstButtonPressed\"></button>\r\n</category>\r\n<category name=\"Variables\" colour=\"#A65C81\" custom=\"VARIABLE\"></category>\r\n<category name=\"Functions\" colour=\"#9A5CA6\" custom=\"PROCEDURE\"></category>\r\n<category name=\"Engine\" colour=\"#5ba55b\">\r\n<block type=\"gamestart\"></block>\r\n<block type=\"setpos\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"X\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"Y\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"getpos\">\r\n  <field name=\"type\">x</field>\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"gametick\"></block>\r\n<block type=\"getmousestate\">\r\n  <field name=\"stateType\">isDown</field>\r\n</block>\r\n<block type=\"getmouseevent\">\r\n  <field name=\"eventType\">isDown</field>\r\n</block>\r\n<block type=\"getkeyboardstate\">\r\n  <field name=\"statetype\">isDown</field>\r\n  <value name=\"keycode\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"getkeyboardevent\">\r\n  <field name=\"eventType\">isDown</field>\r\n  <value name=\"keycode\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"addphysics\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"friction\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0.1</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"mass\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0.0001</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"addforce\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"X\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"Y\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"setvelocity\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"X\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"Y\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"getvelocity\">\r\n  <field name=\"type\">x</field>\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"checkcollision\">\r\n  <value name=\"a\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"b\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"mouseevent\">\r\n  <field name=\"type\">mousedown</field>\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"setrotation\">\r\n      <value name=\"object\">\r\n        <block type=\"getobject\">\r\n          <value name=\"objectName\">\r\n            <block type=\"text\">\r\n              <field name=\"TEXT\"></field>\r\n            </block>\r\n          </value>\r\n        </block>\r\n      </value>\r\n      <value name=\"NAME\">\r\n        <block type=\"math_number\">\r\n          <field name=\"NUM\">0</field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n    <block type=\"currentobject\"/>\r\n    <block type=\"checkdrawing\">\r\n    <value name=\"isDrawing\">\r\n      <block type=\"getobject\">\r\n        <value name=\"objectName\">\r\n          <block type=\"text\">\r\n            <field name=\"TEXT\"></field>\r\n          </block>\r\n        </value>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"getcurrentframe\">\r\n    <value name=\"currentframe\">\r\n      <block type=\"getobject\">\r\n        <value name=\"objectName\">\r\n          <block type=\"text\">\r\n            <field name=\"TEXT\"></field>\r\n          </block>\r\n        </value>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"stop\">\r\n    <value name=\"obj\">\r\n      <block type=\"getobject\">\r\n        <value name=\"objectName\">\r\n          <block type=\"text\">\r\n            <field name=\"TEXT\"></field>\r\n          </block>\r\n        </value>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"play\">\r\n    <value name=\"obj\">\r\n      <block type=\"getobject\">\r\n        <value name=\"objectName\">\r\n          <block type=\"text\">\r\n            <field name=\"TEXT\"></field>\r\n          </block>\r\n        </value>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"gotoandplay\">\r\n    <value name=\"obj\">\r\n      <block type=\"getobject\">\r\n        <value name=\"objectName\">\r\n          <block type=\"text\">\r\n            <field name=\"TEXT\"></field>\r\n          </block>\r\n        </value>\r\n      </block>\r\n    </value>\r\n    <value name=\"frame\">\r\n      <block type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"gotoandstop\">\r\n    <value name=\"obj\">\r\n      <block type=\"getobject\">\r\n        <value name=\"objectName\">\r\n          <block type=\"text\">\r\n            <field name=\"TEXT\"></field>\r\n          </block>\r\n        </value>\r\n      </block>\r\n    </value>\r\n    <value name=\"frame\">\r\n      <block type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n</category>\r\n</xml>`;\r\n\r\nconst INITIAL_TOOLBOX_CATEGORIES = [\r\n  {\r\n    name: 'Controls',\r\n    blocks: [\r\n      { type: 'controls_if' },\r\n      {\r\n        type: 'controls_repeat_ext',\r\n        values: {\r\n          TIMES: {\r\n            type: 'math_number',\r\n            shadow: true,\r\n            fields: {\r\n              NUM: 10,\r\n            },\r\n          },\r\n        },\r\n        statements: {\r\n          DO: {\r\n            type: 'text_print',\r\n            shadow: true,\r\n            values: {\r\n              TEXT: {\r\n                type: 'text',\r\n                shadow: true,\r\n                fields: {\r\n                  TEXT: 'abc',\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    name: 'Text',\r\n    blocks: [\r\n      { type: 'text' },\r\n      {\r\n        type: 'text_print',\r\n        values: {\r\n          TEXT: {\r\n            type: 'text',\r\n            shadow: true,\r\n            fields: {\r\n              TEXT: 'abc',\r\n            },\r\n          },\r\n        },\r\n      },\r\n    ],\r\n  },\r\n];\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport styles from './App.module.css';\r\nimport Screen from './components/Screen';\r\nimport Graphic from './GameEngine/Graphic';\r\nimport Transform from './GameEngine/Transform';\r\nimport MovieClip from './GameEngine/MovieClip';\r\nimport ReactBlocklyComponent from 'react-blockly';\r\nimport parseWorkspaceXml from 'react-blockly/src/BlocklyHelper';\r\n\r\nimport { INITIAL_XML, INITIAL_TOOLBOX_XML } from './content';\r\nimport * as Blockly from 'blockly/core';\r\nimport ResourceManager from './GameEngine/ResourceManager';\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\"\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\n\r\n\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\r\nimport Menu from '@material-ui/core/Menu';\r\n\r\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\r\nimport Link from '@material-ui/core/Link';\r\n\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport { generateUUID } from './Utils';\r\nimport fileDownload from 'js-file-download';\r\nimport GameScreen from './components/GameScreen';\r\n\r\nimport ReactModal from './resizableWindow/index';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\r\nimport FrameBar from './components/FrameBar';\r\n\r\n\r\n\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      '& > *': {\r\n        margin: theme.spacing(1),\r\n      },\r\n    },\r\n    input: {\r\n      display: 'none',\r\n    },\r\n    menuButton: {\r\n      marginRight: theme.spacing(2),\r\n    },\r\n    editProjectNameButton: {\r\n      marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n      marginRight: theme.spacing(3),\r\n    },\r\n    shareButton: {\r\n      marginLeft: \"auto\",\r\n    },\r\n    runButton: {\r\n      position: \"absolute\",\r\n      transform: \"translate(calc(50vw - 100%), 0)\",\r\n      transformOrigin: \"-50% 0\"\r\n    },\r\n    Button: {\r\n      width: \"100%\",\r\n      height: \"100%\"\r\n    },\r\n    link: {\r\n      color: \"white\",\r\n      fontSize: \"15px\",\r\n    }\r\n  }),\r\n);\r\n\r\nlet mainClip = new MovieClip(\"root\");\r\nlet resourceManager = new ResourceManager();\r\nlet selectedIndex: number | undefined = undefined;\r\nlet updateScreen: Function = () => { };\r\nlet currentClip: MovieClip = mainClip;\r\n\r\nlet workspace: any;\r\nlet codes: { name: string, xml: any }[] = [{ name: \"root\", xml: \"<xml xmlns=\\\"https://developers.google.com/blockly/xml\\\"></xml>\" }];\r\nlet workspaceInit = false;\r\nlet selectedObject2: MovieClip | Graphic | undefined = undefined;\r\n\r\nconst App = () => {\r\n  const workspaceChange = (w: any) => {\r\n    if (workspaceInit)\r\n      return;\r\n    console.log(\"적용!\");\r\n    workspaceInit = true;\r\n    workspace = w;\r\n  }\r\n  const [gameFile, setGameFile] = useState<string>(\"\");\r\n  const [objectName, setObjectName] = useState(\"\");\r\n  const [isMovieclip, setIsMovieclip] = useState(false);\r\n  const [selectedObject, setSelectedObject] = useState<MovieClip | Graphic | undefined>();\r\n  \r\n\r\n  //xy view\r\n  const xel = useRef<HTMLDivElement | null>();\r\n  const yel = useRef<HTMLDivElement | null>();\r\n\r\n  const classes = useStyles();\r\n\r\n  const graphicOpen = (e: any) => {\r\n    const file = e.target.files[0];\r\n    if (!file)\r\n      return;\r\n    var reader = new FileReader();\r\n    reader.onload = function (e) {\r\n      let contents = e.target?.result;\r\n      if (contents) {\r\n        let uuid = generateUUID();\r\n        resourceManager.addDirectBase64(uuid, contents.toString()).loaderLoad(() => {\r\n          addGraphic(file.name, uuid);\r\n        });\r\n      }\r\n    };\r\n    reader.readAsDataURL(file);\r\n  }\r\n\r\n  const addGraphic = (name: string, texId: string) => {\r\n    const graphic = new Graphic(name, new Transform(0, 0), resourceManager, texId);\r\n    currentClip.addObject(graphic, [currentFrame2.current], [new Transform(0, 0)]);\r\n    updateScreen(currentClip,currentFrame2.current);\r\n    codes.push({ name: name, xml: \"<xml xmlns=\\\"https://developers.google.com/blockly/xml\\\"></xml>\" });\r\n  }\r\n\r\n  const changeCurrentClip = (clip: MovieClip) => {\r\n    currentFrame2.current = 1;\r\n    setCurrentFrame({frame:1,max:clip.getFrameCount()});\r\n    currentClip = clip;\r\n    updateScreen(currentClip,1);\r\n    renderBreadcrumbs();\r\n  }\r\n\r\n  const getCodeXmlByObjectName = (name: string) => {\r\n    let xml: string = `<xml xmlns=\"https://developers.google.com/blockly/xml\"></xml>`;\r\n    if (name == \"root\") {\r\n      console.log(name);\r\n      return codes[0].xml;\r\n    }\r\n    for (let i = 1; i < codes.length; i++) {\r\n      const el = codes[i];\r\n      if (el.name == name) {\r\n        return el.xml\r\n      }\r\n    }\r\n    return xml;\r\n  }\r\n\r\n  const saveCodeXmlByObjectName = (name: string) => {\r\n    const xml = Blockly.Xml.workspaceToDom(workspace);\r\n    const xml_text = Blockly.Xml.domToText(xml);\r\n    codes.forEach((el, i) => {\r\n      if (el.name == name) {\r\n        codes[i].xml = xml_text;\r\n      }\r\n    });\r\n  }\r\n\r\n  const setWorkspaceCode = (xml: string) => {\r\n    try {\r\n      workspace.clear();\r\n      var dom = Blockly.Xml.textToDom(xml);\r\n      Blockly.Xml.domToWorkspace(dom, workspace);\r\n    }\r\n    catch{\r\n      console.log(\"오류남\\n\" + xml);\r\n    }\r\n  }\r\n\r\n  const selectedTargetChanged = (index: number | undefined) => {\r\n    if (selectedObject2 == undefined) {\r\n      saveCodeXmlByObjectName(\"root\");\r\n    }\r\n    else {\r\n      saveCodeXmlByObjectName(selectedObject2.name);\r\n    }\r\n\r\n    selectedIndex = index;\r\n    if (index == undefined) {\r\n      setSelectedObject(undefined);\r\n      selectedObject2 = undefined;\r\n\r\n      setObjectName(\"\");\r\n      setIsMovieclip(false);\r\n      setWorkspaceCode(getCodeXmlByObjectName(\"root\"));\r\n      return;\r\n    }\r\n    const nselectedObject = currentClip.getFrame(currentFrame2.current).getObjects()[index];\r\n    if (!nselectedObject) {\r\n      return;\r\n    }\r\n    console.log(getCodeXmlByObjectName(nselectedObject.name));\r\n    console.log(codes);\r\n    setWorkspaceCode(getCodeXmlByObjectName(nselectedObject.name));\r\n    const pos = nselectedObject.getTransform();\r\n    setSelectedObject(nselectedObject);\r\n    selectedObject2 = nselectedObject;\r\n    setXYPos(pos.x, pos.y);\r\n\r\n\r\n    setObjectName(nselectedObject.name);\r\n    setIsMovieclip(nselectedObject instanceof MovieClip);\r\n\r\n  }\r\n\r\n  const onNameInputChanged = (event: any) => {\r\n    if (selectedIndex == undefined) {\r\n      setObjectName(\"\");\r\n      return;\r\n    }\r\n    setObjectName(event.target.value);\r\n    if (selectedObject) {\r\n      for (let i = 1; i < codes.length; i++) {\r\n        const el = codes[i];\r\n        if (el.name == selectedObject.name) {\r\n          codes[i].name = event.target.value;\r\n          break;\r\n        }\r\n      }\r\n      selectedObject.name = event.target.value;\r\n    }\r\n  }\r\n\r\n  const removeSelectedObject = () => {\r\n    if (selectedObject2 != undefined) {\r\n      console.log(currentClip.getFrame(currentFrame2.current));\r\n      currentClip.getFrame(currentFrame2.current).removeObject(selectedObject2);\r\n      updateScreen(currentClip,currentFrame2.current);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  const goInside = () => {\r\n    if (selectedObject != undefined && selectedObject instanceof MovieClip) {\r\n      changeCurrentClip(selectedObject);\r\n    }\r\n  }\r\n\r\n  const goOutside = () => {\r\n    const parent = currentClip.getParent();\r\n    if (parent)\r\n      changeCurrentClip(parent);\r\n  }\r\n\r\n  const getResetFunc = (reset: Function) => {\r\n    updateScreen = reset;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  //materialui + ui\r\n\r\n  //menu\r\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState<null | HTMLElement>(null);\r\n  const handleMenuClose = () => {\r\n    setMenuAnchorEl(null);\r\n  };\r\n\r\n  const handleMenuClick = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n    setMenuAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const saveProject = () => {\r\n    const resource = resourceManager.exportJson();\r\n    const xml = JSON.stringify(codes);\r\n\r\n    const objectJson = mainClip.exportJson();\r\n    fileDownload(JSON.stringify({ resource: resource, xml: xml, objects: objectJson }), projectName + \".mandunda\");\r\n  }\r\n\r\n  const projectOpen = (e: any) => {    const file = e.target.files[0];\r\n    if (!file)\r\n      return;\r\n    selectedObject2 = new MovieClip(\"\");\r\n    var reader = new FileReader();\r\n    reader.onload = function (e) {\r\n      let contents = e.target?.result;\r\n      if (contents) {\r\n        const project = JSON.parse(contents.toString());\r\n        resourceManager = new ResourceManager();\r\n        resourceManager.importJson(project.resource, () => {\r\n          mainClip = MovieClip.importJson(project.objects, resourceManager);\r\n          workspace.clear();\r\n          codes = JSON.parse(project.xml);\r\n          console.log(codes);\r\n          // var xml = Blockly.Xml.textToDom(codes[0]);\r\n          // Blockly.Xml.domToWorkspace(xml, workspace);\r\n          changeCurrentClip(mainClip);\r\n        })\r\n      }\r\n    };\r\n    reader.readAsText(file);\r\n  }\r\n\r\n\r\n\r\n  //projectname\r\n  const [newPName, setNewPName] = useState(\"\");\r\n  const [projectName, setProjectName] = useState(\"New Project\");\r\n  const [openProjectNameDialog, setOpenProjectNameDialog] = useState(false);\r\n  const handleEditProjectNameClick = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n    setOpenProjectNameDialog(true);\r\n  };\r\n  const projectNameCloseDialog = (set: boolean) => {\r\n    if (set && newPName != \"\") {\r\n      setProjectName(newPName);\r\n    }\r\n    else {\r\n      setNewPName(projectName);\r\n    }\r\n    setOpenProjectNameDialog(false);\r\n  }\r\n\r\n  //movieclipName\r\n  const [newMcName, setNewMcName] = useState(\"new_movieclip\");\r\n  const [openMcNameDialog, setOpenMcNameDialog] = useState(false);\r\n  const makeMovieClip = () => {\r\n    if (selectedObject == undefined)\r\n      return;\r\n\r\n    setNewMcName(\"new_movieclip\")\r\n    setOpenMcNameDialog(true);\r\n    codes.push({ name: \"new_movieclip\", xml: \"<xml xmlns=\\\"https://developers.google.com/blockly/xml\\\"></xml>\" });\r\n  }\r\n\r\n  const mcNameCloseDialog = (set: boolean) => {\r\n    if (selectedObject == undefined)\r\n      return;\r\n    if (set && newMcName != \"\") {\r\n      currentClip.getFrame(currentFrame2.current).removeObject(selectedObject);\r\n      let newPos = selectedObject.getTransform();\r\n      const movieClip = new MovieClip(newMcName, new Transform(newPos.x, newPos.y));\r\n      newPos.x = 0;\r\n      newPos.y = 0;\r\n      movieClip.addObject(selectedObject, [1], [newPos]);\r\n      currentClip.addObject(movieClip, [1], [movieClip.getTransform()]);\r\n      updateScreen(currentClip,currentFrame2.current);\r\n    }\r\n    setOpenMcNameDialog(false);\r\n  }\r\n  //upload\r\n\r\n  const uploadProject = () => {\r\n    fetch(\"http://203.234.191.83:5353/\" + projectName.replace(\" \", \"_\"), {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      },\r\n      body: exportGameFile()\r\n    }).then((response) => {\r\n\r\n\r\n      alert(\"업로드 완료! 주소가 복사되었습니다!\");\r\n\r\n    });\r\n  }\r\n\r\n\r\n  //gamerun\r\n  const [gameRuning, setGameRunning] = useState(false);\r\n  const handleRunClick = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n    gameStart();\r\n    setGameRunning(true);\r\n  };\r\n  const closeGameDialog = () => {\r\n    setGameRunning(false);\r\n  }\r\n\r\n\r\n  const gameStart = () => {\r\n    setGameFile(exportGameFile());\r\n  }\r\n\r\n  const exportGameFile = () => {\r\n    const resource = resourceManager.exportJson();\r\n    let wholeCode = \"\";\r\n    \r\n    if (selectedObject == undefined) {\r\n      saveCodeXmlByObjectName(\"root\");\r\n    }\r\n    else {\r\n      saveCodeXmlByObjectName(selectedObject.name);\r\n    }\r\n    for (let i = 0; i < codes.length; i++) {\r\n      workspace.clear();\r\n      var xml = Blockly.Xml.textToDom(codes[i].xml);\r\n      Blockly.Xml.domToWorkspace(xml, workspace);\r\n      const tempCode =  Blockly.JavaScript.workspaceToCode(workspace).replaceAll(\"{CURRENTOBJECT}\",`blockFunctions[\"getObject\"](game, \"${codes[i].name}\")`);\r\n      console.log(tempCode);\r\n      wholeCode += tempCode;\r\n    }\r\n    if (selectedObject == undefined) {\r\n      setWorkspaceCode(getCodeXmlByObjectName(\"root\"));\r\n    }\r\n    else {\r\n      setWorkspaceCode(getCodeXmlByObjectName(selectedObject.name));\r\n    }\r\n    const objectJson = mainClip.exportJson();\r\n    console.log(objectJson);\r\n    return JSON.stringify({ resource: resource, code: wholeCode, objects: objectJson });\r\n  }\r\n\r\n\r\n  const resizeBlocky = () => {\r\n    if (workspace != null)\r\n      Blockly.svgResize(workspace);\r\n  }\r\n\r\n  const setXYPos = (x: number, y: number) => {\r\n    if (!xel.current || !yel.current)\r\n      return;\r\n    if (!selectedObject) {\r\n      xel.current.textContent = \"X: -\";\r\n      yel.current.textContent = \"Y: -\";\r\n    }\r\n    xel.current.textContent = \"X: \" + x.toFixed(3);\r\n    yel.current.textContent = \"Y: \" + y.toFixed(3);\r\n  }\r\n\r\n  const currentFrame2 = useRef<number>(1);\r\n  const setCurrentFrame = (a:any)=>{\r\n    setCurrentFrameHook(a);\r\n    currentFrame2.current = a.frame;\r\n  };\r\n  const [currentFrame, setCurrentFrameHook] = useState<{ frame: number, max: number }>({ frame: 1, max: 1 });\r\n  const frameChanged = (i: number) => {\r\n    setCurrentFrame({frame:i,max:currentClip.getFrameCount()});\r\n    updateScreen(currentClip,i);\r\n    if(currentClip.getFrame(i).getObjects().length>0){\r\n      selectedTargetChanged(1);\r\n    }\r\n    else{\r\n      selectedTargetChanged(undefined);\r\n    }\r\n\r\n    console.log(currentClip.getFrame(i));\r\n  }\r\n  const frameAdd = (i: number) => {\r\n    frameChanged(currentClip.addFrame());\r\n  }\r\n  const frameRemove = (i: number) => {\r\n    frameChanged(currentClip.removeFrame(i));\r\n  }\r\n\r\n  const [breadObjects, setBreadObjects] = useState<(MovieClip)[]>([mainClip]);\r\n\r\n  const renderBreadcrumbs = () => {\r\n    let current = currentClip;\r\n    let objects: (MovieClip)[] = [];\r\n\r\n    for (let i = 0; i < 3; i++) {\r\n      objects.push(current);\r\n      if (current == mainClip) {\r\n        break;\r\n      }\r\n      const parent = current.getParent();\r\n      if (parent)\r\n        current = parent;\r\n    }\r\n    setBreadObjects(objects.reverse());\r\n  }\r\n\r\n  window.addEventListener(\"mousemove\", resizeBlocky);\r\n\r\n  return (\r\n    <div className={styles.App}>\r\n\r\n      <input onChange={projectOpen} accept=\"*\" className={classes.input} id=\"contained-button-file2\" type=\"file\" />\r\n\r\n      <Menu\r\n        id=\"simple-menu\"\r\n        anchorEl={menuAnchorEl}\r\n        keepMounted\r\n        open={Boolean(menuAnchorEl)}\r\n        onClose={handleMenuClose}\r\n      >\r\n        <MenuItem onClick={saveProject}> Save Project　<SaveIcon /></MenuItem>\r\n        <label htmlFor=\"contained-button-file2\">\r\n          <MenuItem onClick={handleMenuClose}>Load Project　<FolderOpenIcon /></MenuItem>\r\n        </label>\r\n      </Menu>\r\n\r\n      <AppBar position=\"static\" className={styles.AppBar}>\r\n        <Toolbar>\r\n          <IconButton onClick={handleMenuClick} edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <Typography variant=\"h6\" className={classes.title}>\r\n            만든다 - {projectName}\r\n          </Typography>\r\n          <IconButton onClick={handleEditProjectNameClick} edge=\"start\" className={classes.editProjectNameButton} color=\"inherit\">\r\n            <EditIcon />\r\n          </IconButton>\r\n          <IconButton onClick={handleRunClick} edge=\"start\" className={classes.runButton} color=\"inherit\">\r\n            <PlayArrowIcon style={{ fontSize: 35 }} />\r\n          </IconButton>\r\n          <CopyToClipboard text={\"http://mandunda.com/#/player/\" + projectName.replace(\" \", \"_\")}>\r\n            <Button onClick={uploadProject} startIcon={<ShareIcon />} className={classes.shareButton} color=\"inherit\">Upload</Button>\r\n          </CopyToClipboard>\r\n        </Toolbar>\r\n      </AppBar>\r\n\r\n\r\n\r\n      <Dialog maxWidth={false} disableEscapeKeyDown={true} disableBackdropClick={true} open={gameRuning} onClose={closeGameDialog} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">게임 화면</DialogTitle>\r\n        <DialogContent>\r\n          <GameScreen width={800} height={500} gameJson={gameFile} />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={closeGameDialog} color=\"primary\">\r\n            닫기\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n\r\n\r\n      <Dialog disableEscapeKeyDown={true} open={openProjectNameDialog} onClose={() => { projectNameCloseDialog(false) }} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">프로젝트 이름</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            새로운 프로젝트 이름을 설정해주세요.\r\n          </DialogContentText>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            id=\"name\"\r\n            label=\"프로젝트 이름\"\r\n            defaultValue={projectName}\r\n            fullWidth\r\n            onChange={(e) => { setNewPName(e.target.value) }}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => { projectNameCloseDialog(false) }} color=\"secondary\">\r\n            취소\r\n          </Button>\r\n          <Button onClick={() => { projectNameCloseDialog(true) }} color=\"primary\">\r\n            설정\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n\r\n      <Dialog open={openMcNameDialog} onClose={() => { mcNameCloseDialog(false) }} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">무비클립 이름</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            무비클립 이름을 설정해주세요.\r\n          </DialogContentText>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            id=\"name\"\r\n            label=\"무비클립 이름\"\r\n            defaultValue={\"new_movieclip\"}\r\n            fullWidth\r\n            onChange={(e) => { setNewPName(e.target.value) }}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => { mcNameCloseDialog(false) }} color=\"secondary\">\r\n            취소\r\n          </Button>\r\n          <Button onClick={() => { mcNameCloseDialog(true) }} color=\"primary\">\r\n            설정\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n\r\n      <Dialog disableEscapeKeyDown={true} open={openMcNameDialog} onClose={() => { mcNameCloseDialog(false) }} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">무비클립 이름</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            무비클립 이름을 설정해주세요.\r\n          </DialogContentText>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            id=\"name\"\r\n            label=\"무비클립 이름\"\r\n            defaultValue={\"new_movieclip\"}\r\n            fullWidth\r\n            onChange={(e) => { setNewPName(e.target.value) }}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => { mcNameCloseDialog(false) }} color=\"secondary\">\r\n            취소\r\n          </Button>\r\n          <Button onClick={() => { mcNameCloseDialog(true) }} color=\"primary\">\r\n            설정\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n\r\n\r\n\r\n      <div className={styles.screenContainer}>\r\n        <Screen className={styles.Screen} selectedTargetMoving={setXYPos} resetFunc={getResetFunc} width={800} height={500} movieClip={currentClip} frame={1} selectedTargetChanged={selectedTargetChanged} />\r\n        <div className={styles.Properties}>\r\n          <div className={styles.tfContainer}>\r\n            <TextField\r\n              label=\"오브젝트 이름\"\r\n              id=\"outlined-margin-dense\"\r\n              defaultValue=\"Default Value\"\r\n              className={styles.test1}\r\n              margin=\"dense\"\r\n              variant=\"outlined\"\r\n              value={objectName}\r\n              onChange={onNameInputChanged}\r\n            />\r\n          </div>\r\n          <div className={styles.test2}>\r\n            <Breadcrumbs className={classes.link} aria-label=\"breadcrumb\">\r\n              {breadObjects.indexOf(mainClip) == -1 && (<div></div>)}\r\n              {breadObjects.map((el) =>\r\n                (<Link title={el.name} onClick={() => { changeCurrentClip(el) }} className={classes.link}>{(el.name.slice(0, 6) + \"…\").slice(0, el.name.length)}</Link>)\r\n              )}\r\n            </Breadcrumbs>\r\n          </div>\r\n          <div className={styles.test3}>\r\n            <div ref={ref => { xel.current = ref }}>X: - </div>\r\n          </div>\r\n          <div className={styles.test4}>\r\n            <div ref={ref => { yel.current = ref }}>Y: -</div>\r\n          </div>\r\n          <input onChange={graphicOpen} accept=\"image/*\" className={classes.input} id=\"contained-button-file\" type=\"file\" />\r\n          <div className={styles.test5}>\r\n            <label htmlFor=\"contained-button-file\">\r\n              <Button className={classes.Button} variant=\"contained\" color=\"primary\" disableElevation component=\"span\">그래픽 추가</Button>\r\n            </label>\r\n          </div>\r\n          <div className={styles.test6}>\r\n            <Button className={classes.Button} onClick={makeMovieClip} variant=\"contained\" color=\"primary\" disableElevation>무비클립화 하기</Button>\r\n          </div>\r\n          <div className={styles.test8}>\r\n            <Button className={classes.Button} onClick={goInside} variant=\"outlined\" disableElevation disabled={!isMovieclip}>안으로 들어가기</Button>\r\n          </div>\r\n          <div className={styles.test9}>\r\n            <Button className={classes.Button} onClick={goOutside} variant=\"outlined\" disableElevation disabled={(currentClip == mainClip)}>밖으로 나가기</Button>\r\n          </div>\r\n          <div className={styles.test7}>\r\n            <Button className={classes.Button} onClick={removeSelectedObject} variant=\"contained\" color=\"secondary\" disableElevation>삭제</Button>\r\n          </div>\r\n        </div>\r\n        <FrameBar currentFrame={currentFrame?.frame} maxFrame={currentFrame?.max} frameChanged={frameChanged} frameAdd = {frameAdd} frameRemove = {frameRemove}/>\r\n      </div>\r\n\r\n\r\n\r\n      <ReactModal initWidth={800} initHeight={400}\r\n        onFocus={() => (\"Modal is clicked\")}\r\n        isOpen={true}\r\n        resizing={resizeBlocky}>\r\n        <ReactBlocklyComponent.BlocklyEditor\r\n          initialXml={INITIAL_XML}\r\n          toolboxCategories={parseWorkspaceXml(INITIAL_TOOLBOX_XML)}\r\n          wrapperDivClassName={styles.Blockly}\r\n          workspaceDidChange={workspaceChange} />\r\n      </ReactModal>\r\n\r\n\r\n      <div id=\"copy\" style={{ display: \"none\" }}>{\"http://mandunda.com/#/player/\" + projectName.replace(\" \", \"_\")}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n\r\n\r\n/*\r\n\r\n\r\n      <TextField id=\"standard-basic\" label=\"오브젝트 이름\" value={objectName} onChange={onNameInputChanged} />\r\n      <input onChange={graphicOpen} accept=\"image/*\" className={classes.input} id=\"contained-button-file\" type=\"file\" />\r\n      <label htmlFor=\"contained-button-file\">\r\n        <Button variant=\"contained\" color=\"primary\" disableElevation component=\"span\">그래픽 추가</Button>\r\n      </label>\r\n\r\n\r\n      <Button onClick={goInside} variant=\"outlined\" disableElevation disabled={!isMovieclip}>안으로 들어가기</Button>\r\n\r\n      <Button onClick={removeSelectedObject} variant=\"contained\" color=\"secondary\" disableElevation>삭제</Button>\r\n      <br />\r\n      <Button onClick={gameStart} variant=\"contained\" color=\"secondary\" disableElevation>게임 실행</Button>\r\n      <Button onClick={saveProject} variant=\"contained\" color=\"secondary\" disableElevation>프로젝트 저장</Button>\r\n      <input onChange={projectOpen} accept=\"*\" className={classes.input} id=\"contained-button-file2\" type=\"file\" />\r\n      <label htmlFor=\"contained-button-file2\">\r\n        <Button variant=\"contained\" color=\"primary\" disableElevation component=\"span\">프로젝트 불러오기</Button>\r\n      </label>\r\n*/","import React, { Component } from \"react\";\nimport \"./index.css\";\n\nclass Resizer extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  handleMouseDown(e) {\n    this.props.updateStateResizing(true);\n  }\n  render() {\n    const style = {\n      width: 16,\n      height: 16\n    };\n    return (\n      <div\n        className=\"flexible-modal-resizer\"\n        style={style}\n        onMouseDown={this.handleMouseDown.bind(this)}\n      />\n    );\n  }\n}\n\nexport default Resizer;\n","import React, { Component, Fragment } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport Resizer from './Resize.js';\r\nimport * as FontAwesome from 'react-icons/lib/fa';\r\nimport { CSSTransition } from 'react-transition-group';\r\n\r\nclass Modal extends Component {\r\n\trender() {\r\n\t\tconst { isDragging, width, height, top, left, isOpen, isMinimised, onRequestRecover,className,onFocus } = this.props;\r\n\t\tif (isOpen) {\r\n\t\t\treturn (\r\n\t\t\t\t<Fragment>\r\n\t\t\t\t\t<CSSTransition in={!isMinimised} timeout={300} classNames=\"minimise\" unmountOnExit>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tonClick={onFocus}\r\n\t\t\t\t\t\t\tref={(node) => {\r\n\t\t\t\t\t\t\t\tthis.node = node;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tdraggable={isDragging}\r\n\t\t\t\t\t\t\tclassName={!className?\"flexible-modal\":\"flexible-modal \"+className}\r\n\t\t\t\t\t\t\tstyle={{ width, height, top, left }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{this.props.children}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</CSSTransition>\r\n\t\t\t\t\t{isMinimised && (\r\n\t\t\t\t\t\t<button className=\"flexible-modal-rebound-btn\" onClick={onRequestRecover}>\r\n\t\t\t\t\t\t\t<FontAwesome.FaBars />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Fragment>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass FlexibleModal extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tisDragging: false,\r\n\t\t\tisResizing: false,\r\n\t\t\ttop:\r\n\t\t\t\tthis.props.top !== undefined\r\n\t\t\t\t\t? this.props.top\r\n\t\t\t\t\t: this.props.initHeight\r\n\t\t\t\t\t\t? window.innerHeight / 2 - this.props.initHeight / 2 - 50\r\n\t\t\t\t\t\t: window.innerHeight / 2 - 400 / 2 - 50,\r\n\t\t\tleft:\r\n\t\t\t\tthis.props.left !== undefined\r\n\t\t\t\t\t? this.props.left\r\n\t\t\t\t\t: this.props.initWidth\r\n\t\t\t\t\t\t? window.innerWidth / 2 - this.props.initWidth / 2 - 21\r\n\t\t\t\t\t\t: window.innerWidth / 2 - 800 / 2 - 21,\r\n\t\t\twidth: this.props.initWidth ? this.props.initWidth : 800,\r\n\t\t\theight: this.props.initHeight ? this.props.initHeight : 400,\r\n\t\t\trel: null\r\n\t\t};\r\n\t\tthis.updateStateResizing = this.updateStateResizing.bind(this);\r\n\t\tthis.funcResizing = this.funcResizing.bind(this);\r\n\t\tthis.resize = this.resize.bind(this);\r\n\t\tthis.onMouseMove = this.onMouseMove.bind(this);\r\n\t\tthis.onMouseUp = this.onMouseUp.bind(this);\r\n\t\tthis.onMouseDown = this.onMouseDown.bind(this);\r\n\t\tthis.pressKey = this.pressKey.bind(this);\r\n\t\tthis.updateStateDragging = this.updateStateDragging.bind(this);\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n    \tconst { disableKeystroke } = this.props;\r\n\t\tdocument.addEventListener('mouseup', this.onMouseUp);\r\n\t\tif(!disableKeystroke) document.addEventListener('keydown', this.pressKey);\r\n\t}\r\n\r\n\t// componentDidUpdate(props, state) {\r\n\t// \tif (!this.state.isDragging && state.isDragging) {\r\n\t// \t\tdocument.removeEventListener('mousemove', this.onMouseMove);\r\n\t// \t\tdocument.removeEventListener('mouseup', this.onMouseUp);\r\n\t// \t}\r\n  \t// }\r\n  \r\n\tcomponentWillUnmount() {\r\n\t\tconst { disableKeystroke } = this.props;\r\n\t\tif(document.removeEventListener){\r\n\t\tdocument.removeEventListener('mousemove', this.onMouseMove);\r\n\t\tdocument.removeEventListener('mouseup', this.onMouseUp);\r\n\t\tif(!disableKeystroke) document.removeEventListener('keydown', this.pressKey);\r\n\t\t}\r\n\t}\r\n\r\n\tonMouseDown(e) {\r\n\t\t// only left mouse button\r\n\t\tdocument.addEventListener('mousemove', this.onMouseMove);\r\n\t\tif (e.button !== 0) return;\r\n\t\tvar pos = ReactDOM.findDOMNode(this.node_modal);\r\n\t\tthis.setState({\r\n\t\t\tisDragging: true,\r\n\t\t\trel: {\r\n\t\t\t\tx: e.pageX - pos.offsetLeft,\r\n\t\t\t\ty: e.pageY - pos.offsetTop\r\n\t\t\t}\r\n\t\t});\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\t}\r\n\r\n\tonMouseUp(e) {\r\n\t\tdocument.removeEventListener('mousemove', this.onMouseMove);\r\n\t\tthis.setState({ isDragging: false });\r\n\t\tthis.setState({ isResizing: false });\r\n\t\te.stopPropagation();\r\n\t\t// e.preventDefault();\r\n\t}\r\n\r\n\tonMouseMove(e) {\r\n\t\tthis.props.resizing();\r\n\t\tconst { disableMove, disableVerticalMove, disableHorizontalMove } = this.props;\r\n\t\tif (this.state.isDragging) {\r\n\r\n\t\t\tif (disableMove) {\r\n\t\t\t} else if (disableVerticalMove && disableHorizontalMove) {\r\n\t\t\t} else if (!disableVerticalMove && disableHorizontalMove) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\ttop: e.pageY - this.state.rel.y\r\n\t\t\t\t});\r\n\t\t\t} else if (disableVerticalMove && !disableHorizontalMove) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tleft: e.pageX - this.state.rel.x\r\n\t\t\t\t});\r\n\t\t\t} else if (!disableVerticalMove && !disableHorizontalMove) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tleft: e.pageX - this.state.rel.x,\r\n\t\t\t\t\ttop: e.pageY - this.state.rel.y\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (this.state.isResizing) {\r\n\t\t\tthis.funcResizing(e.clientX, e.clientY);\r\n\t\t} else {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\t}\r\n\r\n\tupdateStateResizing(isResizing) {\r\n\t\tdocument.addEventListener('mousemove', this.onMouseMove);\r\n\t\tthis.setState({ isResizing });\r\n\t}\r\n\r\n\tfuncResizing(clientX, clientY) {\r\n\t\tthis.props.resizing();\r\n\t\tconst { minWidth: mWidth, minHeight: mHeight, disableVerticalResize, disableHorizontalResize } = this.props;\r\n\t\tlet node = ReactDOM.findDOMNode(this.node_modal);\r\n\t\tlet minWidth = mWidth ? mWidth : 200;\r\n\t\tlet minHeight = mHeight ? mHeight : 100;\r\n\t\tif (!disableHorizontalResize && clientX > node.offsetLeft + minWidth) {\r\n\t\t\tthis.setState({\r\n\t\t\t\twidth: clientX - node.offsetLeft + 16 / 2\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (!disableVerticalResize && clientY > node.offsetTop + minHeight) {\r\n\t\t\tthis.setState({\r\n\t\t\t\theight: clientY - node.offsetTop + 16 / 2\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tupdateStateDragging(isDragging) {\r\n\t\tthis.setState({ isDragging });\r\n\t\tthis.props.resizing();\r\n\t}\r\n\r\n\tpressKey(e) {\r\n\t\tconst { onRequestClose, disableResize, disableMove, disableVerticalMove, disableHorizontalMove } = this.props;\r\n\t}\r\n\r\n\tresize(width, height) {\r\n\t\tthis.props.resizing();\r\n\t\tthis.setState((prevState) => (\r\n      { width: width || prevState.width, height: height || prevState.height }\r\n    ));\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { isOpen, isMinimised, onRequestClose, onRequestMinimise, onRequestRecover, disableResize,className,onFocus } = this.props;\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{/*this mask is a must*/}\r\n\t\t\t\t{isOpen &&\r\n\t\t\t\t!isMinimised && (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tonClick={onRequestMinimise ? onRequestMinimise : onRequestClose}\r\n\t\t\t\t\t\tclassName=\"flexible-modal-mask\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tclassName = {className}\r\n\t\t\t\t\tonFocus={onFocus}\r\n\t\t\t\t\twidth={this.state.width}\r\n\t\t\t\t\theight={this.state.height}\r\n\t\t\t\t\ttop={this.state.top}\r\n\t\t\t\t\tleft={this.state.left}\r\n\t\t\t\t\tisDragging={this.state.isDragging}\r\n\t\t\t\t\tonRequestRecover={onRequestRecover}\r\n\t\t\t\t\tisMinimised={isMinimised}\r\n\t\t\t\t\tisOpen={isOpen}\r\n\t\t\t\t\tupdateStateDragging={this.updateStateDragging}\r\n\t\t\t\t\ttransitionName=\"modal-anim\"\r\n\t\t\t\t\tref={(node) => {\r\n\t\t\t\t\t\tthis.node_modal = node;\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{this.props.children}\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tonMouseDown={this.onMouseDown}\r\n\t\t\t\t\t\tclassName=\"flexible-modal-drag-area\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\twidth: this.state.width\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tref={(dragArea) => {\r\n\t\t\t\t\t\t\tthis.dragArea = dragArea;\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t><div>Block Script</div></div>\r\n\t\t\t\t\t{!disableResize && <Resizer updateStateResizing={this.updateStateResizing} />}\r\n\t\t\t\t</Modal>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default FlexibleModal;\r\n","import React, { useRef } from 'react'\r\nimport styles from './Frame.module.css'\r\n\r\ninterface Props{\r\n    currentFrame:number,\r\n    maxFrame:number,\r\n    frameChanged:(frame:number)=>void,\r\n    frameAdd:(frame:number)=>void,\r\n    frameRemove:(frame:number)=>void,\r\n}\r\ninterface FrameProps{\r\n    selected:boolean,\r\n    click:()=>void,\r\n}\r\n\r\nconst FrameBar:React.FC<Props> = (props)=>{\r\n    let frames:JSX.Element[] = [];\r\n    for(let i = 1;i<=props.maxFrame;i++)\r\n    {\r\n        frames.push(<Frame selected = {props.currentFrame==i} click = {()=>{props.frameChanged(i)}}/>);\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className={styles.bar}>\r\n                {frames}\r\n            </div>\r\n            <button onClick={()=>{props.frameAdd(props.currentFrame+1)}}>+</button>\r\n            <button onClick={()=>{props.frameRemove(props.currentFrame)}}>-</button>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst Frame:React.FC<FrameProps> = (props)=>{\r\n    return (\r\n        <div className={props.selected?styles.sFrame:styles.usFrame} onClick={props.click}>\r\n            \r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default FrameBar;","export function generateUUID() {\r\n    var d = new Date().getTime();\r\n    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n        var r = (d + Math.random()*16)%16 | 0;\r\n        d = Math.floor(d/16);\r\n        return (c=='x' ? r : (r&0x3|0x8)).toString(16);\r\n    });\r\n    return uuid;\r\n};","import * as React from \"react\";\r\nimport { withRouter, RouteComponentProps } from \"react-router\";\r\nimport GameScreen from \"./components/GameScreen\";\r\nimport styles from \"./GamePlayer.module.css\"\r\ninterface MatchParams {\r\n  id: string;\r\n}\r\n\r\nconst GamePlayer: React.SFC<RouteComponentProps<MatchParams>> = ({ match }) => {\r\n  console.log(match.params.id);\r\n  const [gameFile,setGameFile] = React.useState(\"\");\r\n  const [gameLoad,setGameLoad] = React.useState(false);\r\n  React.useEffect(()=>{\r\n    fetch(\"http://203.234.191.83:5353/\"+match.params.id).then(x => x.text()).then(x => {\r\n        setGameFile(x);\r\n        setGameLoad(true)\r\n      })\r\n  },[])\r\n  return (\r\n      <div className={styles.GamePlayer}>\r\n        {gameLoad?(<GameScreen className={styles.GameScreen} gameJson = {gameFile} width = {800} height={500}/>):(<div className= {styles.loading}>LOADING</div>)}\r\n      </div>\r\n      )\r\n  \r\n};\r\n\r\nexport default withRouter(GamePlayer);","import React from \"react\";\r\nimport GameScreen from \"./components/GameScreen\";\r\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport GamePlayer from \"./GamePlayer\";\r\n\r\nconst Root = () => {\r\n    return(\r\n        <div>\r\n            <HashRouter>\r\n                <Route exact path=\"/\" component={App} />\r\n                <Route path=\"/player/:id\" component={GamePlayer} />\r\n            </HashRouter>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default Root","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport Game from './GameEngine/Game';\nimport MovieClip from './GameEngine/MovieClip';\nimport Transform from './GameEngine/Transform';\nimport Graphic from './GameEngine/Graphic';\nimport Matter from 'matter-js';\n\nimport ResourceManager from './GameEngine/ResourceManager';\nimport Root from './Root';\n\n\n\n\nReactDOM.render(\n  <Root/>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}