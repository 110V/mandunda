{"version":3,"sources":["GameEngine/Game.ts","GameEngine/blockFuncs/BlockFunctions.ts","../node_modules/encoding/lib sync","GameEngine/Transform.ts","App.module.css","GameEngine/Frame.ts","GameEngine/MovieClip.ts","GameEngine/ResourceManager.ts","GameEngine/Graphic.ts","components/GameScreen.tsx","GamePlayer.module.css","serviceWorker.js","components/ScreenUtils/TransformEditor.ts","components/Screen.tsx","components/ScreenUtils/FrontUI.ts","customBlocks/definitions/definition.ts","customBlocks/generators/gameStart.ts","customBlocks/generators/addForce.ts","customBlocks/generators/addPhysics.ts","customBlocks/generators/checkCollision.ts","customBlocks/generators/gameTick.ts","customBlocks/generators/getKeyboardEvent.ts","customBlocks/generators/getKeyboardState.ts","customBlocks/generators/getMouseEvent.ts","customBlocks/generators/getMouseState.ts","customBlocks/generators/getObject.ts","customBlocks/generators/getPos.ts","customBlocks/generators/getVelocity.ts","customBlocks/generators/mouseEvent.ts","customBlocks/generators/setPos.ts","customBlocks/generators/setVelocity.ts","customBlocks/generators/setRotation.ts","content.tsx","App.tsx","resizableWindow/Resize.js","resizableWindow/index.js","Utils.ts","GamePlayer.tsx","Root.tsx","index.tsx"],"names":["Game","width","height","target","backgroundColor","fps","mainClip","MovieClip","app","isPlaying","framesPerSecond","secondPerFrame","this","lastTime","Date","getTime","timeLeft","deltaTime","objects","engine","Matter","create","bodys","startCallback","isDestroying","keys","keysDownOnce","keysUpOnce","mouseDown","mouseOnceDown","mouseOnceUp","mouseOnceClick","PIXI","setFps","appendChild","view","world","gravity","y","shared","on","alert","initEvents","update","Transform","init","map","func","requestAnimationFrame","animate","game","destroy","updatePhysics","render","renderer","stage","undefined","name","object","isStatic","friction","mass","bound","getBound","sprite","getBounds","transform","getTransform","body","rectangle","x","angle","roatation","add","push","gameObject","el","setTransform","position","type","callback","addListener","keyCode","e","onMouseDown","onMouseUp","onClick","window","addEventListener","keyDown","keyUp","ticker","eventTick","key","i","slice","repeat","BlockFunctions","Body","applyForce","addPhysics","a","b","Query","collides","length","blocks","eventType","isKeyPress","isKeyRelease","stateType","isKeyDown","isMouseOnceDown","isMouseOnceUp","isMouseOnceClick","isMouseDown","objectName","getObject","velocity","console","log","addMouseEvent","setPosition","setVelocity","setAngle","webpackEmptyContext","req","Error","code","resolve","module","exports","id","scaleX","scaleY","rotation","child","rotatedPos","rotatePos","seta","Math","cos","sin","Frame","script","batches","entry","forEach","rebatchAll","batch","splice","container","addChild","makeContainer","newBatchs","tempBatch","exportStruct","maker","exportMaker","childs","parent","frames","currentFrame","addFrame","clone","frame","stop","play","getFrameCount","targetCount","getFrame","Object","transforms","extendFramesTo","addObject","setParent","frameNum","removeObject","num","getCurrentFrame","calcChildTransform","JSON","stringify","struct","rm","make","fromObject","importStruct","json","parse","clip","resourceManager","Graphic","texture","ResourceManager","loader","loading","queue","callBack","data","imageToBase64","then","response","addDirectBase64","onConvert","catch","error","load","resources","loaderLoad","base64","texId","from","getTexture","newTransform","set","scale","GameScreen","props","useRef","stageDiv","current","gameJson","gameFile","importJson","resource","eval","start","useEffect","className","style","border","ref","Boolean","location","hostname","match","State","transformEditor","gameObjects","pixiObjects","FrontUI","tick","lineWidth","lineColor","alpha","pivot","drawShape","graphic","drawRect","radius","drawCircle","x1","y1","x2","y2","moveTo","lineTo","drawing","removeChildren","lineStyle","TransformEditor","frontUI","points","transformChanged","selectedTargetChanged","selectedTargetMoving","state","none","targetIndex","prevMouseX","prevMouseY","point","beginFill","color","pointMouseDown","mouseUp","mouseMove","global","removeAllListeners","targetMouseDown","mouseOver","mouseOut","interactive","setTarget","removeTarget","moving","index","deltaMouseX","deltaMouseY","Screen","reset","movieClip","removeChild","interactiveChildren","getObjects","pixiObject","setObjects","thickness","hitArea","resolution","transform_","updateBatchToCurrentState","resetFunc","Blockly","appendValueInput","setCheck","appendField","appendDummyInput","setPreviousStatement","setNextStatement","setColour","setTooltip","setHelpUrl","setOutput","appendStatementInput","setInputsInline","block","statements_blocks","statementToCode","value_object","valueToCode","ORDER_ATOMIC","value_x","value_y","value_friction","value_mass","checkbox_isstatic","getFieldValue","value_a","value_b","ORDER_NONE","dropdown_eventtype","value_keycode","dropdown_statetype","value_objectname","dropdown_type","value_name","workspace","Resizer","updateStateResizing","handleMouseDown","bind","React","Component","Modal","isDragging","top","left","isOpen","isMinimised","onRequestRecover","onFocus","CSSTransition","in","timeout","classNames","unmountOnExit","node","draggable","children","FlexibleModal","isResizing","initHeight","innerHeight","initWidth","innerWidth","rel","funcResizing","resize","onMouseMove","pressKey","updateStateDragging","disableKeystroke","document","removeEventListener","button","pos","ReactDOM","findDOMNode","node_modal","setState","pageX","offsetLeft","pageY","offsetTop","stopPropagation","preventDefault","resizing","disableMove","disableVerticalMove","disableHorizontalMove","clientX","clientY","mWidth","minWidth","mHeight","minHeight","disableVerticalResize","disableHorizontalResize","onRequestClose","disableResize","ctrlKey","prevState","onRequestMinimise","transitionName","dragArea","Resize","useStyles","makeStyles","theme","createStyles","root","margin","spacing","input","display","menuButton","marginRight","editProjectNameButton","title","shareButton","marginLeft","runButton","transformOrigin","Button","link","fontSize","selectedIndex","updateScreen","currentClip","workspaceInit","App","useState","setGameFile","setObjectName","isMovieclip","setIsMovieclip","selectedObject","setSelectedObject","xel","yel","classes","addGraphic","changeCurrentClip","renderBreadcrumbs","menuAnchorEl","setMenuAnchorEl","handleMenuClose","newPName","setNewPName","projectName","setProjectName","openProjectNameDialog","setOpenProjectNameDialog","projectNameCloseDialog","newMcName","setNewMcName","openMcNameDialog","setOpenMcNameDialog","mcNameCloseDialog","newPos","gameRuning","setGameRunning","closeGameDialog","gameStart","exportJson","workspaceToCode","exportGameFile","objectJson","resizeBlocky","setXYPos","textContent","breadObjects","setBreadObjects","getParent","reverse","styles","onChange","file","files","reader","FileReader","onload","contents","result","project","toString","clear","xml","textToDom","domToWorkspace","readAsText","accept","anchorEl","keepMounted","open","onClose","MenuItem","workspaceToDom","xml_text","domToText","fileDownload","htmlFor","AppBar","Toolbar","IconButton","event","currentTarget","edge","aria-label","Typography","variant","fetch","replace","method","headers","startIcon","Dialog","maxWidth","disableEscapeKeyDown","disableBackdropClick","aria-labelledby","DialogTitle","DialogContent","DialogActions","DialogContentText","TextField","autoFocus","label","defaultValue","fullWidth","value","screenContainer","nselectedObject","Properties","tfContainer","test1","test2","Breadcrumbs","indexOf","Link","test3","test4","uuid","d","c","r","random","floor","generateUUID","readAsDataURL","test5","disableElevation","component","test6","test8","disabled","test9","test7","BlocklyEditor","initialXml","toolboxCategories","parseWorkspaceXml","wrapperDivClassName","workspaceDidChange","w","withRouter","params","gameLoad","setGameLoad","text","GamePlayer","Root","exact","path","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.36612c4e.chunk.js","sourcesContent":["import * as PIXI from \"pixi.js\";\r\nimport * as Matter from 'matter-js'\r\n\r\nimport MovieClip from \"./MovieClip\";\r\nimport Transform from \"./Transform\";\r\nimport Graphic from \"./Graphic\";\r\n\r\nexport default class Game {\r\n    public mainClip: MovieClip = new MovieClip(\"root\");\r\n\r\n    public app: PIXI.Application;\r\n    private isPlaying: boolean = false;\r\n\r\n    private framesPerSecond = 60;\r\n    private secondPerFrame = 1 / this.framesPerSecond;\r\n    private lastTime = (new Date()).getTime();\r\n    private timeLeft = this.secondPerFrame * 1000;\r\n    public deltaTime = 0;\r\n\r\n    private objects: { [id: string]: (MovieClip | Graphic); } = {};\r\n\r\n    private engine = Matter.Engine.create();\r\n    private bodys: { gameObject: (MovieClip | Graphic), body: Matter.Body }[] = [];\r\n    public startCallback: (()=>void)[] = [];\r\n\r\n    private isDestroying = false;\r\n\r\n\r\n    constructor(width: number, height: number, target: HTMLElement, backgroundColor = 0xFFFFFF, fps = 60) {\r\n        this.app = new PIXI.Application({\r\n            width: width,\r\n            height: height,\r\n            backgroundColor: backgroundColor\r\n        });\r\n        this.setFps(fps);\r\n        target.appendChild(this.app.view);\r\n        this.engine.world.gravity.y = 1;\r\n    }\r\n\r\n    public setFps(fps: number) {\r\n        this.framesPerSecond = fps;\r\n        this.secondPerFrame = 1 / fps;\r\n    }\r\n\r\n    public start() {\r\n        PIXI.Loader.shared.on(\"complete\",()=>{alert(\"완료\")});\r\n        this.initEvents();\r\n        this.isPlaying = true;\r\n        this.mainClip.update(this.app, Transform.init, true);\r\n        this.startCallback.map(func => { func() });\r\n        requestAnimationFrame(() => { this.animate(this) });\r\n    }\r\n\r\n    private animate(game: Game) {\r\n        if(this.isDestroying){\r\n            this.app.destroy(true);\r\n            return;\r\n        }\r\n        this.deltaTime = (new Date()).getTime() - this.lastTime;\r\n        this.updatePhysics(this.deltaTime);\r\n        this.timeLeft -= this.deltaTime;\r\n        if (this.timeLeft < 0 && this.isPlaying) {\r\n            this.mainClip.update(this.app);\r\n            this.timeLeft = this.secondPerFrame * 1000;\r\n        }\r\n        else {\r\n            this.mainClip.render(this.app);\r\n        }\r\n        this.app.renderer.render(this.app.stage,undefined,false);\r\n        this.lastTime = (new Date()).getTime()\r\n        requestAnimationFrame(() => { this.animate(game) });\r\n    }\r\n\r\n    public destroy()\r\n    {\r\n        this.isDestroying = true;\r\n    }\r\n\r\n    public stop() {\r\n        this.isPlaying = false;\r\n    }\r\n\r\n    public play() {\r\n        this.isPlaying = true;\r\n    }\r\n\r\n    public addObject(name: string, object: MovieClip|Graphic) {\r\n        this.objects[name] = object;\r\n    }\r\n\r\n    public getObject(name: string) {\r\n        return this.objects[name];\r\n    }\r\n\r\n    public addPhysics(object: Graphic | MovieClip, isStatic: boolean, friction: number, mass: number) {\r\n        let bound: PIXI.Rectangle;\r\n        if (object instanceof MovieClip) {\r\n            bound = object.getBound();\r\n        }\r\n        else {\r\n            bound = object.sprite.getBounds();\r\n        }\r\n        const transform = object.getTransform();\r\n        const body = Matter.Bodies.rectangle(transform.x, transform.y, bound.width, bound.height);\r\n        body.angle = transform.roatation;\r\n        body.friction = friction;\r\n        body.mass = mass;\r\n        body.isStatic = isStatic;\r\n        Matter.World.add(this.engine.world, body);\r\n        object.body = body;\r\n        this.bodys.push({ body: body, gameObject: object });\r\n\r\n    }\r\n\r\n    private updatePhysics(deltaTime: number) {\r\n        this.bodys.map((el) => {\r\n            el.gameObject.setTransform(new Transform(el.body.position.x, el.body.position.y, 1, 1, el.body.angle));\r\n        });\r\n        Matter.Engine.update(this.engine, deltaTime, 1);\r\n    }\r\n\r\n    public addMouseEvent(object:PIXI.DisplayObject,type:string,callback:()=>void){   \r\n        object.addListener(type, callback);\r\n    }\r\n\r\n\r\n    //mouse,keyboard events\r\n    private keys: boolean[] = [];\r\n    private keysDownOnce: number[] = [];\r\n    private keysUpOnce: number[] = [];\r\n    private mouseDown: boolean = false;\r\n\r\n    private mouseOnceDown: number = 0;\r\n    private mouseOnceUp: number = 0;\r\n    private mouseOnceClick: number = 0;\r\n\r\n\r\n\r\n    public isKeyDown(keyCode: number) {\r\n        return this.keys[keyCode];\r\n    }\r\n\r\n    public isKeyPress(keyCode: number) {\r\n        return this.keysDownOnce[keyCode] == 1;\r\n    }\r\n\r\n    public isKeyRelease(keyCode: number) {\r\n        return this.keysUpOnce[keyCode] == 1;\r\n    }\r\n\r\n    public isMouseDown() {\r\n        return this.mouseDown;\r\n    }\r\n    public isMouseOnceDown() {\r\n        return this.mouseOnceDown == 1;\r\n    }\r\n\r\n    public isMouseOnceUp() {\r\n        return this.mouseOnceUp == 1;\r\n    }\r\n\r\n    public isMouseOnceClick() {\r\n        return this.mouseOnceClick == 1;\r\n    }\r\n\r\n\r\n    private initEvents() {\r\n\r\n        this.app.stage.addListener(\"mousedown\", (e) => {this.onMouseDown(e) });\r\n        this.app.stage.addListener(\"mouseup\", (e) => {this.onMouseUp(e) })\r\n        this.app.stage.addListener(\"click\", (e) => {this.onClick(e) });;\r\n        window.addEventListener(\"keydown\", (e) => { this.keyDown(e) });\r\n        window.addEventListener(\"keyup\", (e) => { this.keyUp(e) });\r\n\r\n        this.keys[4] = true;\r\n\r\n\r\n\r\n        this.app.ticker.add(() => { this.eventTick() })\r\n    }\r\n\r\n    private eventTick() {\r\n        this.keysDownOnce.map((key, i) => {\r\n            if (key != 0) {\r\n                this.keysDownOnce[i]--;\r\n            }\r\n            else {\r\n                this.keysDownOnce = this.keysDownOnce.slice(i, i);\r\n            }\r\n        });\r\n        this.keysUpOnce.map((key, i) => {\r\n            if (key != 0) {\r\n                this.keysUpOnce[i]--;\r\n            }\r\n            else {\r\n                this.keysUpOnce = this.keysUpOnce.slice(i, i);\r\n            }\r\n        });\r\n\r\n        if (this.mouseOnceDown != 0) {\r\n            this.mouseOnceDown--;\r\n        }\r\n        if (this.mouseOnceUp != 0) {\r\n            this.mouseOnceUp--;\r\n        }\r\n        if (this.mouseOnceClick != 0) {\r\n            this.mouseOnceClick--;\r\n        }\r\n\r\n    }\r\n\r\n    private onMouseDown(e: PIXI.interaction.InteractionEvent) {\r\n        this.mouseDown = true;\r\n        this.mouseOnceDown = 2;\r\n    }\r\n\r\n    private onMouseUp(e: PIXI.interaction.InteractionEvent) {\r\n        this.mouseDown = false;\r\n        this.mouseOnceUp = 2;\r\n    }\r\n\r\n    private onClick(e: PIXI.interaction.InteractionEvent) {\r\n        this.mouseOnceClick = 2;\r\n    }\r\n\r\n    private keyDown(e: KeyboardEvent) {\r\n        this.keysDownOnce[e.keyCode] = (!e.repeat ? 2 : -1);\r\n        this.keys[e.keyCode] = true;\r\n    }\r\n    private keyUp(e: KeyboardEvent) {\r\n        this.keysUpOnce[e.keyCode] = (!e.repeat ? 2 : -1);\r\n        this.keys[e.keyCode] = false;\r\n    }\r\n}","import Game from \"../Game\";\r\nimport MovieClip from \"../MovieClip\";\r\nimport Graphic from \"../Graphic\";\r\nimport Matter from \"matter-js\";\r\n\r\n\r\nlet BlockFunctions: { [id: string]: (Function); } = {};\r\n\r\nBlockFunctions[\"addForce\"] = (game: Game, object: (MovieClip | Graphic), x: number, y: number) => {\r\n    if (object.body) {\r\n        //Matter.Body.setVelocity(object.body, { x: object.body.velocity.x + x, y: object.body.velocity.y + y })\r\n        Matter.Body.applyForce(object.body,object.body.position,{x:x,y:y});\r\n    }\r\n}\r\n\r\nBlockFunctions[\"addPhysics\"] = (game: Game, object: (MovieClip | Graphic), friction: number, mass: number, isStatic: boolean) => {\r\n    game.addPhysics(object, isStatic, friction, mass);\r\n}\r\n\r\nBlockFunctions[\"checkCollision\"] = (game: Game, a: (MovieClip | Graphic), b: (MovieClip | Graphic)) => {\r\n    if(a.body&&b.body){\r\n        return Matter.Query.collides(a.body,[b.body]).length != 0;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"gameStart\"] = (game: Game, blocks: () => {}) => {\r\n    game.startCallback.push(blocks);\r\n}\r\n\r\nBlockFunctions[\"gameTick\"] = (game: Game, blocks: () => {}) => {\r\n    game.app.ticker.add(blocks);\r\n}\r\n\r\nBlockFunctions[\"getKeyboardEvent\"] = (game: Game, eventType: string, keyCode: number) => {\r\n    switch(eventType)\r\n    {\r\n        case \"isDown\":\r\n            return game.isKeyPress(keyCode);\r\n        case \"isUp\":\r\n            return game.isKeyRelease(keyCode);\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getKeyboardState\"] = (game: Game, stateType: string, keyCode: number) => {\r\n    const keyDown =  game.isKeyDown(keyCode);\r\n    switch(stateType)\r\n    {\r\n        case \"isDown\":\r\n            return keyDown;\r\n        case \"isUp\":\r\n            return !keyDown;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getMouseEvent\"] = (game: Game, eventType: string) => {\r\n    switch(eventType)\r\n    {\r\n        case \"isDown\":\r\n            return game.isMouseOnceDown();\r\n        case \"isUp\":\r\n            return game.isMouseOnceUp();\r\n        case \"isClick\":\r\n            return game.isMouseOnceClick();\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getMouseState\"] = (game: Game, stateType: string) => {\r\n    const keyDown =  game.isMouseDown();\r\n    switch(stateType)\r\n    {\r\n        case \"isDown\":\r\n            return keyDown;\r\n        case \"isUp\":\r\n            return !keyDown;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getObject\"] = (game: Game, objectName: string) => {\r\n    return game.getObject(objectName);\r\n}\r\n\r\nBlockFunctions[\"getPos\"] = (game: Game, type: string, object: (MovieClip | Graphic)) => {\r\n    switch(type)\r\n    {\r\n        case \"x\":\r\n            return object.getTransform().x;\r\n        case \"y\":\r\n            return object.getTransform().y;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"getVelocity\"] = (game: Game, type: string, object: (MovieClip | Graphic)) => {\r\n    if(!object.body)\r\n        return;\r\n\r\n    switch(type)\r\n    {\r\n        case \"x\":\r\n            return object.body.velocity.x;\r\n        case \"y\":\r\n            return object.body.velocity.y;\r\n    }\r\n}\r\n\r\nBlockFunctions[\"mouseEvent\"] = (game: Game, object: (MovieClip | Graphic), type: string, blocks: (()=>void)) => {\r\n    if(object instanceof MovieClip)\r\n    {\r\n        console.log(\"무비클립은 마우스 이벤트를 지원하지 않습니다.\");\r\n        return;\r\n    }\r\n    game.addMouseEvent(object.sprite,type,blocks);\r\n}\r\n\r\nBlockFunctions[\"setPos\"] = (game: Game, object: (MovieClip | Graphic), x: number, y: number) => {\r\n    if(object.body){\r\n        Matter.Body.setPosition(object.body,{x:x,y:y});\r\n    }\r\n    const transform = object.getTransform();\r\n    transform.x = x;\r\n    transform.y = y;\r\n    object.setTransform(transform);\r\n}\r\n\r\nBlockFunctions[\"setVelocity\"] = (game: Game, object: (MovieClip | Graphic), x: number, y: number) => {\r\n    if(object.body){\r\n        Matter.Body.setVelocity(object.body,{x:x,y:y});\r\n    }\r\n}\r\n\r\nBlockFunctions[\"setRotation\"] = (game: Game, object: (MovieClip | Graphic), angle:number) => {\r\n    if(object.body){\r\n        Matter.Body.setAngle(object.body,angle);\r\n    }\r\n    const transform = object.getTransform();\r\n    transform.roatation = angle;\r\n    object.setTransform(transform);\r\n}\r\n\r\nexport default BlockFunctions;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 229;","export default class Transform {\r\n    static init = new Transform(0, 0);\r\n\r\n    x: number;\r\n    y: number;\r\n    scaleX: number;\r\n    scaleY: number;\r\n    roatation: number;\r\n\r\n    constructor(x:number, y:number, scaleX = 1, scaleY = 1, rotation = 0) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.scaleX = scaleX;\r\n        this.scaleY = scaleY;\r\n        this.roatation = rotation;\r\n    }\r\n\r\n\r\n    public calcChildTransform(transform: Transform) {\r\n        const parent = this;\r\n        const child = transform;\r\n        const rotatedPos = this.rotatePos(child.x, child.y, parent.roatation);\r\n        return new Transform(\r\n            rotatedPos.x * parent.scaleX + parent.x,\r\n            rotatedPos.y * parent.scaleY + parent.y,\r\n            child.scaleX * parent.scaleX,\r\n            child.scaleY * parent.scaleY,\r\n            child.roatation + parent.roatation);\r\n    }\r\n\r\n    private rotatePos(x:number, y:number, seta:number) {\r\n        return {\r\n            x: x * Math.cos(seta) - y * Math.sin(seta),\r\n            y: y * Math.cos(seta) + x * Math.sin(seta)\r\n        };\r\n    }\r\n\r\n    public clone()\r\n    {\r\n        return new Transform(this.x,this.y,this.scaleX,this.scaleY,this.roatation);\r\n    }\r\n\r\n    static fromObject(transform:any){\r\n        return new Transform(transform.x,transform.y,transform.scaleX,transform.scaleY,transform.roatation);\r\n    }\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2NoZF\",\"AppBar\":\"App_AppBar__2Kg9l\",\"Blockly\":\"App_Blockly__3ite3\",\"screenContainer\":\"App_screenContainer__c3hxx\",\"Screen\":\"App_Screen__392HF\",\"Properties\":\"App_Properties__3WWL_\",\"tfContainer\":\"App_tfContainer__3MgPT\",\"test2\":\"App_test2__2Jmwd\",\"test1\":\"App_test1__3G2tV\",\"test3\":\"App_test3__1ssgM\",\"test4\":\"App_test4__10zIh\",\"test5\":\"App_test5__23SaN\",\"test6\":\"App_test6__3Kq8b\",\"test7\":\"App_test7__2T8nz\",\"test8\":\"App_test8__2o9tD\",\"test9\":\"App_test9__3JGwf\"};","import Script from \"./Script\";\r\nimport Transform from \"./Transform\";\r\nimport MovieClip from \"./MovieClip\";\r\nimport Graphic from \"./Graphic\";\r\n\r\nimport * as PIXI from \"pixi.js\";\r\n\r\ninterface Batch{\r\n    object: (MovieClip|Graphic);\r\n    transform: Transform;\r\n}\r\n\r\n\r\nexport default class Frame {\r\n    public script: Script | null = null;\r\n    private objects: (MovieClip | Graphic)[] = []\r\n    private batches: Batch[] = [];\r\n\r\n\r\n    public update(app: PIXI.Application, transform: Transform = Transform.init, entry: boolean = false) {\r\n        this.objects.forEach(object => {\r\n            object.update(app, transform);\r\n        });\r\n\r\n        if (entry) {\r\n            this.rebatchAll();\r\n        }\r\n    }\r\n\r\n    public updateBatchToCurrentState()\r\n    {\r\n        this.batches.map((batch)=>{\r\n            batch.transform = batch.object.getTransform();\r\n        })\r\n    }\r\n\r\n    public rebatchAll()\r\n    {\r\n        this.batches.forEach(batch => {\r\n            batch.object.setTransform(batch.transform);\r\n        });\r\n    }\r\n\r\n    public addObject(object: MovieClip | Graphic,transform :Transform) {\r\n        this.objects.push(object);\r\n        const batch:Batch = {object,transform} as Batch; \r\n        this.batches.push(batch);\r\n    }\r\n\r\n    public removeObject(object:MovieClip|Graphic)\r\n    {\r\n        this.objects.map((el,i)=>{\r\n            if(el==object){\r\n                this.objects.splice(i,1);\r\n                this.batches.splice(i,1);\r\n            }\r\n        })\r\n    }\r\n\r\n    public getObjects()\r\n    {\r\n        return this.objects;\r\n    }\r\n\r\n    public getBatches()\r\n    {\r\n        return this.batches;\r\n    }\r\n\r\n    public render(app: PIXI.Application)\r\n    {\r\n        this.objects.forEach(object => {\r\n            object.render(app);\r\n        });\r\n    }\r\n\r\n    public makeContainer()\r\n    {\r\n        this.rebatchAll();\r\n        const container = new PIXI.Container();\r\n\r\n        this.objects.map((object)=>{\r\n            if(object instanceof MovieClip){\r\n                container.addChild(object.makeContainer(1));\r\n            }\r\n            else{\r\n                container.addChild(object.sprite);\r\n            }\r\n            \r\n        });\r\n        return container;\r\n    }\r\n\r\n\r\n    public exportStruct()\r\n    {\r\n        let newBatchs:any = [];\r\n        this.batches.map(batch=>{\r\n            if(batch.object instanceof MovieClip){\r\n                const tempBatch  = batch.object.exportStruct(batch.transform);\r\n                newBatchs.push(tempBatch);\r\n            }\r\n            else{\r\n                newBatchs.push({type:\"Graphic\",name:batch.object.name,transform:batch.transform,maker:batch.object.exportMaker()});\r\n            }\r\n        })\r\n        return newBatchs;\r\n    }\r\n}","import * as PIXI from \"pixi.js\";\r\n\r\nimport Frame from \"./Frame\";\r\nimport Transform from \"./Transform\";\r\nimport Graphic from \"./Graphic\";\r\nimport Game from \"./Game\";\r\nimport ResourceManager from \"./ResourceManager\";\r\n\r\n\r\n\r\nexport default class MovieClip {\r\n  //객체 정보\r\n  public name:string;\r\n  private transform: Transform;\r\n  private childs: (MovieClip|Graphic)[] = []\r\n  private parent?: MovieClip;\r\n  //프레임\r\n  private frames: Frame[] = []; //프레임은 1부터 시작\r\n  public currentFrame: number = 1;\r\n  public isPlaying: boolean = true;\r\n\r\n  public body:Matter.Body|null = null; \r\n\r\n  constructor(name:string,transform = Transform.init) {\r\n    this.name = name;\r\n    this.transform = transform;\r\n    this.addFrame();\r\n  }\r\n\r\n  public setTransform(transform:Transform)\r\n  {\r\n      this.transform = transform;\r\n  }\r\n\r\n  public getTransform()\r\n  {\r\n    return this.transform.clone();\r\n  }\r\n\r\n\r\n  public play() {\r\n    this.isPlaying = true;\r\n  }\r\n\r\n  public stop() {\r\n    this.isPlaying = false;\r\n  }\r\n\r\n  public gotoAndStop(frame: number) {\r\n    this.currentFrame = frame;\r\n    this.stop();\r\n  }\r\n\r\n  public gotoAndPlay(frame: number) {\r\n    this.currentFrame = frame;\r\n    this.play();\r\n  }\r\n\r\n  public getFrameCount() {\r\n    return this.frames.length;\r\n  }\r\n\r\n  public addFrame() {\r\n    this.frames.push(new Frame());\r\n    return this.getFrameCount();\r\n  }\r\n\r\n  public extendFramesTo(frame: number) {\r\n    const targetCount = frame - this.getFrameCount();\r\n    for (let i = 0; i < targetCount; i++) {\r\n      this.addFrame();\r\n    }\r\n  }\r\n\r\n  public getFrame(frame: number) {\r\n    return this.frames[frame-1];\r\n  }\r\n\r\n  public getCurrentFrame() {\r\n    return this.getFrame(this.currentFrame);\r\n  }\r\n\r\n  public addObject(Object: MovieClip | Graphic, frames: number[], transforms: Transform[]) {\r\n    frames.forEach((frame,i) => {\r\n      this.extendFramesTo(frame);\r\n      this.getFrame(frame).addObject(Object,transforms[i]);\r\n      this.childs.push(Object);\r\n      Object.setParent(this);\r\n    });\r\n  }\r\n\r\n  public removeObject(object: MovieClip|Graphic,frameNum:number)\r\n  {\r\n    const frame = this.getFrame(frameNum);\r\n    frame.removeObject(object);\r\n    this.childs.map((el,i)=>{\r\n      if(el==object){\r\n          this.childs.splice(i,1);\r\n      }\r\n  })\r\n  }\r\n\r\n  public getChild(num:number)\r\n  {\r\n    return this.childs[num];\r\n  }\r\n\r\n  public getParent()\r\n  {\r\n      return this.parent;\r\n  }\r\n  \r\n  public setParent(parent:MovieClip)\r\n  {\r\n      this.parent = parent;\r\n  }\r\n\r\n  public update(app: PIXI.Application, transform: Transform = Transform.init,init:boolean = false) {\r\n    //프레임 재생 처리\r\n    if(this.getFrameCount()<=1)\r\n    {\r\n      this.isPlaying = false;\r\n    }\r\n\r\n    if(this.isPlaying)\r\n    {\r\n      if(this.currentFrame == this.getFrameCount())\r\n      {\r\n        this.currentFrame=1;\r\n      }\r\n      else{\r\n        this.currentFrame+=1;\r\n      }\r\n    }\r\n    //그리기 처리\r\n    this.getCurrentFrame().update(app, transform.calcChildTransform(this.transform),this.isPlaying||init);\r\n  }\r\n\r\n  public render(app: PIXI.Application)\r\n  {\r\n    this.getCurrentFrame().render(app);\r\n  }\r\n\r\n  public makeContainer(frame:number)\r\n  {\r\n    const container = this.getFrame(frame).makeContainer();\r\n    container.setTransform(this.transform.x,this.transform.y,this.transform.scaleX,this.transform.scaleY,this.transform.roatation);\r\n    return container;\r\n  }\r\n\r\n  public getBound()\r\n  {\r\n    const container = this.makeContainer(1);\r\n    container.angle = 0;\r\n    const bound = this.makeContainer(1).getBounds();\r\n    container.destroy();\r\n    return bound;\r\n  }\r\n\r\n  public exportStruct(transform:Transform)\r\n  {\r\n    let frames:any = [];\r\n    this.frames.map((frame)=>{\r\n      frames.push(frame.exportStruct());\r\n    }) \r\n    let struct = {type:\"MovieClip\",name:this.name,\r\n                 transform:transform,\r\n                 frames:frames,\r\n                 maker:this.exportMaker()}\r\n    return struct;\r\n  }\r\n\r\n  public exportMaker()\r\n  {\r\n    //makers = [];\r\n    //makers.push({type:\"MovieClip\",name:this.name,transform:this.transform});\r\n    // this.childs.map((child)=>{\r\n    //   makers.push(child.exportMaker())\r\n    // })\r\n    return {type:\"MovieClip\",name:this.name,transform:this.transform};\r\n  }\r\n\r\n  public exportJson()\r\n  {\r\n    return JSON.stringify(this.exportStruct(new Transform(0,0)));\r\n  }\r\n\r\n  static importJson(json:string,rm:ResourceManager,game:Game|undefined = undefined)\r\n  {\r\n    const struct  = JSON.parse(json);\r\n    const clip = this.make(struct.maker,rm,game);\r\n    clip.importStruct(struct,rm,game);\r\n    return clip;\r\n  }\r\n\r\n  public importStruct(struct:any,rm:ResourceManager,game:Game|undefined = undefined)\r\n  {\r\n    struct.frames.map((batches:any,i:number)=>{\r\n      batches.map((batch:any)=>{\r\n        const object = MovieClip.make(batch.maker,rm,game);\r\n        this.addObject(object,[i+1],[Transform.fromObject(batch.transform)]);\r\n        if(object instanceof MovieClip)\r\n        {\r\n          object.importStruct(batch,rm,game);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  static make(maker:any,resourceManager:ResourceManager,game:Game|undefined = undefined)\r\n  {\r\n    let object:any;\r\n    const transform = Transform.fromObject(maker.transform);\r\n    if(maker.type == \"MovieClip\"){\r\n      object = new MovieClip(maker.name,transform);\r\n    }\r\n    else { //Graphic\r\n      object = new Graphic(maker.name,transform,resourceManager,maker.texture,maker.width,maker.height);\r\n    }\r\n    if(game){\r\n      game.addObject(maker.name, object);\r\n    }\r\n    return object;\r\n  }\r\n}","import * as PIXI from \"pixi.js\";\r\nimport imageToBase64 from \"image-to-base64\"\r\n\r\n\r\n\r\nexport default class ResourceManager {\r\n    private loader = new PIXI.Loader();\r\n    private loading: number = 0;\r\n\r\n    private queue: { name: string, data: string }[] = [];\r\n    private struct:{name:string,data:string}[] = [];\r\n\r\n    private callBack = ()=>{};\r\n    constructor() {\r\n        this.loader.on(\"complete\", ()=>{this.callBack();this.callBack = ()=>{}});\r\n    }\r\n\r\n    public add(name: string, data: string) {\r\n        this.queue.push({ name: name, data: data });\r\n        return this;\r\n    }\r\n\r\n    public load(callback:()=>void) {\r\n        this.callBack = callback;\r\n        this.loading = this.queue.length;\r\n\r\n        for (let i = 0; i < this.queue.length; i++) {\r\n            const el = this.queue[i];\r\n\r\n            imageToBase64(el.data).then(\r\n                (response: string) => {\r\n                    this.addDirectBase64(el.name,\"data:image/png;base64,\"+response);\r\n                    this.onConvert();\r\n                }\r\n            ).catch(\r\n                (error: string) => {\r\n                    this.onConvert();\r\n                }\r\n            )\r\n        }\r\n        this.queue = [];\r\n        return this;\r\n    }\r\n\r\n    private onConvert() {\r\n        this.loading--;\r\n        if (this.loading == 0) {\r\n            this.loader.load();\r\n        }\r\n    }\r\n\r\n    public getTexture(name: string) {\r\n        return this.loader.resources[name].texture;\r\n    }\r\n\r\n    public exportJson()\r\n    {\r\n        return JSON.stringify(this.struct);\r\n    }\r\n\r\n    public importJson(json:string,callBack:()=>void)\r\n    {\r\n        \r\n        this.struct = JSON.parse(json);\r\n        this.struct.map(el=>{\r\n            this.loader.add(el.name, el.data);\r\n        })\r\n        this.loaderLoad(callBack);\r\n    }\r\n\r\n    public loaderLoad(callBack:()=>void)\r\n    {\r\n        this.callBack = callBack;\r\n        this.loader.load();\r\n    }\r\n\r\n    public addDirectBase64(name:string,data:string)\r\n    {\r\n        const base64 = data;\r\n        this.loader.add(name,base64);\r\n        this.struct.push({name:name,data:base64});\r\n        return this;\r\n    }\r\n}\r\n\r\n\r\n","import * as PIXI from \"pixi.js\";\r\nimport Transform from \"./Transform\";\r\nimport MovieClip from \"./MovieClip\";\r\nimport ResourceManager from \"./ResourceManager\";\r\n\r\nexport default class Graphic {\r\n\r\n    public name:string;\r\n    public sprite:PIXI.Sprite;\r\n\r\n    private transform:Transform;\r\n    public width?:number;\r\n    public height?:number;\r\n\r\n    private parent?:MovieClip;\r\n    public texId:string;\r\n    \r\n    public body:Matter.Body|null = null; \r\n\r\n    public getParent()\r\n    {\r\n        return this.parent;\r\n    }\r\n    \r\n    public setParent(parent:MovieClip)\r\n    {\r\n        this.parent = parent;\r\n    }\r\n\r\n    public setTransform(transform:Transform)\r\n    {\r\n        this.transform = transform;\r\n        this.sprite.setTransform(transform.x,transform.y,transform.scaleX,transform.scaleY,transform.roatation);\r\n    }\r\n\r\n    public getTransform()\r\n    {\r\n        return this.transform.clone();\r\n    }\r\n\r\n    constructor(name:string,transform:Transform,resourceManager:ResourceManager,texId:string,width?:number,height?:number){\r\n        this.name = name;\r\n        this.texId = texId;\r\n        this.transform = transform;\r\n        this.sprite = PIXI.Sprite.from(resourceManager.getTexture(texId));\r\n\r\n        if(width)\r\n            this.width = width;\r\n        if(height)\r\n            this.height = height;\r\n        \r\n        this.width = this.sprite.width;\r\n        this.height = this.sprite.height;\r\n    }\r\n\r\n    public update(app: PIXI.Application, transform: Transform = Transform.init) {\r\n        const newTransform = transform.calcChildTransform(this.transform);\r\n        this.sprite.transform.position.set(newTransform.x,newTransform.y);\r\n        this.sprite.transform.rotation = newTransform.roatation;\r\n        this.sprite.scale.set(newTransform.scaleX,newTransform.scaleY);\r\n        if(this.width)\r\n            this.sprite.width = this.width;\r\n        if(this.height)\r\n            this.sprite.height = this.height;\r\n        app.renderer.render(this.sprite,undefined,false);\r\n    }\r\n\r\n    public render(app: PIXI.Application)\r\n    {\r\n        app.renderer.render(this.sprite,undefined,false);\r\n    }\r\n\r\n    public exportMaker()\r\n    {\r\n      return {type:\"Graphic\",name:this.name,transform:this.transform,texture:this.texId,width:this.width,height:this.height};\r\n    }\r\n}","import React, { useRef, useEffect } from 'react'\r\nimport Game from '../GameEngine/Game';\r\nimport ResourceManager from '../GameEngine/ResourceManager';\r\nimport BlockFunctions from '../GameEngine/blockFuncs/BlockFunctions';\r\nimport MovieClip from '../GameEngine/MovieClip';\r\n\r\n\r\ninterface Props{\r\n    width:number,\r\n    height:number,\r\n    gameJson:string,\r\n    className?:string,\r\n}\r\n\r\n\r\nconst GameScreen:React.FC<Props> = (props)=>{\r\n\r\n    let game = useRef<Game>();\r\n    let stageDiv = useRef<HTMLElement | null>(null);\r\n    \r\n    const init = ()=>{\r\n        if(!stageDiv.current) {\r\n            return;\r\n        }\r\n        if(props.gameJson==\"\"){\r\n            return;\r\n        }\r\n        game.current = new Game(props.width,props.height,stageDiv.current);\r\n        \r\n        try{\r\n            const gameFile = JSON.parse(props.gameJson);\r\n            const rm = new ResourceManager();\r\n            rm.importJson(gameFile.resource, () => {\r\n                if (game.current == undefined) {\r\n                    return;\r\n                }\r\n                game.current.mainClip = MovieClip.importJson(gameFile.objects, rm, game.current);\r\n                eval(`(function(game,blockFunctions){${gameFile.code}})`)(game.current, BlockFunctions);\r\n                game.current.start();\r\n            });\r\n        }\r\n        catch(e){\r\n            alert(\"에러 발생\")\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        //초기화\r\n        init();\r\n        return () => {\r\n            game.current?.destroy();\r\n        }\r\n    },[]);\r\n    return (\r\n        <div className = {props.className} style = {{border:\"#F3F3F3 solid 3px\"}} ref={ref => { stageDiv.current = ref }} />\r\n    );\r\n}\r\n\r\n\r\nexport default GameScreen;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"GamePlayer\":\"GamePlayer_GamePlayer__3oK38\",\"GameScreen\":\"GamePlayer_GameScreen__sUThz\"};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      (\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import * as PIXI from 'pixi.js';\r\nimport FrontUI from './FrontUI';\r\n\r\nexport default class TransformEditor {\r\n    private app: PIXI.Application;\r\n    private container = new PIXI.Container();\r\n\r\n    private frontUI:FrontUI;\r\n    private border = new PIXI.Graphics();\r\n    private points: PIXI.Graphics[] = [];\r\n    private style: { color: number, thickness: number, radius: number };\r\n\r\n    public transformChanged:((index:number,transform:PIXI.Transform)=>void) = ()=>{};\r\n    public selectedTargetChanged:((index:number|undefined)=>void) = ()=>{};\r\n    public selectedTargetMoving:(x:number,y:number)=>void = ()=>{};\r\n\r\n    constructor(app: PIXI.Application, style: { color: number, thickness: number, radius: number }) {\r\n        this.app = app;\r\n        this.style = style;\r\n\r\n        app.ticker.add(()=>{this.tick()});\r\n        this.init();\r\n        this.frontUI = new FrontUI(app);\r\n    }\r\n\r\n    private tick() {\r\n        if(this.targetIndex==undefined)\r\n            return;\r\n\r\n        const target = this.objects[this.targetIndex];\r\n        const bound = target.getBounds();\r\n        this.frontUI.drawRect(5,0x66CC00,1,bound.x-2.5,bound.y-2.5,bound.width+5,bound.height+5,0);\r\n        // alert(\"hello\");\r\n        // if(!this.app)\r\n        //     return;\r\n        // this.app.renderer.render(this.container, undefined, false);\r\n        // this.container.destroy();\r\n        // this.container = new PIXI.Container();\r\n    }\r\n\r\n    private init() {\r\n        for (let i = 0; i < 10; i++) {\r\n            const point = new PIXI.Graphics();\r\n            point.beginFill(this.style.color);\r\n            point.drawCircle(0, 0, this.style.radius);\r\n\r\n            point.addListener(\"mousedown\", () => { this.pointMouseDown(i) });\r\n            this.points.push(point);\r\n        }\r\n\r\n        this.app.stage.addListener(\"mouseup\", ()=>{this.mouseUp()});\r\n        this.app.stage.addListener(\"mousemove\", (e) => { this.mouseMove(e.data.global.x, e.data.global.y) });\r\n    }\r\n\r\n    //Points\r\n    //    8\r\n    //0   1   2\r\n    //3   9   4\r\n    //5   6   7\r\n    private state:State = State.none;\r\n\r\n    private objects: PIXI.DisplayObject[] = [];\r\n    private targetIndex:number|undefined;\r\n\r\n    public setObjects(objects:PIXI.DisplayObject[])\r\n    {\r\n        this.objects = objects;\r\n        for(let i = 0;i < objects.length;i++)\r\n        {\r\n            objects[i].removeAllListeners();\r\n            objects[i].addListener(\"mousedown\",()=>{this.targetMouseDown(i)});\r\n            objects[i].addListener(\"mouseover\",()=>{this.mouseOver(objects[i])});\r\n            objects[i].addListener(\"mouseout\",()=>{this.mouseOut(objects[i])});\r\n            objects[i].interactive = true;\r\n        }\r\n        this.state = State.none;\r\n        if(objects.length!=0)\r\n            this.setTarget(this.targetIndex = objects.length-1)\r\n        else this.removeTarget();\r\n    }\r\n\r\n    public setTarget(targetIndex:number) {\r\n        this.targetIndex = targetIndex;\r\n        this.selectedTargetChanged(this.targetIndex);\r\n    }\r\n\r\n    public removeTarget() {\r\n        this.targetIndex = undefined;\r\n        this.selectedTargetChanged(undefined);\r\n    }\r\n\r\n    public mouseOver(target:PIXI.DisplayObject)\r\n    {\r\n        if(this.state==State.moving)\r\n            return;\r\n        target.alpha = 0.7;\r\n    }\r\n\r\n    public mouseOut(target:PIXI.DisplayObject)\r\n    {\r\n        target.alpha = 1;\r\n    }\r\n\r\n    //events\r\n    private pointMouseDown(num: number) {\r\n        \r\n    }\r\n\r\n    private targetMouseDown(index:number) {\r\n        this.setTarget(index);\r\n        this.state = State.moving;\r\n    }\r\n\r\n    private mouseUp() {\r\n        if(this.targetIndex == undefined)\r\n            return;\r\n\r\n        if(this.state == State.moving)\r\n        {\r\n            const index = this.targetIndex;\r\n            this.transformChanged(index,this.objects[index].transform);\r\n            this.state = State.none;\r\n        }\r\n    }\r\n\r\n    private prevMouseX: number = 0;\r\n    private prevMouseY: number = 0;\r\n\r\n    private mouseMove(x: number, y: number) {\r\n        const deltaMouseX = x - this.prevMouseX;\r\n        const deltaMouseY = y - this.prevMouseY;\r\n        this.prevMouseX = x;\r\n        this.prevMouseY = y;\r\n\r\n        if(this.targetIndex == undefined)\r\n            return;\r\n        const target = this.objects[this.targetIndex];\r\n\r\n        if (this.state == State.moving) {\r\n            target.transform.position.x += deltaMouseX;\r\n            target.transform.position.y += deltaMouseY;\r\n            this.selectedTargetMoving(target.transform.position.x,target.transform.position.y);\r\n        }\r\n    }\r\n    //calcs\r\n}\r\n\r\n\r\nenum State{\r\n    none,\r\n    moving,\r\n}","import React, { useEffect, useRef } from 'react'\r\nimport * as PIXI from 'pixi.js';\r\nimport MovieClip from '../GameEngine/MovieClip';\r\nimport Graphic from '../GameEngine/Graphic';\r\nimport TransformEditor from './ScreenUtils/TransformEditor';\r\nimport Frame from '../GameEngine/Frame';\r\n\r\n\r\ninterface Props {\r\n    width: number,\r\n    height: number,\r\n    frame: number,\r\n    movieClip: MovieClip,\r\n    selectedTargetChanged:(index:number|undefined)=>void,\r\n    selectedTargetMoving:(x:number,y:number)=>void,\r\n    resetFunc:Function,\r\n    className:string,\r\n}\r\n\r\n/*\r\n★TODO\r\n0.  만들기 이전에 받는 객체는 모두 PIXIObject로 처리, 외부에서 EngineObject로 변환 -> \r\n    아이디가 잇으면 좋을수도?(아이디는 나중에 처리해도 안늦음) index로처리해도 될듯?정해져있으니까?\r\n    추가나 제거 경우에는 이벤트로 처리하거나? 프레임 전체를 초기화해야할듯\r\n1.  UI graphic 함수화\r\n2.  Transform Editor는 별도 객체로 처리 -> 이벤트 발생\r\n3.  선택 클릭\r\n4.  드래그 선택\r\n5.  state 잘 정해서 마우스 이벤트 별로 정리\r\n*/\r\n\r\n\r\n\r\nlet app:PIXI.Application;\r\nlet container:PIXI.Container;\r\nlet transformEditor:TransformEditor;\r\nlet frame:Frame;\r\nlet gameObjects:(MovieClip|Graphic)[];\r\nlet pixiObjects:PIXI.DisplayObject[];\r\n\r\n\r\nconst Screen: React.FC<Props> = (props) => {\r\n    \r\n    const stageDiv = useRef<HTMLElement | null>(null);\r\n    const init = ()=>{\r\n        app  = new PIXI.Application({ width: props.width, height: props.height,backgroundColor:0xFFFFFF });\r\n        if(stageDiv.current)\r\n            stageDiv.current.appendChild(app.view);\r\n        transformEditor  = new TransformEditor(app, { color: 0x00CC99, radius: 1, thickness: 5 });\r\n        app.stage.interactive = true;\r\n        app.stage.interactiveChildren = true;\r\n        app.stage.hitArea = new PIXI.Rectangle(0, 0, app.renderer.width / app.renderer.resolution,\r\n            app.renderer.height / app.renderer.resolution);\r\n\r\n        transformEditor.transformChanged = (index, transform) => {\r\n            const transform_ = gameObjects[index].getTransform();\r\n            transform_.x = transform.position.x;\r\n            transform_.y = transform.position.y;\r\n            gameObjects[index].setTransform(transform_);\r\n            frame.updateBatchToCurrentState();\r\n        };\r\n\r\n        transformEditor.selectedTargetChanged = props.selectedTargetChanged;\r\n\r\n        transformEditor.selectedTargetMoving = props.selectedTargetMoving;\r\n\r\n        props.resetFunc(reset);\r\n    }\r\n\r\n    const reset = (movieClip:MovieClip)=>{\r\n        if(container)\r\n            app.stage.removeChild(container);\r\n        \r\n        container = new PIXI.Container();\r\n        container.interactiveChildren = true;\r\n        container.interactive = true;\r\n        app.stage.addChild(container);\r\n        frame = movieClip.getFrame(props.frame);\r\n        frame.rebatchAll();\r\n        gameObjects = frame.getObjects();\r\n        \r\n        pixiObjects = [];\r\n        for(let i = 0; i < gameObjects.length;i++){\r\n            \r\n            const gameObject = gameObjects[i];\r\n            let pixiObject:PIXI.DisplayObject;\r\n    \r\n            if(gameObject instanceof MovieClip){\r\n                pixiObject=gameObject.makeContainer(1)\r\n            }\r\n            else{\r\n                pixiObject=gameObject.sprite;\r\n            }\r\n    \r\n            container.addChild(pixiObject);\r\n            pixiObjects.push(pixiObject);\r\n        }\r\n        transformEditor.setObjects(pixiObjects);\r\n    }\r\n\r\n    \r\n    useEffect(() => {\r\n        //초기화\r\n        init();\r\n        return () => {\r\n            //마지막\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <div className = {props.className} ref={ref => { stageDiv.current = ref }} />\r\n    );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// const Screen: React.FC<Props> = (props) => {\r\n\r\n//     let stageDiv: HTMLElement | null;\r\n//     const app = new PIXI.Application({ width: props.width, height: props.height });\r\n//     const rect = new PIXI.Graphics();\r\n//     let draggingObject:{pixiObject:PIXI.DisplayObject,gameObject:(MovieClip|Graphic)}|null;\r\n\r\n\r\n//     useEffect(() => {\r\n//         //초기화\r\n//         stageDiv?.appendChild(app.view);\r\n//         app.stage.addChild(rect);\r\n//         app.stage.interactive = true;\r\n//         app.stage.interactiveChildren = true;\r\n//         app.stage.hitArea = new PIXI.Rectangle(0, 0, app.renderer.width/app.renderer.resolution, app.renderer.height/app.renderer.resolution);\r\n//         rect.zIndex = 0;\r\n//         app.ticker.add((delta)=>{\r\n\r\n//         });\r\n//     }, [])\r\n\r\n//     useEffect(() => {\r\n//         const container = new PIXI.Container();\r\n//         container.pivot.set(0.5, 0.5);\r\n//         container.position.set(props.width / 2, props.height / 2);\r\n//         const frame = props.movieClip.getFrame(props.frame);\r\n//         frame.rebatchAll();\r\n//         frame.getObjects().map((object) => {\r\n//             let pixiObject:PIXI.DisplayObject;\r\n//             if (object instanceof MovieClip) {\r\n//                 pixiObject = object.makeContainer(1);\r\n//             }\r\n//             else {\r\n//                 pixiObject = object.sprite;\r\n//             }\r\n\r\n//             pixiObject.interactive = true;\r\n//             pixiObject.addListener('mouseover',(e)=>{objectOver(e,object)})\r\n//             pixiObject.addListener('mouseout',(e)=>{objectOut(e,object)})\r\n//             pixiObject.addListener('mousedown',(e)=>{objectMouseDown(e,object)})\r\n//             app.stage.addListener('mouseup',mouseUp)\r\n//             app.stage.addListener('mousemove',mouseMove)\r\n//             container.addChild(pixiObject);\r\n//         });\r\n//         app.stage.addChild(container);\r\n//     })\r\n\r\n//     const objectOver = (event:PIXI.interaction.InteractionEvent,gameObject:Graphic|MovieClip)=>{\r\n//         const bound  = event.target.getBounds()\r\n//         rect.lineStyle(5, 0xFF0000);\r\n//         rect.drawRect(bound.x,bound.y,bound.width,bound.height);\r\n//     }\r\n//     const objectOut = (event:PIXI.interaction.InteractionEvent,gameObject:Graphic|MovieClip)=>{\r\n//         rect.clear();\r\n//     }\r\n//     const objectMouseDown = (event:PIXI.interaction.InteractionEvent,gameObject:Graphic|MovieClip)=>{\r\n//         draggingObject = {pixiObject:event.target,gameObject:gameObject};\r\n//     }\r\n//     const mouseUp = ()=>{\r\n//         if(draggingObject)\r\n//         {\r\n//             draggingObject.pixiObject.alpha = 1;\r\n//         }\r\n//         draggingObject = null;\r\n//         (\"up\");\r\n//     }\r\n\r\n//     let prevMouseX:number;\r\n//     let prevMouseY:number;\r\n\r\n//     const mouseMove = (event:PIXI.interaction.InteractionEvent)=>{\r\n//         const deltaMouseX = event.data.global.x - prevMouseX;\r\n//         const deltaMouseY = event.data.global.y - prevMouseY;\r\n//         prevMouseX = event.data.global.x;\r\n//         prevMouseY = event.data.global.y;\r\n\r\n//         if(draggingObject)\r\n//         {   \r\n//             const bound = draggingObject.pixiObject.getBounds();\r\n//             rect.clear();\r\n//             rect.lineStyle(5, 0x00CC66);\r\n//             rect.drawRect(bound.x,bound.y,bound.width,bound.height);\r\n//             draggingObject.pixiObject.transform.position.x+=deltaMouseX;\r\n//             draggingObject.pixiObject.transform.position.y+=deltaMouseY;\r\n//             draggingObject.pixiObject.alpha = 0.7;\r\n//         }\r\n//     }\r\n\r\n\r\n//     return (\r\n//         <div ref={ref => { stageDiv = ref }} />\r\n//     );\r\n// }\r\n\r\nexport default Screen;","import * as PIXI from 'pixi.js';\r\n\r\nexport default class FrontUI {\r\n    private app: PIXI.Application;\r\n    private container = new PIXI.Container();\r\n\r\n    constructor(app: PIXI.Application) {\r\n        this.app = app;\r\n\r\n        app.ticker.add(()=>{this.tick()});\r\n        this.app.stage.addChild(this.container);\r\n    }\r\n\r\n    private tick()\r\n    {\r\n        if(!this.app)\r\n            return;\r\n    }\r\n\r\n    public drawRect(lineWidth: number, lineColor: number, alpha: number, x: number, y: number, width: number, height: number, rotation: number, pivot: { x: number, y: number } = { x: 0, y: 0 }) {\r\n        console.log(\"draw!\");\r\n        this.drawShape(lineWidth, lineColor, alpha, (graphic: PIXI.Graphics) => {\r\n            graphic.drawRect(x, y, width, height);\r\n            graphic.rotation = rotation;\r\n            graphic.pivot.set(pivot.x, pivot.y);\r\n        });\r\n    }\r\n\r\n    public drawCircle(lineWidth: number, lineColor: number, alpha: number, x: number, y: number, radius: number, rotation: number, pivot: { x: number, y: number } = { x: 0, y: 0 }) {\r\n        this.drawShape(lineWidth, lineColor, alpha, (graphic: PIXI.Graphics) => {\r\n            graphic.drawCircle(x, y, radius);\r\n            graphic.rotation = rotation;\r\n        });\r\n    }\r\n\r\n    public drawLine(lineWidth: number, lineColor: number, alpha: number, x1: number, y1: number, x2: number, y2: number, rotation: number, pivot: { x: number, y: number } = { x: 0, y: 0 }) {\r\n        this.drawShape(lineWidth, lineColor, alpha, (graphic: PIXI.Graphics) => {\r\n            graphic.moveTo(x1, y1).lineTo(x2, y2);\r\n            graphic.rotation = rotation;\r\n        });\r\n    }\r\n\r\n    public drawShape(lineWidth: number, lineColor: number, alpha: number, drawing: (graphic:PIXI.Graphics) => void) {\r\n        this.container.removeChildren();\r\n        const graphic = new PIXI.Graphics();\r\n        graphic.lineStyle(lineWidth, lineColor, alpha);\r\n        drawing(graphic);\r\n        this.container.addChild(graphic);\r\n    }\r\n}","import * as Blockly from 'blockly/core';\r\n\r\nBlockly.Blocks['setpos'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"무비클립\");\r\n    this.appendValueInput(\"X\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"의 위치를\")\r\n        .appendField(\"X:\");\r\n    this.appendValueInput(\"Y\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"Y:\");\r\n    this.appendDummyInput()\r\n        .appendField(\"로 설정\");\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(230);\r\n this.setTooltip(\"좌표 설정\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getobject'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"objectName\")\r\n        .setCheck(\"String\")\r\n        .appendField(\"오브젝트 :\");\r\n    this.setOutput(true, \"object\");\r\n    this.setColour(230);\r\n this.setTooltip(\"오브젝트를 이름으로 찾습니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getpos'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트의 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"x\",\"x\"], [\"y\",\"y\"]]), \"type\")\r\n        .appendField(\"좌표\");\r\n    this.setOutput(true, \"Number\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['gametick'] = {\r\n  init: function() {\r\n    this.appendStatementInput(\"blocks\")\r\n        .setCheck(null)\r\n        .appendField(\"게임 틱\");\r\n    this.setColour(255);\r\n this.setTooltip(\"게임 틱마다 내용을 반복합니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getmousestate'] = {\r\n  init: function() {\r\n    this.appendDummyInput()\r\n        .appendField(\"마우스가\")\r\n        .appendField(new Blockly.FieldDropdown([[\"누른상태\",\"isDown\"], [\"뗀상태\",\"isUp\"]]), \"stateType\")\r\n        .appendField(\"인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"마우스가 눌린 상태인지 뗀 상태인지 확인합니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getmouseevent'] = {\r\n  init: function() {\r\n    this.appendDummyInput()\r\n        .appendField(\"마우스를 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"누른\",\"isDown\"], [\"뗀\",\"isUp\"], [\"클릭한\",\"isClick\"]]), \"eventType\")\r\n        .appendField(\"순간인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"마우스가 이벤트당  한번만 True를 반환합니다.\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getkeyboardstate'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"keycode\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"다음 키가 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"눌린\",\"isDown\"], [\"뗀\",\"isUp\"]]), \"statetype\")\r\n        .appendField(\"상태인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getkeyboardevent'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"keycode\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"다음 키를 \")\r\n        .appendField(new Blockly.FieldDropdown([[\"누른\",\"isDown\"], [\"뗀\",\"isUp\"]]), \"eventType\")\r\n        .appendField(\"순간인가?\");\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['addphysics'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트에 물리엔진 추가\");\r\n    this.appendValueInput(\"friction\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"마찰\");\r\n    this.appendValueInput(\"mass\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"질량\");\r\n    this.appendDummyInput()\r\n        .appendField(\"고정된 물체인가? \")\r\n        .appendField(new Blockly.FieldCheckbox(\"FALSE\"), \"isstatic\");\r\n    this.setInputsInline(false);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(0);\r\n this.setTooltip(\"물리세계에 던진다!\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['addforce'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트에\");\r\n    this.appendValueInput(\"X\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"X:\");\r\n    this.appendValueInput(\"Y\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"Y:\");\r\n    this.appendDummyInput()\r\n        .appendField(\"만큼 힘주기\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['setvelocity'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트의 속도를\");\r\n    this.appendValueInput(\"X\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"X:\");\r\n    this.appendValueInput(\"Y\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"Y:\");\r\n    this.appendDummyInput()\r\n        .appendField(\"로 정하기\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['getvelocity'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"다음 오브젝트의 속도\")\r\n        .appendField(new Blockly.FieldDropdown([[\"x\",\"x\"], [\"y\",\"y\"]]), \"type\")\r\n        .appendField(\"구하기\");\r\n    this.setOutput(true, \"Number\");\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['checkcollision'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"a\")\r\n        .setCheck(null)\r\n        .appendField(\"오브젝트\");\r\n    this.appendValueInput(\"b\")\r\n        .setCheck(null)\r\n        .appendField(\"오브젝트\");\r\n    this.appendDummyInput()\r\n        .appendField(\"사이의 충돌 확인\");\r\n    this.setInputsInline(true);\r\n    this.setOutput(true, \"Boolean\");\r\n    this.setColour(0);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['mouseevent'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\");\r\n    this.appendStatementInput(\"blocks\")\r\n        .setCheck(null)\r\n        .appendField(new Blockly.FieldDropdown([[\"눌림\",\"mousedown\"], [\"뗌\",\"mouseup\"], [\"움직임\",\"mousemove\"], [\"올림\",\"mouseover\"], [\"클릭\",\"mouseclick\"]]), \"type\")\r\n        .appendField(\"이벤트\");\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['gamestart'] = {\r\n  init: function() {\r\n    this.appendStatementInput(\"blocks\")\r\n        .setCheck(null)\r\n        .appendField(\"시작\");\r\n    this.setColour(50);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};\r\n\r\nBlockly.Blocks['setrotation'] = {\r\n  init: function() {\r\n    this.appendValueInput(\"object\")\r\n        .setCheck(\"object\")\r\n        .appendField(\"오브젝트\");\r\n    this.appendValueInput(\"NAME\")\r\n        .setCheck(\"Number\")\r\n        .appendField(\"의 각도를\");\r\n    this.appendDummyInput()\r\n        .appendField(\"로 설정\");\r\n    this.setInputsInline(true);\r\n    this.setPreviousStatement(true, null);\r\n    this.setNextStatement(true, null);\r\n    this.setColour(230);\r\n this.setTooltip(\"\");\r\n this.setHelpUrl(\"\");\r\n  }\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['gamestart'] = function(block:any) {\r\n    var statements_blocks = Blockly.JavaScript.statementToCode(block, 'blocks');\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"gameStart\"](game, ()=>{\r\n        ${statements_blocks}\r\n    });\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['addforce'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_x = Blockly.JavaScript.valueToCode(block, 'X', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_y = Blockly.JavaScript.valueToCode(block, 'Y', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"addForce\"](game, ${value_object}, ${value_x}, ${value_y});\\n`;\r\n    return code;\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['addphysics'] = function (block: any) {\r\n  var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var value_friction = Blockly.JavaScript.valueToCode(block, 'friction', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var value_mass = Blockly.JavaScript.valueToCode(block, 'mass', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var checkbox_isstatic = block.getFieldValue('isstatic') == 'TRUE';\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"addPhysics\"](game, ${value_object}, ${value_friction}, ${value_mass}, ${checkbox_isstatic});\\n`;\r\n  return code;\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['checkcollision'] = function(block:any) {\r\n    var value_a = Blockly.JavaScript.valueToCode(block, 'a', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_b = Blockly.JavaScript.valueToCode(block, 'b', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"checkCollision\"](game, ${value_a}, ${value_b})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['gametick'] = function (block: any) {\r\n  var statements_blocks = Blockly.JavaScript.statementToCode(block, 'blocks');\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"gameTick\"](game, ()=>{\r\n      ${statements_blocks}\r\n  });\\n`;\r\n  return code;\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getkeyboardevent'] = function(block:any) {\r\n  var dropdown_eventtype = block.getFieldValue('eventType');\r\n  var value_keycode = Blockly.JavaScript.valueToCode(block, 'keycode', Blockly.JavaScript.ORDER_ATOMIC);\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"getKeyboardEvent\"](game, \"${dropdown_eventtype}\", ${value_keycode})`;\r\n  // TODO: Change ORDER_NONE to the correct strength.\r\n  return [code, Blockly.JavaScript.ORDER_NONE];\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getkeyboardstate'] = function(block:any) {\r\n    var dropdown_statetype = block.getFieldValue('statetype');\r\n    var value_keycode = Blockly.JavaScript.valueToCode(block, 'keycode', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getKeyboardState\"](game, \"${dropdown_statetype}\", ${value_keycode})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getmouseevent'] = function(block:any) {\r\n    var dropdown_eventtype = block.getFieldValue('eventType');\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getMouseEvent\"](game, \"${dropdown_eventtype}\")`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getmousestate'] = function(block:any) {\r\n    var dropdown_statetype = block.getFieldValue('stateType');\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getMousState\"](game, \"${dropdown_statetype}\")`;\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  }","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getobject'] = function(block:any) {\r\n    var value_objectname = Blockly.JavaScript.valueToCode(block, 'objectName', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getObject\"](game, ${value_objectname})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getpos'] = function(block:any) {\r\n    var dropdown_type = block.getFieldValue('type');\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getPos\"](game, \"${dropdown_type}\", ${value_object})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['getvelocity'] = function(block:any) {\r\n    var dropdown_type = block.getFieldValue('type');\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"getVelocity\"](game, \"${dropdown_type}\", ${value_object})`;\r\n    // TODO: Change ORDER_NONE to the correct strength.\r\n    return [code, Blockly.JavaScript.ORDER_NONE];\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['mouseevent'] = function(block:any) {\r\n  var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n  var dropdown_type = block.getFieldValue('type');\r\n  var statements_blocks = Blockly.JavaScript.statementToCode(block, 'blocks');\r\n  // TODO: Assemble JavaScript into code variable.\r\n  var code = `blockFunctions[\"mouseEvent\"](game, ${value_object}, \"${dropdown_type}\",()=>{\r\n    ${statements_blocks}\r\n  })\\n`;\r\n  return code;\r\n};","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['setpos'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_x = Blockly.JavaScript.valueToCode(block, 'X', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_y = Blockly.JavaScript.valueToCode(block, 'Y', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"setPos\"](game, ${value_object}, ${value_x}, ${value_y})\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['setvelocity'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_x = Blockly.JavaScript.valueToCode(block, 'X', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_y = Blockly.JavaScript.valueToCode(block, 'Y', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"setVelocity\"](game, ${value_object}, ${value_x}, ${value_y})\\n`;\r\n    return code;\r\n  };","import * as Blockly from 'blockly/core';\r\nimport 'blockly/javascript';\r\n\r\nBlockly.JavaScript['setrotation'] = function(block:any) {\r\n    var value_object = Blockly.JavaScript.valueToCode(block, 'object', Blockly.JavaScript.ORDER_ATOMIC);\r\n    var value_name = Blockly.JavaScript.valueToCode(block, 'NAME', Blockly.JavaScript.ORDER_ATOMIC);\r\n    // TODO: Assemble JavaScript into code variable.\r\n    var code = `blockFunctions[\"setPos\"](game, ${value_object}, ${value_name})\\n`;\r\n    return code;\r\n  };","import BlocklyJS from 'blockly/javascript';\r\n\r\nimport \"./customBlocks/definitions/definition\"\r\nimport \"./customBlocks/generators/gameStart\"\r\nimport \"./customBlocks/generators/addForce\"\r\nimport \"./customBlocks/generators/addPhysics\"\r\nimport \"./customBlocks/generators/checkCollision\"\r\nimport \"./customBlocks/generators/gameTick\"\r\nimport \"./customBlocks/generators/getKeyboardEvent\"\r\nimport \"./customBlocks/generators/getKeyboardState\"\r\nimport \"./customBlocks/generators/getMouseEvent\"\r\nimport \"./customBlocks/generators/getMouseState\"\r\nimport \"./customBlocks/generators/getObject\"\r\nimport \"./customBlocks/generators/getPos\"\r\nimport \"./customBlocks/generators/getVelocity\"\r\nimport \"./customBlocks/generators/mouseEvent\"\r\nimport \"./customBlocks/generators/setPos\"\r\nimport \"./customBlocks/generators/setVelocity\"\r\nimport \"./customBlocks/generators/setRotation\"\r\n\r\nexport const INITIAL_XML = '<xml xmlns=\"http://www.w3.org/1999/xhtml\"></xml>';\r\n\r\nexport const INITIAL_TOOLBOX_XML = \r\n`<xml xmlns=\"http://www.w3.org/1999/xhtml\" id=\"toolbox\" style=\"display: none;\">\r\n<category name=\"Logic\" colour=\"#5C81A6\">\r\n  <block type=\"controls_if\"></block>\r\n  <block type=\"logic_compare\">\r\n    <field name=\"OP\">EQ</field>\r\n  </block>\r\n  <block type=\"logic_operation\">\r\n    <field name=\"OP\">AND</field>\r\n  </block>\r\n  <block type=\"logic_negate\"></block>\r\n  <block type=\"logic_boolean\">\r\n    <field name=\"BOOL\">TRUE</field>\r\n  </block>\r\n  <block type=\"logic_null\"></block>\r\n  <block type=\"logic_ternary\"></block>\r\n</category>\r\n<category name=\"Loops\" colour=\"#5CA65C\">\r\n  <block type=\"controls_repeat_ext\">\r\n    <value name=\"TIMES\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">10</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"controls_whileUntil\">\r\n    <field name=\"MODE\">WHILE</field>\r\n  </block>\r\n  <block type=\"controls_for\">\r\n    <field name=\"VAR\" id=\"C(8;cYCF}~vSgkxzJ+{O\" variabletype=\"\">i</field>\r\n    <value name=\"FROM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"TO\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">10</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"BY\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"controls_forEach\">\r\n    <field name=\"VAR\" id=\"Cg!CSk/ZJo2XQN3=VVrz\" variabletype=\"\">j</field>\r\n  </block>\r\n  <block type=\"controls_flow_statements\">\r\n    <field name=\"FLOW\">BREAK</field>\r\n  </block>\r\n</category>\r\n<category name=\"Math\" colour=\"#5C68A6\">\r\n  <block type=\"math_round\">\r\n    <field name=\"OP\">ROUND</field>\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">3.1</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_number\">\r\n    <field name=\"NUM\">0</field>\r\n  </block>\r\n  <block type=\"math_single\">\r\n    <field name=\"OP\">ROOT</field>\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">9</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_trig\">\r\n    <field name=\"OP\">SIN</field>\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">45</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_constant\">\r\n    <field name=\"CONSTANT\">PI</field>\r\n  </block>\r\n  <block type=\"math_number_property\">\r\n    <mutation divisor_input=\"false\"></mutation>\r\n    <field name=\"PROPERTY\">EVEN</field>\r\n    <value name=\"NUMBER_TO_CHECK\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">0</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_arithmetic\">\r\n    <field name=\"OP\">ADD</field>\r\n    <value name=\"A\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"B\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_on_list\">\r\n    <mutation op=\"SUM\"></mutation>\r\n    <field name=\"OP\">SUM</field>\r\n  </block>\r\n  <block type=\"math_modulo\">\r\n    <value name=\"DIVIDEND\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">64</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"DIVISOR\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">10</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_constrain\">\r\n    <value name=\"VALUE\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">50</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"LOW\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"HIGH\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">100</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_random_int\">\r\n    <value name=\"FROM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">1</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"TO\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">100</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"math_random_float\"></block>\r\n</category>\r\n<category name=\"Text\" colour=\"#5CA68D\">\r\n  <block type=\"text_charAt\">\r\n    <mutation at=\"true\"></mutation>\r\n    <field name=\"WHERE\">FROM_START</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"q@$ZF(L?Zo/z\\`d{o.Bp!\" variabletype=\"\">text</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"text\">\r\n    <field name=\"TEXT\"></field>\r\n  </block>\r\n  <block type=\"text_append\">\r\n    <field name=\"VAR\" id=\":};P,s[*|I8+L^-.EbRi\" variabletype=\"\">item</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\"></field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_length\">\r\n    <value name=\"VALUE\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_isEmpty\">\r\n    <value name=\"VALUE\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\"></field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_indexOf\">\r\n    <field name=\"END\">FIRST</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"q@$ZF(L?Zo/z\\`d{o.Bp!\" variabletype=\"\">text</field>\r\n      </block>\r\n    </value>\r\n    <value name=\"FIND\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_join\">\r\n    <mutation items=\"2\"></mutation>\r\n  </block>\r\n  <block type=\"text_getSubstring\">\r\n    <mutation at1=\"true\" at2=\"true\"></mutation>\r\n    <field name=\"WHERE1\">FROM_START</field>\r\n    <field name=\"WHERE2\">FROM_START</field>\r\n    <value name=\"STRING\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"q@$ZF(L?Zo/z\\`d{o.Bp!\" variabletype=\"\">text</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_changeCase\">\r\n    <field name=\"CASE\">UPPERCASE</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_trim\">\r\n    <field name=\"MODE\">BOTH</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_print\">\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"text_prompt_ext\">\r\n    <mutation type=\"TEXT\"></mutation>\r\n    <field name=\"TYPE\">TEXT</field>\r\n    <value name=\"TEXT\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">abc</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n</category>\r\n<category name=\"Lists\" colour=\"#745CA6\">\r\n  <block type=\"lists_indexOf\">\r\n    <field name=\"END\">FIRST</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_create_with\">\r\n    <mutation items=\"0\"></mutation>\r\n  </block>\r\n  <block type=\"lists_repeat\">\r\n    <value name=\"NUM\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">5</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_length\"></block>\r\n  <block type=\"lists_isEmpty\"></block>\r\n  <block type=\"lists_create_with\">\r\n    <mutation items=\"3\"></mutation>\r\n  </block>\r\n  <block type=\"lists_getIndex\">\r\n    <mutation statement=\"false\" at=\"true\"></mutation>\r\n    <field name=\"MODE\">GET</field>\r\n    <field name=\"WHERE\">FROM_START</field>\r\n    <value name=\"VALUE\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_setIndex\">\r\n    <mutation at=\"true\"></mutation>\r\n    <field name=\"MODE\">SET</field>\r\n    <field name=\"WHERE\">FROM_START</field>\r\n    <value name=\"LIST\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_getSublist\">\r\n    <mutation at1=\"true\" at2=\"true\"></mutation>\r\n    <field name=\"WHERE1\">FROM_START</field>\r\n    <field name=\"WHERE2\">FROM_START</field>\r\n    <value name=\"LIST\">\r\n      <block type=\"variables_get\">\r\n        <field name=\"VAR\" id=\"e\\`(L;x,.j[[XN\\`F33Q5.\" variabletype=\"\">list</field>\r\n      </block>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_split\">\r\n    <mutation mode=\"SPLIT\"></mutation>\r\n    <field name=\"MODE\">SPLIT</field>\r\n    <value name=\"DELIM\">\r\n      <shadow type=\"text\">\r\n        <field name=\"TEXT\">,</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"lists_sort\">\r\n    <field name=\"TYPE\">NUMERIC</field>\r\n    <field name=\"DIRECTION\">1</field>\r\n  </block>\r\n</category>\r\n<category name=\"Colour\" colour=\"#A6745C\">\r\n  <block type=\"colour_picker\">\r\n    <field name=\"COLOUR\">#ff0000</field>\r\n  </block>\r\n  <block type=\"colour_random\"></block>\r\n  <block type=\"colour_rgb\">\r\n    <value name=\"RED\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">100</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"GREEN\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">50</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"BLUE\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">0</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n  <block type=\"colour_blend\">\r\n    <value name=\"COLOUR1\">\r\n      <shadow type=\"colour_picker\">\r\n        <field name=\"COLOUR\">#ff0000</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"COLOUR2\">\r\n      <shadow type=\"colour_picker\">\r\n        <field name=\"COLOUR\">#3333ff</field>\r\n      </shadow>\r\n    </value>\r\n    <value name=\"RATIO\">\r\n      <shadow type=\"math_number\">\r\n        <field name=\"NUM\">0.5</field>\r\n      </shadow>\r\n    </value>\r\n  </block>\r\n</category>\r\n<sep></sep>\r\n<category name=\"Custom Button\" colour=\"#A6745C\">\r\n  <button text=\"A button\" callbackKey=\"myFirstButtonPressed\"></button>\r\n</category>\r\n<category name=\"Variables\" colour=\"#A65C81\" custom=\"VARIABLE\"></category>\r\n<category name=\"Functions\" colour=\"#9A5CA6\" custom=\"PROCEDURE\"></category>\r\n<category name=\"Engine\" colour=\"#5ba55b\">\r\n<block type=\"gamestart\"></block>\r\n<block type=\"setpos\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"X\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"Y\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"getpos\">\r\n  <field name=\"type\">x</field>\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"gametick\"></block>\r\n<block type=\"getmousestate\">\r\n  <field name=\"stateType\">isDown</field>\r\n</block>\r\n<block type=\"getmouseevent\">\r\n  <field name=\"eventType\">isDown</field>\r\n</block>\r\n<block type=\"getkeyboardstate\">\r\n  <field name=\"statetype\">isDown</field>\r\n  <value name=\"keycode\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"getkeyboardevent\">\r\n  <field name=\"eventType\">isDown</field>\r\n  <value name=\"keycode\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"addphysics\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"friction\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0.1</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"mass\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0.0001</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"addforce\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"X\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"Y\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"setvelocity\">\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"X\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n  <value name=\"Y\">\r\n    <block type=\"math_number\">\r\n      <field name=\"NUM\">0</field>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"getvelocity\">\r\n  <field name=\"type\">x</field>\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"checkcollision\">\r\n  <value name=\"a\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n  <value name=\"b\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"mouseevent\">\r\n  <field name=\"type\">down</field>\r\n  <value name=\"object\">\r\n    <block type=\"getobject\">\r\n      <value name=\"objectName\">\r\n        <block type=\"text\">\r\n          <field name=\"TEXT\"></field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n  </value>\r\n</block>\r\n<block type=\"setrotation\">\r\n      <value name=\"object\">\r\n        <block type=\"getobject\">\r\n          <value name=\"objectName\">\r\n            <block type=\"text\">\r\n              <field name=\"TEXT\"></field>\r\n            </block>\r\n          </value>\r\n        </block>\r\n      </value>\r\n      <value name=\"NAME\">\r\n        <block type=\"math_number\">\r\n          <field name=\"NUM\">0</field>\r\n        </block>\r\n      </value>\r\n    </block>\r\n</category>\r\n</xml>`;\r\n\r\nconst INITIAL_TOOLBOX_CATEGORIES = [\r\n  {\r\n    name: 'Controls',\r\n    blocks: [\r\n      { type: 'controls_if' },\r\n      {\r\n        type: 'controls_repeat_ext',\r\n        values: {\r\n          TIMES: {\r\n            type: 'math_number',\r\n            shadow: true,\r\n            fields: {\r\n              NUM: 10,\r\n            },\r\n          },\r\n        },\r\n        statements: {\r\n          DO: {\r\n            type: 'text_print',\r\n            shadow: true,\r\n            values: {\r\n              TEXT: {\r\n                type: 'text',\r\n                shadow: true,\r\n                fields: {\r\n                  TEXT: 'abc',\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    name: 'Text',\r\n    blocks: [\r\n      { type: 'text' },\r\n      {\r\n        type: 'text_print',\r\n        values: {\r\n          TEXT: {\r\n            type: 'text',\r\n            shadow: true,\r\n            fields: {\r\n              TEXT: 'abc',\r\n            },\r\n          },\r\n        },\r\n      },\r\n    ],\r\n  },\r\n];\r\n","import React, { useState, useRef, useEffect } from 'react';\nimport styles from './App.module.css';\nimport Screen from './components/Screen';\nimport Graphic from './GameEngine/Graphic';\nimport Transform from './GameEngine/Transform';\nimport MovieClip from './GameEngine/MovieClip';\nimport ReactBlocklyComponent from 'react-blockly';\nimport parseWorkspaceXml from 'react-blockly/src/BlocklyHelper';\n\nimport { INITIAL_XML, INITIAL_TOOLBOX_XML } from './content';\nimport * as Blockly from 'blockly/core';\nimport ResourceManager from './GameEngine/ResourceManager';\n\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\"\nimport AppBar from '@material-ui/core/AppBar';\nimport Typography from '@material-ui/core/Typography';\nimport Toolbar from '@material-ui/core/Toolbar';\n\n\nimport MenuIcon from '@material-ui/icons/Menu';\nimport ShareIcon from '@material-ui/icons/Share';\nimport EditIcon from '@material-ui/icons/Edit';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport SaveIcon from '@material-ui/icons/Save';\nimport FolderOpenIcon from '@material-ui/icons/FolderOpen';\nimport Menu from '@material-ui/core/Menu';\n\nimport Breadcrumbs from '@material-ui/core/Breadcrumbs';\nimport Link from '@material-ui/core/Link';\n\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton'\nimport { generateUUID } from './Utils';\nimport fileDownload from 'js-file-download';\nimport GameScreen from './components/GameScreen';\n\nimport ReactModal from './resizableWindow/index';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\n\n\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      '& > *': {\n        margin: theme.spacing(1),\n      },\n    },\n    input: {\n      display: 'none',\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n    },\n    editProjectNameButton: {\n      marginRight: theme.spacing(2),\n    },\n    title: {\n      marginRight: theme.spacing(3),\n    },\n    shareButton:{\n      marginLeft: \"auto\",\n    },\n    runButton:{\n      position: \"absolute\",\n      transform: \"translate(calc(50vw - 100%), 0)\",\n      transformOrigin: \"-50% 0\"\n    },\n    Button:{\n      width: \"100%\",\n      height: \"100%\"\n    },\n    link:{\n      color:\"white\",\n      fontSize:\"15px\",\n    },\n  }),\n);\n\nlet mainClip = new MovieClip(\"root\");\nlet resourceManager = new ResourceManager();\nlet selectedIndex: number | undefined = undefined;\nlet updateScreen: Function = () => { };\nlet currentClip: MovieClip = mainClip;\n\nlet workspace: any;\nlet workspaceInit = false;\n\nconst App = () => {\n\n  const workspaceChange = (w:any)=>{\n    if(workspaceInit)\n      return;\n    console.log(\"적용!\");\n    workspaceInit=true;\n    workspace = w;\n  }\n  const [gameFile, setGameFile] = useState<string>(\"\");\n  const [objectName, setObjectName] = useState(\"\");\n  const [isMovieclip, setIsMovieclip] = useState(false);\n  const [selectedObject, setSelectedObject] = useState<MovieClip | Graphic | undefined>();\n  //xy view\n  const xel = useRef<HTMLDivElement|null>();\n  const yel = useRef<HTMLDivElement|null>();\n\n  const classes = useStyles();\n\n  const graphicOpen = (e: any) => {\n    const file = e.target.files[0];\n    if (!file)\n      return;\n    var reader = new FileReader();\n    reader.onload = function (e) {\n      let contents = e.target?.result;\n      if (contents) {\n        let uuid = generateUUID();\n        resourceManager.addDirectBase64(uuid, contents.toString()).loaderLoad(() => {\n          addGraphic(file.name, uuid);\n        });\n      }\n    };\n    reader.readAsDataURL(file);\n  }\n\n  const addGraphic = (name: string, texId: string) => {\n    const graphic = new Graphic(name, new Transform(0, 0), resourceManager, texId);\n    currentClip.addObject(graphic, [1], [new Transform(0, 0)]);\n    updateScreen(currentClip);\n  }\n\n  const changeCurrentClip = (clip: MovieClip) => {\n    currentClip = clip;\n    updateScreen(currentClip);\n    renderBreadcrumbs();\n  }\n\n  const selectedTargetChanged = (index: number | undefined) => {\n    selectedIndex = index;\n    if (index == undefined) {\n      setSelectedObject(undefined);\n      setObjectName(\"\");\n      setIsMovieclip(false);\n      return;\n    }\n    const nselectedObject = currentClip.getFrame(1).getObjects()[index];\n    const pos = nselectedObject.getTransform();\n    setSelectedObject(nselectedObject);\n    setXYPos(pos.x,pos.y);\n    if (!nselectedObject)\n      return;\n\n    setObjectName(nselectedObject.name);\n    setIsMovieclip(nselectedObject instanceof MovieClip);\n  }\n\n  const onNameInputChanged = (event: any) => {\n    if (selectedIndex == undefined) {\n      setObjectName(\"\");\n      return;\n    }\n    setObjectName(event.target.value);\n    if (selectedObject)\n      selectedObject.name = event.target.value;\n  }\n\n  const removeSelectedObject = () => {\n    if (selectedObject != undefined) {\n      currentClip.getFrame(1).removeObject(selectedObject);\n      updateScreen(currentClip);\n    }\n  }\n\n\n\n  const goInside = () => {\n    if (selectedObject != undefined && selectedObject instanceof MovieClip) {\n      changeCurrentClip(selectedObject);\n    }\n  }\n\n  const goOutside = () => {\n    const parent = currentClip.getParent();\n    if (parent)\n      changeCurrentClip(parent);\n  }\n\n  const getResetFunc = (reset: Function) => {\n    updateScreen = reset;\n  }\n\n\n\n\n\n  //materialui + ui\n\n  //menu\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState<null | HTMLElement>(null);\n  const handleMenuClose = () => {\n    setMenuAnchorEl(null);\n  };\n\n  const handleMenuClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setMenuAnchorEl(event.currentTarget);\n  };\n\n  const saveProject = () => {\n    const resource = resourceManager.exportJson();\n    const xml = Blockly.Xml.workspaceToDom(workspace);\n    const xml_text = Blockly.Xml.domToText(xml);\n\n    const objectJson = mainClip.exportJson();\n    fileDownload(JSON.stringify({ resource: resource, xml: xml_text, objects: objectJson }), projectName+\".mandunda\");\n  }\n\n  const projectOpen = (e: any) => {\n    const file = e.target.files[0];\n    if (!file)\n      return;\n    var reader = new FileReader();\n    reader.onload = function (e) {\n      let contents = e.target?.result;\n      if (contents) {\n        const project = JSON.parse(contents.toString());\n        resourceManager = new ResourceManager();\n        resourceManager.importJson(project.resource, () => {\n          mainClip = MovieClip.importJson(project.objects, resourceManager);\n          workspace.clear();\n          var xml = Blockly.Xml.textToDom(project.xml);\n          Blockly.Xml.domToWorkspace(xml, workspace);\n          changeCurrentClip(mainClip);\n        })\n      }\n    };\n    reader.readAsText(file);\n  }\n\n\n\n  //projectname\n  const [newPName,setNewPName] = useState(\"\");\n  const [projectName, setProjectName] = useState(\"New Project\");\n  const [openProjectNameDialog, setOpenProjectNameDialog] = useState(false);\n  const handleEditProjectNameClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setOpenProjectNameDialog(true);\n  };\n  const projectNameCloseDialog = (set:boolean)=>{\n    if(set&&newPName!=\"\")\n    {\n      setProjectName(newPName);\n    }\n    else{\n      setNewPName(projectName);\n    }\n    setOpenProjectNameDialog(false);\n  }\n\n  //movieclipName\n  const [newMcName,setNewMcName] = useState(\"new_movieclip\");\n  const [openMcNameDialog, setOpenMcNameDialog] = useState(false);\n  const makeMovieClip = () => {\n    if (selectedObject == undefined)\n      return;\n\n    setNewMcName(\"new_movieclip\")\n    setOpenMcNameDialog(true);\n  }\n\n  const mcNameCloseDialog = (set:boolean)=>{\n    if (selectedObject == undefined)\n      return;\n    if(set&&newMcName!=\"\")\n    {\n      currentClip.getFrame(1).removeObject(selectedObject);\n      let newPos = selectedObject.getTransform();\n      const movieClip = new MovieClip(newMcName, new Transform(newPos.x, newPos.y));\n      newPos.x = 0;\n      newPos.y = 0;\n      movieClip.addObject(selectedObject, [1], [newPos]);\n      currentClip.addObject(movieClip, [1], [movieClip.getTransform()]);\n      updateScreen(currentClip);\n    }\n    setOpenMcNameDialog(false);\n  }\n  //upload\n  const uploadProject = ()=>{\n    fetch(\"http://localhost:5353/\"+projectName.replace(\" \",\"_\"), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: exportGameFile()\n    }).then((response)=>{\n      alert(\"업로드 완료!\\n /player/\"+projectName.replace(\" \",\"_\")+\"에서 플레이 가능!\");\n    });\n  }\n\n\n  //gamerun\n  const [gameRuning,setGameRunning] = useState(false);\n  const handleRunClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    gameStart();\n    setGameRunning(true);\n  };\n  const closeGameDialog = ()=>{\n    setGameRunning(false);\n  }\n\n\n  const gameStart = () => {\n    const resource = resourceManager.exportJson();\n    const code = Blockly.JavaScript.workspaceToCode(workspace);\n    const objectJson = mainClip.exportJson();\n\n    setGameFile(exportGameFile());\n  }\n\n  const exportGameFile = ()=>{\n    const resource = resourceManager.exportJson();\n    const code = Blockly.JavaScript.workspaceToCode(workspace);\n    const objectJson = mainClip.exportJson();\n\n    return JSON.stringify({ resource: resource, code: code, objects: objectJson });\n  }\n\n\n  const resizeBlocky = ()=>{\n    if(workspace!=null)\n      Blockly.svgResize(workspace);\n    }\n\n  const setXYPos = (x: number, y: number) => {\n    if (!xel.current || !yel.current)\n      return;\n    if (!selectedObject) {\n      xel.current.textContent = \"X: -\";\n      yel.current.textContent = \"Y: -\";\n    }\n    xel.current.textContent = \"X: \" + x;\n    yel.current.textContent = \"Y: \" + y;\n  }\n\n\nconst handleClick = ()=>{\n  \n}\n\nconst [breadObjects,setBreadObjects] = useState<(MovieClip)[]>([mainClip]);\n\nconst renderBreadcrumbs = ()=>{\n  let current = currentClip; \n  let objects:(MovieClip)[] = [];\n\n  for(let i = 0;i<3;i++){\n    objects.push(current);\n    if(current == mainClip)\n    {\n      break;\n    }\n    const parent = current.getParent();\n    if(parent)\n      current = parent;\n  }\n  setBreadObjects(objects.reverse());\n}\n\n  window.addEventListener(\"mousemove\",resizeBlocky);\n\n  return (\n    <div className={styles.App}>\n\n      <input onChange={projectOpen} accept=\"*\" className={classes.input} id=\"contained-button-file2\" type=\"file\" />\n\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={menuAnchorEl}\n        keepMounted\n        open={Boolean(menuAnchorEl)}\n        onClose = {handleMenuClose}\n      >\n        <MenuItem onClick={saveProject}> Save Project　<SaveIcon /></MenuItem>\n        <label htmlFor=\"contained-button-file2\">\n          <MenuItem onClick={handleMenuClose}>Load Project　<FolderOpenIcon /></MenuItem>\n        </label> \n      </Menu>\n\n      <AppBar position=\"static\" className={styles.AppBar}>\n        <Toolbar>\n          <IconButton onClick = {handleMenuClick} edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" className={classes.title}>\n            만든다 - {projectName}\n          </Typography>\n          <IconButton onClick = {handleEditProjectNameClick} edge=\"start\" className={classes.editProjectNameButton} color=\"inherit\">\n            <EditIcon />\n          </IconButton>\n          <IconButton onClick = {handleRunClick} edge=\"start\" className={classes.runButton} color=\"inherit\">\n            <PlayArrowIcon style={{fontSize: 35}} />\n          </IconButton>\n          <Button onClick = {uploadProject} startIcon={<ShareIcon />} className = {classes.shareButton} color=\"inherit\">Upload</Button>\n        </Toolbar>\n      </AppBar>\n\n\n\n      <Dialog maxWidth={false} disableEscapeKeyDown={true} disableBackdropClick = {true} open={gameRuning} onClose={closeGameDialog} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">게임 화면</DialogTitle>\n        <DialogContent>\n        <GameScreen width={800} height={500} gameJson={gameFile} />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={closeGameDialog} color=\"primary\">\n            닫기\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n\n\n      <Dialog disableEscapeKeyDown={true} open={openProjectNameDialog} onClose={()=>{projectNameCloseDialog(false)}} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">프로젝트 이름</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            새로운 프로젝트 이름을 설정해주세요.\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"프로젝트 이름\"\n            defaultValue={projectName}\n            fullWidth\n            onChange={(e)=>{setNewPName(e.target.value)}}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={()=>{projectNameCloseDialog(false)}} color=\"secondary\">\n            취소\n          </Button>\n          <Button onClick={()=>{projectNameCloseDialog(true)}} color=\"primary\">\n            설정\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n\n      <Dialog open={openMcNameDialog} onClose={()=>{mcNameCloseDialog(false)}} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">무비클립 이름</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            무비클립 이름을 설정해주세요.\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"무비클립 이름\"\n            defaultValue={\"new_movieclip\"}\n            fullWidth\n            onChange={(e)=>{setNewPName(e.target.value)}}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={()=>{mcNameCloseDialog(false)}} color=\"secondary\">\n            취소\n          </Button>\n          <Button onClick={()=>{mcNameCloseDialog(true)}} color=\"primary\">\n            설정\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n\n      <Dialog disableEscapeKeyDown={true} open={openMcNameDialog} onClose={()=>{mcNameCloseDialog(false)}} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle id=\"form-dialog-title\">무비클립 이름</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            무비클립 이름을 설정해주세요.\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"무비클립 이름\"\n            defaultValue={\"new_movieclip\"}\n            fullWidth\n            onChange={(e)=>{setNewPName(e.target.value)}}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={()=>{mcNameCloseDialog(false)}} color=\"secondary\">\n            취소\n          </Button>\n          <Button onClick={()=>{mcNameCloseDialog(true)}} color=\"primary\">\n            설정\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n\n\n\n      <div className={styles.screenContainer}>\n        <Screen className = {styles.Screen} selectedTargetMoving={setXYPos} resetFunc={getResetFunc} width={800} height={500} movieClip={currentClip} frame={1} selectedTargetChanged={selectedTargetChanged} />\n        <div className={styles.Properties}>\n          <div className = {styles.tfContainer}>\n            <TextField\n              label=\"오브젝트 이름\"\n              id=\"outlined-margin-dense\"\n              defaultValue=\"Default Value\"\n              className={styles.test1}\n              margin=\"dense\"\n              variant=\"outlined\"\n              value={objectName} \n              onChange={onNameInputChanged}\n            />\n          </div>\n          <div className={styles.test2}>\n            <Breadcrumbs className = {classes.link} aria-label=\"breadcrumb\">\n              {breadObjects.indexOf(mainClip)==-1&&(<div></div>)} \n              {breadObjects.map((el) => \n                (<Link title = {el.name} onClick={()=>{changeCurrentClip(el)}} className = {classes.link}>{(el.name.slice(0,6)+\"…\").slice(0,el.name.length)}</Link>)\n              )}\n            </Breadcrumbs>\n          </div>\n          <div className={styles.test3}>\n            <div ref = {ref => { xel.current = ref }}>X: - </div>\n          </div>\n          <div className={styles.test4}>\n            <div ref = {ref => { yel.current = ref }}>Y: -</div>\n          </div>\n          <input onChange={graphicOpen} accept=\"image/*\" className={classes.input} id=\"contained-button-file\" type=\"file\" />\n          <div className={styles.test5}>\n            <label htmlFor=\"contained-button-file\">\n              <Button className={classes.Button} variant=\"contained\" color=\"primary\" disableElevation component=\"span\">그래픽 추가</Button>\n            </label>\n          </div>\n          <div className={styles.test6}>\n            <Button className={classes.Button} onClick={makeMovieClip} variant=\"contained\" color=\"primary\" disableElevation>무비클립화 하기</Button>\n          </div>\n          <div className={styles.test8}>\n            <Button className={classes.Button} onClick={goInside} variant=\"outlined\" disableElevation disabled={!isMovieclip}>안으로 들어가기</Button>\n          </div>\n          <div className={styles.test9}>\n            <Button className={classes.Button} onClick={goOutside} variant=\"outlined\" disableElevation disabled={(currentClip == mainClip)}>밖으로 나가기</Button>\n          </div>\n          <div className={styles.test7}>\n            <Button className={classes.Button} onClick={removeSelectedObject} variant=\"contained\" color=\"secondary\" disableElevation>삭제</Button>\n          </div>\n        </div>\n      </div>\n\n\n\n      <ReactModal initWidth={800} initHeight={400}\n        onFocus={() => (\"Modal is clicked\")}\n        isOpen={true}\n        resizing={resizeBlocky}>\n        <ReactBlocklyComponent.BlocklyEditor\n        initialXml={INITIAL_XML}\n        toolboxCategories={parseWorkspaceXml(INITIAL_TOOLBOX_XML)}\n        wrapperDivClassName={styles.Blockly}\n        workspaceDidChange={workspaceChange} />\n      </ReactModal>\n\n\n      \n    </div>\n  );\n}\n\nexport default App;\n\n\n\n/*\n\n \n      <TextField id=\"standard-basic\" label=\"오브젝트 이름\" value={objectName} onChange={onNameInputChanged} />\n      <input onChange={graphicOpen} accept=\"image/*\" className={classes.input} id=\"contained-button-file\" type=\"file\" />\n      <label htmlFor=\"contained-button-file\">\n        <Button variant=\"contained\" color=\"primary\" disableElevation component=\"span\">그래픽 추가</Button>\n      </label>\n\n      \n      <Button onClick={goInside} variant=\"outlined\" disableElevation disabled={!isMovieclip}>안으로 들어가기</Button>\n      \n      <Button onClick={removeSelectedObject} variant=\"contained\" color=\"secondary\" disableElevation>삭제</Button>\n      <br />\n      <Button onClick={gameStart} variant=\"contained\" color=\"secondary\" disableElevation>게임 실행</Button>\n      <Button onClick={saveProject} variant=\"contained\" color=\"secondary\" disableElevation>프로젝트 저장</Button>\n      <input onChange={projectOpen} accept=\"*\" className={classes.input} id=\"contained-button-file2\" type=\"file\" />\n      <label htmlFor=\"contained-button-file2\">\n        <Button variant=\"contained\" color=\"primary\" disableElevation component=\"span\">프로젝트 불러오기</Button>\n      </label>\n*/","import React, { Component } from \"react\";\nimport \"./index.css\";\n\nclass Resizer extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n  handleMouseDown(e) {\n    this.props.updateStateResizing(true);\n  }\n  render() {\n    const style = {\n      width: 16,\n      height: 16\n    };\n    return (\n      <div\n        className=\"flexible-modal-resizer\"\n        style={style}\n        onMouseDown={this.handleMouseDown.bind(this)}\n      />\n    );\n  }\n}\n\nexport default Resizer;\n","import React, { Component, Fragment } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Resizer from './Resize.js';\nimport * as FontAwesome from 'react-icons/lib/fa';\nimport { CSSTransition } from 'react-transition-group';\n\nclass Modal extends Component {\n\trender() {\n\t\tconst { isDragging, width, height, top, left, isOpen, isMinimised, onRequestRecover,className,onFocus } = this.props;\n\t\tif (isOpen) {\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<CSSTransition in={!isMinimised} timeout={300} classNames=\"minimise\" unmountOnExit>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonClick={onFocus}\n\t\t\t\t\t\t\tref={(node) => {\n\t\t\t\t\t\t\t\tthis.node = node;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdraggable={isDragging}\n\t\t\t\t\t\t\tclassName={!className?\"flexible-modal\":\"flexible-modal \"+className}\n\t\t\t\t\t\t\tstyle={{ width, height, top, left }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.props.children}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CSSTransition>\n\t\t\t\t\t{isMinimised && (\n\t\t\t\t\t\t<button className=\"flexible-modal-rebound-btn\" onClick={onRequestRecover}>\n\t\t\t\t\t\t\t<FontAwesome.FaBars />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t)}\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nclass FlexibleModal extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tisDragging: false,\n\t\t\tisResizing: false,\n\t\t\ttop:\n\t\t\t\tthis.props.top !== undefined\n\t\t\t\t\t? this.props.top\n\t\t\t\t\t: this.props.initHeight\n\t\t\t\t\t\t? window.innerHeight / 2 - this.props.initHeight / 2 - 50\n\t\t\t\t\t\t: window.innerHeight / 2 - 400 / 2 - 50,\n\t\t\tleft:\n\t\t\t\tthis.props.left !== undefined\n\t\t\t\t\t? this.props.left\n\t\t\t\t\t: this.props.initWidth\n\t\t\t\t\t\t? window.innerWidth / 2 - this.props.initWidth / 2 - 21\n\t\t\t\t\t\t: window.innerWidth / 2 - 800 / 2 - 21,\n\t\t\twidth: this.props.initWidth ? this.props.initWidth : 800,\n\t\t\theight: this.props.initHeight ? this.props.initHeight : 400,\n\t\t\trel: null\n\t\t};\n\t\tthis.updateStateResizing = this.updateStateResizing.bind(this);\n\t\tthis.funcResizing = this.funcResizing.bind(this);\n\t\tthis.resize = this.resize.bind(this);\n\t\tthis.onMouseMove = this.onMouseMove.bind(this);\n\t\tthis.onMouseUp = this.onMouseUp.bind(this);\n\t\tthis.onMouseDown = this.onMouseDown.bind(this);\n\t\tthis.pressKey = this.pressKey.bind(this);\n\t\tthis.updateStateDragging = this.updateStateDragging.bind(this);\n\t}\n\n\tcomponentDidMount() {\n    \tconst { disableKeystroke } = this.props;\n\t\tdocument.addEventListener('mouseup', this.onMouseUp);\n\t\tif(!disableKeystroke) document.addEventListener('keydown', this.pressKey);\n\t}\n\n\t// componentDidUpdate(props, state) {\n\t// \tif (!this.state.isDragging && state.isDragging) {\n\t// \t\tdocument.removeEventListener('mousemove', this.onMouseMove);\n\t// \t\tdocument.removeEventListener('mouseup', this.onMouseUp);\n\t// \t}\n  \t// }\n  \n\tcomponentWillUnmount() {\n\t\tconst { disableKeystroke } = this.props;\n\t\tif(document.removeEventListener){\n\t\tdocument.removeEventListener('mousemove', this.onMouseMove);\n\t\tdocument.removeEventListener('mouseup', this.onMouseUp);\n\t\tif(!disableKeystroke) document.removeEventListener('keydown', this.pressKey);\n\t\t}\n\t}\n\n\tonMouseDown(e) {\n\t\t// only left mouse button\n\t\tdocument.addEventListener('mousemove', this.onMouseMove);\n\t\tif (e.button !== 0) return;\n\t\tvar pos = ReactDOM.findDOMNode(this.node_modal);\n\t\tthis.setState({\n\t\t\tisDragging: true,\n\t\t\trel: {\n\t\t\t\tx: e.pageX - pos.offsetLeft,\n\t\t\t\ty: e.pageY - pos.offsetTop\n\t\t\t}\n\t\t});\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t}\n\n\tonMouseUp(e) {\n\t\tdocument.removeEventListener('mousemove', this.onMouseMove);\n\t\tthis.setState({ isDragging: false });\n\t\tthis.setState({ isResizing: false });\n\t\te.stopPropagation();\n\t\t// e.preventDefault();\n\t}\n\n\tonMouseMove(e) {\n\t\tthis.props.resizing();\n\t\tconst { disableMove, disableVerticalMove, disableHorizontalMove } = this.props;\n\t\tif (this.state.isDragging) {\n\n\t\t\tif (disableMove) {\n\t\t\t} else if (disableVerticalMove && disableHorizontalMove) {\n\t\t\t} else if (!disableVerticalMove && disableHorizontalMove) {\n\t\t\t\tthis.setState({\n\t\t\t\t\ttop: e.pageY - this.state.rel.y\n\t\t\t\t});\n\t\t\t} else if (disableVerticalMove && !disableHorizontalMove) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tleft: e.pageX - this.state.rel.x\n\t\t\t\t});\n\t\t\t} else if (!disableVerticalMove && !disableHorizontalMove) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tleft: e.pageX - this.state.rel.x,\n\t\t\t\t\ttop: e.pageY - this.state.rel.y\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (this.state.isResizing) {\n\t\t\tthis.funcResizing(e.clientX, e.clientY);\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t}\n\n\tupdateStateResizing(isResizing) {\n\t\tdocument.addEventListener('mousemove', this.onMouseMove);\n\t\tthis.setState({ isResizing });\n\t}\n\n\tfuncResizing(clientX, clientY) {\n\t\tthis.props.resizing();\n\t\tconst { minWidth: mWidth, minHeight: mHeight, disableVerticalResize, disableHorizontalResize } = this.props;\n\t\tlet node = ReactDOM.findDOMNode(this.node_modal);\n\t\tlet minWidth = mWidth ? mWidth : 200;\n\t\tlet minHeight = mHeight ? mHeight : 100;\n\t\tif (!disableHorizontalResize && clientX > node.offsetLeft + minWidth) {\n\t\t\tthis.setState({\n\t\t\t\twidth: clientX - node.offsetLeft + 16 / 2\n\t\t\t});\n\t\t}\n\t\tif (!disableVerticalResize && clientY > node.offsetTop + minHeight) {\n\t\t\tthis.setState({\n\t\t\t\theight: clientY - node.offsetTop + 16 / 2\n\t\t\t});\n\t\t}\n\t}\n\n\tupdateStateDragging(isDragging) {\n\t\tthis.setState({ isDragging });\n\t\tthis.props.resizing();\n\t}\n\n\tpressKey(e) {\n\t\tconst { onRequestClose, disableResize, disableMove, disableVerticalMove, disableHorizontalMove } = this.props;\n\t\tif (e.ctrlKey) {\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 37:\n\t\t\t\t\t!disableResize && this.setState((prevState) => ({ width: prevState.width - 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 38:\n\t\t\t\t\t!disableResize && this.setState((prevState) => ({ height: prevState.height - 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39:\n\t\t\t\t\t!disableResize && this.setState((prevState) => ({ width: prevState.width + 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 40:\n\t\t\t\t\t!disableResize && this.setState((prevState) => ({ height: prevState.height + 20 }));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else {\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 27:\n\t\t\t\t\tonRequestClose();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 37:\n\t\t\t\t\t!disableMove &&\n\t\t\t\t\t\t!disableHorizontalMove &&\n\t\t\t\t\t\tthis.setState((prevState) => ({ left: prevState.left - 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 38:\n\t\t\t\t\t!disableMove && !disableVerticalMove && this.setState((prevState) => ({ top: prevState.top - 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39:\n\t\t\t\t\t!disableMove &&\n\t\t\t\t\t\t!disableHorizontalMove &&\n\t\t\t\t\t\tthis.setState((prevState) => ({ left: prevState.left + 20 }));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 40:\n\t\t\t\t\t!disableMove && !disableVerticalMove && this.setState((prevState) => ({ top: prevState.top + 20 }));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tresize(width, height) {\n\t\tthis.props.resizing();\n\t\tthis.setState((prevState) => (\n      { width: width || prevState.width, height: height || prevState.height }\n    ));\n\t}\n\n\trender() {\n\t\tconst { isOpen, isMinimised, onRequestClose, onRequestMinimise, onRequestRecover, disableResize,className,onFocus } = this.props;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{/*this mask is a must*/}\n\t\t\t\t{isOpen &&\n\t\t\t\t!isMinimised && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tonClick={onRequestMinimise ? onRequestMinimise : onRequestClose}\n\t\t\t\t\t\tclassName=\"flexible-modal-mask\"\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t<Modal\n\t\t\t\t\tclassName = {className}\n\t\t\t\t\tonFocus={onFocus}\n\t\t\t\t\twidth={this.state.width}\n\t\t\t\t\theight={this.state.height}\n\t\t\t\t\ttop={this.state.top}\n\t\t\t\t\tleft={this.state.left}\n\t\t\t\t\tisDragging={this.state.isDragging}\n\t\t\t\t\tonRequestRecover={onRequestRecover}\n\t\t\t\t\tisMinimised={isMinimised}\n\t\t\t\t\tisOpen={isOpen}\n\t\t\t\t\tupdateStateDragging={this.updateStateDragging}\n\t\t\t\t\ttransitionName=\"modal-anim\"\n\t\t\t\t\tref={(node) => {\n\t\t\t\t\t\tthis.node_modal = node;\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t\t<div\n\t\t\t\t\t\tonMouseDown={this.onMouseDown}\n\t\t\t\t\t\tclassName=\"flexible-modal-drag-area\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: this.state.width\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tref={(dragArea) => {\n\t\t\t\t\t\t\tthis.dragArea = dragArea;\n\t\t\t\t\t\t}}\n\t\t\t\t\t><div>Block Script</div></div>\n\t\t\t\t\t{!disableResize && <Resizer updateStateResizing={this.updateStateResizing} />}\n\t\t\t\t</Modal>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default FlexibleModal;\n","export function generateUUID() {\r\n    var d = new Date().getTime();\r\n    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n        var r = (d + Math.random()*16)%16 | 0;\r\n        d = Math.floor(d/16);\r\n        return (c=='x' ? r : (r&0x3|0x8)).toString(16);\r\n    });\r\n    return uuid;\r\n};","import * as React from \"react\";\r\nimport { withRouter, RouteComponentProps } from \"react-router\";\r\nimport GameScreen from \"./components/GameScreen\";\r\nimport styles from \"./GamePlayer.module.css\"\r\ninterface MatchParams {\r\n  id: string;\r\n}\r\n\r\nconst GamePlayer: React.SFC<RouteComponentProps<MatchParams>> = ({ match }) => {\r\n  console.log(match.params.id);\r\n  const [gameFile,setGameFile] = React.useState(\"\");\r\n  const [gameLoad,setGameLoad] = React.useState(false);\r\n  React.useEffect(()=>{\r\n    fetch(\"http://localhost:5353/\"+match.params.id).then(x => x.text()).then(x => {\r\n        setGameFile(x);\r\n        setGameLoad(true)\r\n      })\r\n  },[])\r\n  return (\r\n      <div className={styles.GamePlayer}>\r\n        {gameLoad?(<GameScreen className={styles.GameScreen} gameJson = {gameFile} width = {800} height={500}/>):(<div className= {styles.loading}>LOADING</div>)}\r\n      </div>\r\n      )\r\n  \r\n};\r\n\r\nexport default withRouter(GamePlayer);","import React from \"react\";\r\nimport GameScreen from \"./components/GameScreen\";\r\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport GamePlayer from \"./GamePlayer\";\r\n\r\nconst Root = () => {\r\n    return(\r\n        <div>\r\n            <HashRouter>\r\n                <Route exact path=\"/\" component={App} />\r\n                <Route path=\"/player/:id\" component={GamePlayer} />\r\n            </HashRouter>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default Root","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport Game from './GameEngine/Game';\nimport MovieClip from './GameEngine/MovieClip';\nimport Transform from './GameEngine/Transform';\nimport Graphic from './GameEngine/Graphic';\nimport Matter from 'matter-js';\n\nimport ResourceManager from './GameEngine/ResourceManager';\nimport Root from './Root';\n\n\n\n\nReactDOM.render(\n  <Root/>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}